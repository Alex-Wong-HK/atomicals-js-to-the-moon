const a0_0x492db6=a0_0x4778;(function(_0x5328e9,_0x503944){const _0x16241c=a0_0x4778,_0xef8b0b=_0x5328e9();while(!![]){try{const _0x3827d9=parseInt(_0x16241c(0x108))/0x1+-parseInt(_0x16241c(0xc1))/0x2*(parseInt(_0x16241c(0x12f))/0x3)+parseInt(_0x16241c(0x139))/0x4*(-parseInt(_0x16241c(0xf4))/0x5)+-parseInt(_0x16241c(0x1b8))/0x6*(-parseInt(_0x16241c(0xbc))/0x7)+parseInt(_0x16241c(0x12d))/0x8*(-parseInt(_0x16241c(0x12b))/0x9)+-parseInt(_0x16241c(0x124))/0xa+parseInt(_0x16241c(0x12c))/0xb*(parseInt(_0x16241c(0x18b))/0xc);if(_0x3827d9===_0x503944)break;else _0xef8b0b['push'](_0xef8b0b['shift']());}catch(_0x7973e7){_0xef8b0b['push'](_0xef8b0b['shift']());}}}(a0_0x58e9,0xa12fd));const a0_0xcd804c=(function(){let _0x3ba2d5=!![];return function(_0x54fa7e,_0x4ad760){const _0x3ddbac=_0x3ba2d5?function(){const _0x15b4cb=a0_0x4778;if(_0x4ad760){const _0x5872a1=_0x4ad760[_0x15b4cb(0x195)](_0x54fa7e,arguments);return _0x4ad760=null,_0x5872a1;}}:function(){};return _0x3ba2d5=![],_0x3ddbac;};}()),a0_0x4e2fe=a0_0xcd804c(this,function(){const _0x5cb1d4=a0_0x4778;return a0_0x4e2fe[_0x5cb1d4(0x1bb)]()['search'](_0x5cb1d4(0x9a))[_0x5cb1d4(0x1bb)]()[_0x5cb1d4(0xa9)](a0_0x4e2fe)[_0x5cb1d4(0x1d7)](_0x5cb1d4(0x9a));});a0_0x4e2fe();'use strict';var __awaiter=this&&this[a0_0x492db6(0xc7)]||function(_0x2a0684,_0x142837,_0x58887f,_0x33368e){function _0x10cfc3(_0x5448b5){return _0x5448b5 instanceof _0x58887f?_0x5448b5:new _0x58887f(function(_0x8b63a6){_0x8b63a6(_0x5448b5);});}return new(_0x58887f||(_0x58887f=Promise))(function(_0xd9c3a4,_0x2e5d94){const _0xebf4df=a0_0x4778;function _0x1ebea1(_0x4d1099){try{_0x4fb1a4(_0x33368e['next'](_0x4d1099));}catch(_0x44837b){_0x2e5d94(_0x44837b);}}function _0x5ea408(_0x1f50a5){const _0xd94924=a0_0x4778;try{_0x4fb1a4(_0x33368e[_0xd94924(0x148)](_0x1f50a5));}catch(_0x2b404e){_0x2e5d94(_0x2b404e);}}function _0x4fb1a4(_0x4528e8){const _0x15c215=a0_0x4778;_0x4528e8[_0x15c215(0x182)]?_0xd9c3a4(_0x4528e8[_0x15c215(0xaa)]):_0x10cfc3(_0x4528e8['value'])[_0x15c215(0x111)](_0x1ebea1,_0x5ea408);}_0x4fb1a4((_0x33368e=_0x33368e[_0xebf4df(0x195)](_0x2a0684,_0x142837||[]))['next']());});};Object['defineProperty'](exports,a0_0x492db6(0x1b5),{'value':!![]}),exports[a0_0x492db6(0x11e)]=exports[a0_0x492db6(0x1bd)]=exports[a0_0x492db6(0x14a)]=exports[a0_0x492db6(0xfe)]=exports[a0_0x492db6(0x106)]=exports[a0_0x492db6(0x199)]=exports[a0_0x492db6(0x165)]=exports[a0_0x492db6(0x15b)]=exports[a0_0x492db6(0xcf)]=exports['SEND_RETRY_ATTEMPTS']=exports['SEND_RETRY_SLEEP_SECONDS']=exports[a0_0x492db6(0x10a)]=exports['DEFAULT_SATS_BYTE']=void 0x0;const address_keypair_path_1=require(a0_0x492db6(0x15c)),atomical_format_helpers_1=require(a0_0x492db6(0xce)),ecc=require(a0_0x492db6(0x1c3)),ecpair_1=require('ecpair'),tinysecp=require(a0_0x492db6(0x1c3)),bitcoin=require(a0_0x492db6(0xea)),process=require(a0_0x492db6(0x1a7)),chalk=require('chalk'),bufferutils_1=require(a0_0x492db6(0x162));bitcoin[a0_0x492db6(0x19b)](ecc);const bitcoinjs_lib_1=require(a0_0x492db6(0xea));(0x0,bitcoinjs_lib_1[a0_0x492db6(0x19b)])(tinysecp);function a0_0x58e9(){const _0x4cca07=['\x0aBroadcasting\x20tx...','length','../../node_modules/bitcoinjs-lib/src/bufferutils','witness','-\x20prefix\x20length\x20<=\x204:\x20about\x20a\x20minute\x20or\x20two.\x20~65,536\x20hashes\x20on\x20average.','INPUT_BYTES_BASE','\x20|\x20All\x20[','sleeper','nonce','scriptP2TR','hex_bitwork','ticker','calculateAmountRequiredForReveal','../commands/witness_stack_to_script_witness','electrumApi\x20required','commit','revealFeeOnly','setArgs','request_ticker','close','End\x20mine\x20via\x20Subprocess:\x20','process','RBF_INPUT_SEQUENCE','Time\x20to\x20mine\x20estimates:\x20','setRBF','userDefinedData','parentKeyInfo','parentId','host\x20CPU\x20number\x20is:\x20','addRevealOutputIfChangeRequired','now','verbose','getData','isAtomicalId','done','Kill\x20worker[','request_container','keypairInfo','resetConnection','getTotalAdditionalOutputValues','ext','Error\x20sending','setCtx','12gaGrQj','\x0aDOUBLE\x20CHECK:\x20ERROR:\x20This\x20txid\x20can\x20Not\x20match\x20previous!!!,please\x20exit\x20by\x20self!!','-\x20prefix\x20length\x20>=\x207:\x20a\x20few\x20hours\x20or\x20much\x20longer.\x20>268,435,456\x20hashes\x20on\x20average.','parents','txid','setRequestItem\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','setInputParent','request_subrealm','init','\x0aAtomicals\x20Bitwork\x20Mining\x20-\x20Requested\x20bitwork\x20proof-of-work\x20mining\x20for\x20the\x20','apply','dft','rule','Generated\x20nonces:\x20','OUTPUT_BYTES_BASE','opType','initEccLib','mint_ticker','---------\x0aWARNING:\x20This\x20might\x20take\x20a\x20very\x20long\x20time\x20depending\x20on\x20the\x20speed\x20of\x20the\x20CPU.','\x0aDOUBLE\x20CHECK:\x20MATCH!!!','SUBREALM','Excessive\x20fee\x20detected.\x20Hardcoded\x20to\x20','red','Program\x20Exit...','NONE','push','Transaction','isValidTickerName','node:process','indexOf','\x0aBitwork\x20matches\x20reveal\x20txid!\x20','commitAndRevealFeePlusOutputs','parentUtxoPartial','getInit','ceil','finalizeInput','finalizeAllInputs','toXOnly','Will\x20retry\x20to\x20broadcast\x20transaction\x20again\x20in\x20','direct','sleep','getKeypairInfo','__esModule','dmtOptions\x20required\x20for\x20dmt\x20type','broadcastWithRetries','66lNzrnH','TICKER','meta','toString','Cannot\x20request\x20subrealm\x20for\x20a\x20top\x20level\x20realm','REQUEST_NAME_TYPE','hash','witnessStackToScriptWitness','atom:btc:dat:','vrskwqwncwc6r209fd93ngyr','Psbt','tiny-secp256k1','hasValidBitwork','setRequestSubrealm','getTotalAdditionalInputValues','Spent\x20Time:\x20','getAdditionalFundingRequiredForReveal','getId','RealmClaimType\x20must\x20be\x20DIRECT\x20or\x20RULE','containerMembership','message','setRequestTicker\x20can\x20only\x20be\x20set\x20for\x20dft\x20or\x20ft\x20types','bitworkr','pid','nftOptions','kill','\x0aAvailable\x20Bitwork\x20found\x20via\x20Worker[','isValidContainerName','dftOptions','reveal','additionalOutputs','search','type','@\x20now:\x20','fromWIF','commitFeeOnly','SEND_RETRY_SLEEP_SECONDS','setRequestItem','cpus','(((.+)+)+)+$','hex','setInit','write','Payload\x20CBOR\x20Size\x20(bytes):\x20','requestNameType','ftOptions\x20required\x20for\x20ft\x20type','Payload\x20Encoded:\x20','DIRECT','controlBlock','\x20this.requestParentId;','setBitworkCommit','dmtOptions','cluster','log','constructor','value','rbf','index','toHex','getDataObjectFromStringTypeHints','witnessUtxo','bitworkr\x20(input):\x20','\x20s.','prepareFilesDataAsObject','getOutputValueForCommit','totalOutputSum','Kill\x20CMD\x20send\x20completed','./utils','Now\x20kill\x20other\x20worker\x20processes...','getCtx',']\x20PID[','Options\x20required','setVersion','651399GWaiSS','Data\x20cannot\x20have\x20field\x20named\x20\x27ctx\x27\x20set\x20manually.\x20Use\x20options\x20config.','ftOptions','Data\x20must\x20be\x20an\x20object','noncesPerSlice','974nualFd','outs','-\x20prefix\x20length\x206:\x20up\x20to\x20an\x20hour\x20or\x20more.\x20~16,777,216\x20hashes\x20on\x20average.','prefix','addInput','request_dmitem','__awaiter','@\x20time:\x20','bc1p','setData',',\x20time:\x20','updateNonceCount','@\x20previous:\x20','./atomical-format-helpers','DUST_AMOUNT','dataId','getFundingUtxo','REALM','\x20nonces:\x20','signInput','bitworkInfoCommit','bitworkc\x20(decoded):\x20','copiedData','parent_container','clearLine','request_realm','Now\x20kill\x20this\x20worker\x20processes...','dat','broadcast','revealTxid','concat','floor','address','random','nft','endMine','\x20revealTxid:\x20','nftOptions\x20required\x20for\x20nft\x20type','foundBitwork','data','tapScriptSig','bitcoinjs-lib','args','satsbyte','Worker\x20process[ID:','start','setRequestRealm','getInputParent','ECPairFactory','Invalid\x20parent\x20realm\x20atomical\x20id\x20for\x20subrealm','fork','2510IaapKQ','Data\x20cannot\x20have\x20field\x20named\x20\x27meta\x27\x20set\x20manually.\x20Use\x20options\x20config.','signature','main\x20process\x20','redeem','reverseBuffer','embed','setMeta','job\x20start\x20time\x20',']\x20commitTxid:\x20','EXCESSIVE_FEE_LIMIT','rawtx','ctx','atomicalId','SEND_RETRY_ATTEMPTS','parentAtomicalInfo','utxo','stdout','MAX_SEQUENCE','dftOptions\x20required\x20for\x20dft\x20type','455847xjnMqs','-\x20prefix\x20length\x205:\x20several\x20minutes.\x20~1,048,576\x20hashes\x20on\x20average.','DEFAULT_SATS_ATOMICAL_UTXO','\x20satoshis.\x20Aborting\x20due\x20to\x20protect\x20funds.\x20Contact\x20developer','finalSafetyCheckForExcessiveFee','commitTxid',']\x20is\x20spawned...','Total\x20Spent\x20Time:\x20','electrumApi','then','ITEM','bitworkInfoReveal','revealFeePlusOutputs','hashLockP2TR','send','setRequestRealm\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','getAndCheckAtomicalInfo','addCommitChangeOutputIfRequired','extractTransaction','substring','output','isValidRealmName','AtomicalOperationBuilder','requestParentId','Unable\x20to\x20broadcast\x20reveal\x20transaction\x20after\x20attempts','object','toFixed','from','8608910psiOyV','\x20subprocess.','DEFAULT_SATS_BYTE','startsWith','Network\x20error\x20broadcasting\x20(Trying\x20again\x20soon...)','Unable\x20to\x20broadcast\x20commit\x20transaction\x20after\x20attempts:\x20','setRequestTicker','30465XyiioK','20928743oGPZQw','552aYOWeE','calculateFeesRequiredForCommit','4332xQFXel','inputUtxos','setRequestSubrealm\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','addOutput','isValidBitworkString','calculateFeesRequiredForAccumulatedCommitAndReveal','cursorTo','addOutputCvt','sequence','Elapse:\x20','7364UdAgLf','Success\x20sent\x20tx:\x20','options','tweakedChildNode','isEmpty','s\x20|\x20Total\x20calculation:\x20','parentInputAtomical','prepareCommitRevealConfig','workers','getArgs','NETWORK','\x20exit','requestName',',\x20will\x20create\x20','WIF','throw','resolveInputParent','REALM_CLAIM_TYPE','CONTAINER','input_bitwork','inputs','bitworkr\x20(decoded):\x20','RULE','getMeta','dmt','utf8','AtomicalsPayload','setRequestContainer','./select-funding-utxo','childNodeXOnlyPubkey','nfjaatnqzq775f2sysuvj5','slice','script','addInputCvt','BASE_BYTES','./address-keypair-path','translateFromBase32ToHex','Data\x20cannot\x20have\x20field\x20named\x20\x27init\x27\x20set\x20manually.\x20Use\x20options\x20config.','time'];a0_0x58e9=function(){return _0x4cca07;};return a0_0x58e9();}const command_helpers_1=require('../commands/command-helpers'),select_funding_utxo_1=require(a0_0x492db6(0x155)),utils_1=require(a0_0x492db6(0xb6)),witness_stack_to_script_witness_1=require(a0_0x492db6(0x16d)),ECPair=(0x0,ecpair_1[a0_0x492db6(0xf1)])(tinysecp);exports[a0_0x492db6(0x126)]=0xa,exports[a0_0x492db6(0x10a)]=0x3e8,exports['SEND_RETRY_SLEEP_SECONDS']=0xf,exports['SEND_RETRY_ATTEMPTS']=0x14,exports[a0_0x492db6(0xcf)]=0x222,exports[a0_0x492db6(0x15b)]=10.5,exports[a0_0x492db6(0x165)]=57.5,exports[a0_0x492db6(0x199)]=0x2b,exports[a0_0x492db6(0x106)]=0xffffffff,exports[a0_0x492db6(0xfe)]=0x7a120;const os=require('os'),cluster=require(a0_0x492db6(0xa7));var REALM_CLAIM_TYPE;(function(_0x5751b5){const _0x5c7e76=a0_0x492db6;_0x5751b5['DIRECT']=_0x5c7e76(0x1b2),_0x5751b5[_0x5c7e76(0x14f)]='rule';}(REALM_CLAIM_TYPE=exports['REALM_CLAIM_TYPE']||(exports[a0_0x492db6(0x14a)]={})));function logMiningProgressToConsole(_0x3fe689,_0x226e8a,_0x51b365,_0x52d4a0){const _0x295dbf=a0_0x492db6;if(!_0x3fe689)return;if(_0x226e8a){_0x52d4a0%0x2710===0x0&&console['log'](_0x295dbf(0x198),_0x52d4a0,_0x295dbf(0xcb),Math['floor'](Date[_0x295dbf(0x17e)]()/0x3e8));return;}process[_0x295dbf(0x105)][_0x295dbf(0xd9)](0x0),process[_0x295dbf(0x105)][_0x295dbf(0x135)](0x0),process[_0x295dbf(0x105)][_0x295dbf(0x9d)](chalk['red'](_0x51b365,_0x295dbf(0xd3),_0x52d4a0));}function printBitworkLog(_0x46e980,_0x35c393){const _0x7294fd=a0_0x492db6;if(!_0x46e980)return;console[_0x7294fd(0xa8)](_0x7294fd(0x194)+(_0x35c393?_0x7294fd(0x16f):_0x7294fd(0x1d5))+'\x20transaction.'),_0x35c393?(console[_0x7294fd(0xa8)]('bitworkc\x20(input):\x20'+_0x46e980[_0x7294fd(0x14c)]),console[_0x7294fd(0xa8)](_0x7294fd(0xd6)+_0x46e980[_0x7294fd(0x16a)])):(console['log'](_0x7294fd(0xb0)+_0x46e980[_0x7294fd(0x14c)]),console['log'](_0x7294fd(0x14e)+_0x46e980[_0x7294fd(0x16a)])),console['log'](_0x7294fd(0x19d)),console[_0x7294fd(0xa8)](_0x7294fd(0x177)),console['log'](_0x7294fd(0x164)),console[_0x7294fd(0xa8)](_0x7294fd(0x109)),console[_0x7294fd(0xa8)](_0x7294fd(0xc3)),console['log'](_0x7294fd(0x18d)),console[_0x7294fd(0xa8)]('\x0aStarting\x20mining\x20now...\x0a');}var REQUEST_NAME_TYPE;(function(_0x157b98){const _0x4c0dc8=a0_0x492db6;_0x157b98['NONE']=_0x4c0dc8(0x1a3),_0x157b98[_0x4c0dc8(0x14b)]=_0x4c0dc8(0x14b),_0x157b98['TICKER']=_0x4c0dc8(0x1b9),_0x157b98[_0x4c0dc8(0xd2)]=_0x4c0dc8(0xd2),_0x157b98[_0x4c0dc8(0x19f)]='SUBREALM',_0x157b98[_0x4c0dc8(0x112)]=_0x4c0dc8(0x112);}(REQUEST_NAME_TYPE=exports[a0_0x492db6(0x1bd)]||(exports[a0_0x492db6(0x1bd)]={})));function a0_0x4778(_0x401644,_0x292e92){const _0x1f713c=a0_0x58e9();return a0_0x4778=function(_0x4e2fe,_0xcd804c){_0x4e2fe=_0x4e2fe-0x96;let _0x58e998=_0x1f713c[_0x4e2fe];return _0x58e998;},a0_0x4778(_0x401644,_0x292e92);}class AtomicalOperationBuilder{constructor(_0x8dc921){const _0x135c5e=a0_0x492db6;this[_0x135c5e(0x13b)]=_0x8dc921,this[_0x135c5e(0x179)]=null,this[_0x135c5e(0x1cb)]=null,this[_0x135c5e(0xd5)]=null,this[_0x135c5e(0x113)]=null,this['requestName']=null,this[_0x135c5e(0x11f)]=null,this[_0x135c5e(0x9f)]=REQUEST_NAME_TYPE[_0x135c5e(0x1a3)],this['meta']={},this[_0x135c5e(0xeb)]={},this[_0x135c5e(0x193)]={},this[_0x135c5e(0x100)]={},this[_0x135c5e(0x13f)]=null,this['inputUtxos']=[],this[_0x135c5e(0x1d6)]=[],this[_0x135c5e(0x1b0)]=_0x2da207=>{const _0x1e9bca=_0x135c5e;return _0x2da207[_0x1e9bca(0x158)](0x1,0x21);};if(!this[_0x135c5e(0x13b)])throw new Error(_0x135c5e(0xba));if(!this['options'][_0x135c5e(0x110)])throw new Error(_0x135c5e(0x16e));!this['options']['satsbyte']&&(this['options'][_0x135c5e(0xec)]=exports[_0x135c5e(0x126)]);if(this['options']['opType']===_0x135c5e(0xe3)){if(!this['options'][_0x135c5e(0x1d0)])throw new Error(_0x135c5e(0xe6));}if(this[_0x135c5e(0x13b)]['opType']==='ft'){if(!this[_0x135c5e(0x13b)][_0x135c5e(0xbe)])throw new Error(_0x135c5e(0xa0));}if(this[_0x135c5e(0x13b)][_0x135c5e(0x19a)]===_0x135c5e(0x196)){if(!this[_0x135c5e(0x13b)][_0x135c5e(0x1d4)])throw new Error(_0x135c5e(0x107));}if(this[_0x135c5e(0x13b)]['opType']===_0x135c5e(0x151)){if(!this['options'][_0x135c5e(0xa6)])throw new Error(_0x135c5e(0x1b6));}}[a0_0x492db6(0x178)](_0x2e7b0d){this['options']['rbf']=_0x2e7b0d;}[a0_0x492db6(0x154)](_0x559eaf){const _0x184d5b=a0_0x492db6;if(this[_0x184d5b(0x13b)][_0x184d5b(0x19a)]!==_0x184d5b(0xe3))throw new Error('setRequestContainer\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types');const _0x403a74=_0x559eaf['startsWith']('#')?_0x559eaf['substring'](0x1):_0x559eaf;(0x0,atomical_format_helpers_1[_0x184d5b(0x1d3)])(_0x559eaf),this[_0x184d5b(0x145)]=_0x403a74,this[_0x184d5b(0x9f)]=REQUEST_NAME_TYPE['CONTAINER'],this['requestParentId']=null;}[a0_0x492db6(0xef)](_0x732ea){const _0x17d6ac=a0_0x492db6;if(this[_0x17d6ac(0x13b)][_0x17d6ac(0x19a)]!=='nft')throw new Error(_0x17d6ac(0x117));const _0x37d8b4=_0x732ea[_0x17d6ac(0x127)]('+')?_0x732ea[_0x17d6ac(0x11b)](0x1):_0x732ea;(0x0,atomical_format_helpers_1[_0x17d6ac(0x11d)])(_0x732ea),this[_0x17d6ac(0x145)]=_0x37d8b4,this[_0x17d6ac(0x9f)]=REQUEST_NAME_TYPE['REALM'],this[_0x17d6ac(0x11f)]=null;}[a0_0x492db6(0x1c5)](_0x4e51a4,_0x28adf2,_0x49f544){const _0x5a93e8=a0_0x492db6;if(this[_0x5a93e8(0x13b)]['opType']!==_0x5a93e8(0xe3))throw new Error(_0x5a93e8(0x131));if(!(0x0,atomical_format_helpers_1[_0x5a93e8(0x181)])(_0x28adf2))throw new Error(_0x5a93e8(0xf2));if(_0x4e51a4[_0x5a93e8(0x1a8)]('.')===-0x1)throw new Error(_0x5a93e8(0x1bc));const _0x5f440d=_0x4e51a4[_0x5a93e8(0x127)]('+')?_0x4e51a4[_0x5a93e8(0x11b)](0x1):_0x4e51a4,_0x4a5ca9=_0x5f440d['split']('.'),_0xc7305d=_0x4a5ca9[_0x4a5ca9[_0x5a93e8(0x161)]-0x1];(0x0,atomical_format_helpers_1['isValidSubRealmName'])(_0xc7305d),this[_0x5a93e8(0x145)]=_0xc7305d,this[_0x5a93e8(0x11f)]=_0x28adf2,this[_0x5a93e8(0x9f)]=REQUEST_NAME_TYPE[_0x5a93e8(0x19f)];if(_0x49f544===REALM_CLAIM_TYPE[_0x5a93e8(0xa2)])this[_0x5a93e8(0x171)]({'claim_type':_0x5a93e8(0x1b2)});else{if(_0x49f544===REALM_CLAIM_TYPE[_0x5a93e8(0x14f)])this['setArgs']({'claim_type':_0x5a93e8(0x197)});else throw new Error(_0x5a93e8(0x1ca));}}[a0_0x492db6(0x98)](_0x39e606,_0x20bdef){const _0x535f74=a0_0x492db6;if(this['options'][_0x535f74(0x19a)]!==_0x535f74(0xe3))throw new Error(_0x535f74(0x190));if(!(0x0,atomical_format_helpers_1[_0x535f74(0x181)])(_0x20bdef))throw new Error('Invalid\x20parent\x20container\x20atomical\x20id\x20for\x20item');this[_0x535f74(0x145)]=_0x39e606,this[_0x535f74(0x11f)]=_0x20bdef,this[_0x535f74(0x9f)]=REQUEST_NAME_TYPE['ITEM'];}[a0_0x492db6(0x12a)](_0x5a1bbf){const _0x1f871b=a0_0x492db6;if(this['options'][_0x1f871b(0x19a)]!==_0x1f871b(0x196)&&this[_0x1f871b(0x13b)][_0x1f871b(0x19a)]!=='ft')throw new Error(_0x1f871b(0x1cd));const _0x40b4bd=_0x5a1bbf[_0x1f871b(0x127)]('$')?_0x5a1bbf['substring'](0x1):_0x5a1bbf;(0x0,atomical_format_helpers_1[_0x1f871b(0x1a6)])(_0x40b4bd),this['requestName']=_0x40b4bd,this[_0x1f871b(0x9f)]=REQUEST_NAME_TYPE[_0x1f871b(0x1b9)],this[_0x1f871b(0x11f)]=null;}static[a0_0x492db6(0xae)](_0x317291){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x57cdd9=a0_0x4778;return(0x0,command_helpers_1[_0x57cdd9(0xb2)])(_0x317291);});}[a0_0x492db6(0xca)](_0x434db3,_0xadd80e=![]){const _0x1e23b2=a0_0x492db6;if(!_0x434db3)return;if(typeof _0x434db3!==_0x1e23b2(0x121))throw new Error(_0x1e23b2(0xbf));if(_0x434db3[_0x1e23b2(0x1ba)])throw new Error(_0x1e23b2(0xf5));if(_0x434db3['ctx'])throw new Error(_0x1e23b2(0xbd));if(_0x434db3[_0x1e23b2(0x193)])throw new Error(_0x1e23b2(0x15e));this[_0x1e23b2(0x179)]=_0x434db3,_0xadd80e&&console[_0x1e23b2(0xa8)]('setData',this[_0x1e23b2(0x179)]);}[a0_0x492db6(0x180)](){const _0x4d369b=a0_0x492db6;return this[_0x4d369b(0x179)];}[a0_0x492db6(0x171)](_0x15f30e){const _0x192ac7=a0_0x492db6;this[_0x192ac7(0xeb)]=_0x15f30e;}[a0_0x492db6(0x142)](){const _0x34f460=a0_0x492db6;return this[_0x34f460(0xeb)];}['setInit'](_0x4b9998){const _0x4f6ab3=a0_0x492db6;this[_0x4f6ab3(0x193)]=_0x4b9998;}[a0_0x492db6(0x1ac)](){return this['init'];}[a0_0x492db6(0xfb)](_0x5ad6df){const _0x1d1c68=a0_0x492db6;this[_0x1d1c68(0x1ba)]=_0x5ad6df;}[a0_0x492db6(0x150)](){return this['meta'];}[a0_0x492db6(0x18a)](_0x5a3e6f){const _0x218ab5=a0_0x492db6;this[_0x218ab5(0x100)]=_0x5a3e6f;}['getCtx'](){return this['ctx'];}['setContainerMembership'](_0x187c05){const _0x4fa915=a0_0x492db6;if(!_0x187c05)throw new Error('Empty\x20container\x20name');const _0x297802=_0x187c05[_0x4fa915(0x127)]('#')?_0x187c05[_0x4fa915(0x11b)](0x1):_0x187c05;if(!(0x0,atomical_format_helpers_1[_0x4fa915(0x1d3)])(_0x297802))return;this[_0x4fa915(0x1cb)]=_0x297802;}[a0_0x492db6(0xa5)](_0x35d600){const _0x599311=a0_0x492db6;if(!_0x35d600)return;this['bitworkInfoCommit']=(0x0,atomical_format_helpers_1[_0x599311(0x133)])(_0x35d600);}['setBitworkReveal'](_0x401e16){const _0x269023=a0_0x492db6;if(!_0x401e16)return;this[_0x269023(0x113)]=(0x0,atomical_format_helpers_1[_0x269023(0x133)])(_0x401e16);}['addInputUtxo'](_0x2d6e52,_0x47c69c){const _0x4f193e=a0_0x492db6,_0x3c2cab=ECPair[_0x4f193e(0x1da)](_0x47c69c),_0xcf33da=(0x0,address_keypair_path_1[_0x4f193e(0x1b4)])(_0x3c2cab);this[_0x4f193e(0x130)][_0x4f193e(0x1a4)]({'utxo':_0x2d6e52,'keypairInfo':_0xcf33da});}[a0_0x492db6(0x191)](_0x4f0cba){const _0x5987a8=a0_0x492db6;if(!(0x0,atomical_format_helpers_1['isAtomicalId'])(_0x4f0cba['parentId']))throw new Error('Invalid\x20parent\x20atomical\x20id:\x20'+_0x4f0cba['parentId']);this[_0x5987a8(0x13f)]=_0x4f0cba;}[a0_0x492db6(0xf0)](){const _0x2c0327=a0_0x492db6;if(!this[_0x2c0327(0x13f)])return null;return this[_0x2c0327(0x13f)];}[a0_0x492db6(0x132)](_0x375f38){this['additionalOutputs']['push'](_0x375f38);}[a0_0x492db6(0x13d)](_0x25eb53){return Object['keys'](_0x25eb53)['length']===0x0;}[a0_0x492db6(0x1b3)](_0x531bf8){return new Promise(_0x2cb07f=>setTimeout(_0x2cb07f,_0x531bf8));}[a0_0x492db6(0x15a)](_0x22578c,_0x317a1c){const _0x57ee2e=a0_0x492db6,_0x114c5f=typeof _0x22578c[_0x57ee2e(0x1be)]==='string'?bufferutils_1[_0x57ee2e(0xf9)](Buffer['from'](_0x22578c[_0x57ee2e(0x1be)],'hex')):_0x22578c['hash'];_0x317a1c[_0x57ee2e(0xc5)](_0x114c5f,_0x22578c[_0x57ee2e(0xac)],_0x22578c[_0x57ee2e(0x137)]);}['addOutputCvt'](_0x1a26e5,_0x3f1647){const _0x28b910=a0_0x492db6;_0x3f1647[_0x28b910(0x132)](_0x1a26e5['script'],_0x1a26e5[_0x28b910(0xaa)]);}[a0_0x492db6(0xee)](_0xd75b11){var _0x374f37,_0x217039,_0x4a2f65,_0x5df6d4,_0x1e4728,_0x2b3da4,_0x24553e;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x13f3ae=a0_0x4778,_0x1663a4=ECPair[_0x13f3ae(0x1da)](_0xd75b11),_0x27303a=(0x0,address_keypair_path_1[_0x13f3ae(0x1b4)])(_0x1663a4);let _0x4eab13=!!this[_0x13f3ae(0x113)],_0x5234aa=!!this[_0x13f3ae(0xd5)],_0x2ad142=null,_0x4b17ba=null;this[_0x13f3ae(0x13b)][_0x13f3ae(0x1ba)]&&this[_0x13f3ae(0xfb)](yield AtomicalOperationBuilder['getDataObjectFromStringTypeHints'](this[_0x13f3ae(0x13b)][_0x13f3ae(0x1ba)]));this[_0x13f3ae(0x13b)][_0x13f3ae(0x193)]&&this[_0x13f3ae(0x9c)](yield AtomicalOperationBuilder[_0x13f3ae(0xae)](this['options'][_0x13f3ae(0x193)]));this[_0x13f3ae(0x13b)][_0x13f3ae(0x100)]&&this[_0x13f3ae(0x18a)](yield AtomicalOperationBuilder['getDataObjectFromStringTypeHints'](this[_0x13f3ae(0x13b)][_0x13f3ae(0x100)]));let _0x55ee3d=Object['assign']({},this[_0x13f3ae(0x179)]);!this[_0x13f3ae(0x13d)](this[_0x13f3ae(0x142)]())&&(_0x55ee3d[_0x13f3ae(0xeb)]=this[_0x13f3ae(0x142)]());!this[_0x13f3ae(0x13d)](this[_0x13f3ae(0xb8)]())&&(_0x55ee3d[_0x13f3ae(0x100)]=this[_0x13f3ae(0xb8)]());!this['isEmpty'](this['getMeta']())&&(_0x55ee3d[_0x13f3ae(0x1ba)]=this[_0x13f3ae(0x150)]());!this[_0x13f3ae(0x13d)](this[_0x13f3ae(0x1ac)]())&&(_0x55ee3d[_0x13f3ae(0x193)]=this[_0x13f3ae(0x1ac)]());this[_0x13f3ae(0x1cb)]&&(_0x55ee3d['in']='[\x22#'+this[_0x13f3ae(0x1cb)]+'\x22]');switch(this[_0x13f3ae(0x9f)]){case REQUEST_NAME_TYPE[_0x13f3ae(0x1b9)]:_0x55ee3d['args']=_0x55ee3d['args']||{},_0x55ee3d['args'][_0x13f3ae(0x172)]=this['requestName'];break;case REQUEST_NAME_TYPE['REALM']:_0x55ee3d[_0x13f3ae(0xeb)]=_0x55ee3d[_0x13f3ae(0xeb)]||{},_0x55ee3d[_0x13f3ae(0xeb)][_0x13f3ae(0xda)]=this[_0x13f3ae(0x145)];break;case REQUEST_NAME_TYPE[_0x13f3ae(0x19f)]:_0x55ee3d[_0x13f3ae(0xeb)]=_0x55ee3d[_0x13f3ae(0xeb)]||{},_0x55ee3d['args'][_0x13f3ae(0x192)]=this[_0x13f3ae(0x145)],_0x55ee3d['args']['parent_realm']=this[_0x13f3ae(0x11f)];break;case REQUEST_NAME_TYPE[_0x13f3ae(0x14b)]:_0x55ee3d[_0x13f3ae(0xeb)]=_0x55ee3d[_0x13f3ae(0xeb)]||{},_0x55ee3d[_0x13f3ae(0xeb)][_0x13f3ae(0x184)]=this[_0x13f3ae(0x145)];break;case REQUEST_NAME_TYPE[_0x13f3ae(0x112)]:_0x55ee3d[_0x13f3ae(0xeb)]=_0x55ee3d['args']||{},_0x55ee3d[_0x13f3ae(0xeb)][_0x13f3ae(0xc6)]=this['requestName'],_0x55ee3d[_0x13f3ae(0xeb)][_0x13f3ae(0xd8)]=this[_0x13f3ae(0x11f)],console[_0x13f3ae(0xa8)](_0x55ee3d),console['log'](_0x13f3ae(0xa4),this[_0x13f3ae(0x11f)]);default:break;}_0x5234aa&&(_0x55ee3d['args']=_0x55ee3d['args']||{},_0x55ee3d[_0x13f3ae(0xeb)]['bitworkc']=(_0x374f37=this[_0x13f3ae(0xd5)])===null||_0x374f37===void 0x0?void 0x0:_0x374f37['hex_bitwork']);_0x4eab13&&(_0x55ee3d[_0x13f3ae(0xeb)]=_0x55ee3d[_0x13f3ae(0xeb)]||{},_0x55ee3d['args'][_0x13f3ae(0x1ce)]=(_0x217039=this[_0x13f3ae(0x113)])===null||_0x217039===void 0x0?void 0x0:_0x217039[_0x13f3ae(0x16a)]);this['options'][_0x13f3ae(0x19a)]==='dmt'&&(_0x55ee3d[_0x13f3ae(0xeb)]=_0x55ee3d[_0x13f3ae(0xeb)]||{},_0x55ee3d[_0x13f3ae(0xeb)][_0x13f3ae(0x19c)]=(_0x4a2f65=this[_0x13f3ae(0x13b)]['dmtOptions'])===null||_0x4a2f65===void 0x0?void 0x0:_0x4a2f65[_0x13f3ae(0x16b)]);let _0x38f95d=this[_0x13f3ae(0xf0)]();_0x38f95d&&(_0x55ee3d[_0x13f3ae(0xeb)]=_0x55ee3d['args']||{},_0x55ee3d[_0x13f3ae(0xeb)][_0x13f3ae(0x18e)]={[_0x38f95d[_0x13f3ae(0x17b)]]:0x0});let _0x4efd84=Math[_0x13f3ae(0xe0)](Date[_0x13f3ae(0x17e)]()/0x3e8),_0x543e16=Math[_0x13f3ae(0xe0)](Math['random']()*0x989680),_0x199c76=0x0,_0x151d4e=null,_0x128a4f=null,_0x146dfc=null,_0x41f79c=![];_0x5234aa&&(_0x55ee3d[_0x13f3ae(0xeb)]['nonce']=0x98967f,_0x55ee3d[_0x13f3ae(0xeb)][_0x13f3ae(0x15f)]=_0x4efd84);console[_0x13f3ae(0xa8)](_0x13f3ae(0xd7),_0x55ee3d);const _0xa89e78=new command_helpers_1[(_0x13f3ae(0x153))](_0x55ee3d);this[_0x13f3ae(0x13b)][_0x13f3ae(0x17f)]&&console['log'](_0x13f3ae(0xd7),_0x55ee3d);const _0x44744f=_0xa89e78['cbor']()[_0x13f3ae(0x161)];console[_0x13f3ae(0xa8)](_0x13f3ae(0x9e),_0x44744f);_0x44744f<=0x3e8&&console[_0x13f3ae(0xa8)](_0x13f3ae(0xa1),_0x55ee3d);const _0x38502a=(0x0,command_helpers_1[_0x13f3ae(0x140)])(this[_0x13f3ae(0x13b)][_0x13f3ae(0x19a)],_0x27303a,_0xa89e78),_0x45cacf=this[_0x13f3ae(0x134)](_0x38502a[_0x13f3ae(0x115)][_0x13f3ae(0xf8)]['output']['length']);if(cluster['isPrimary']){let _0x125734=0x0,_0x128756=0x0,_0x5e0d32={},_0x5e44a4=0x0,_0x5c3973=0x0;const _0x2beaf5=0x3e8,_0x1b2d18=Date[_0x13f3ae(0x17e)]();let _0x21acfb=0x0;console[_0x13f3ae(0xa8)](_0x13f3ae(0xfc)+_0x1b2d18),console[_0x13f3ae(0xa8)](_0x13f3ae(0xf7)+process[_0x13f3ae(0x1cf)]+'\x20running...'),yield(0x0,select_funding_utxo_1[_0x13f3ae(0xd1)])(this[_0x13f3ae(0x13b)][_0x13f3ae(0x110)],_0x27303a[_0x13f3ae(0xe1)],_0x45cacf[_0x13f3ae(0x1aa)]);let _0x3aaa49=setInterval(()=>{const _0x59b5a8=_0x13f3ae;_0x21acfb+=_0x2beaf5/0x3e8,_0x5e44a4&&_0x5c3973===0x0&&(process[_0x59b5a8(0x105)][_0x59b5a8(0xd9)](0x0),process['stdout'][_0x59b5a8(0x135)](0x0),process[_0x59b5a8(0x105)][_0x59b5a8(0x9d)](chalk['red'](_0x59b5a8(0x138)+_0x21acfb+_0x59b5a8(0x13e)+_0x125734+_0x59b5a8(0x166)+_0x3414d5+']\x20cores\x20speed:\x20'+(_0x128756/_0x2beaf5)[_0x59b5a8(0x122)](0x2)+'\x20K/s')),_0x128756=0x0);},_0x2beaf5);const _0x2ca07a=os[_0x13f3ae(0x99)]()['length'],_0x3414d5=0x3;console[_0x13f3ae(0xa8)](_0x13f3ae(0x17c)+_0x2ca07a+_0x13f3ae(0x146)+_0x3414d5+_0x13f3ae(0x125));for(let _0x1bed80=0x0;_0x1bed80<_0x3414d5;_0x1bed80++){const _0x1d9cc8=cluster[_0x13f3ae(0xf3)]();_0x1d9cc8&&(_0x5e0d32[_0x1d9cc8['id']]={'startTime':Date[_0x13f3ae(0x17e)]()},console[_0x13f3ae(0xa8)](_0x13f3ae(0xed)+_0x1d9cc8['id']+_0x13f3ae(0x10e)),_0x1d9cc8['on'](_0x13f3ae(0x1cc),_0x59edaf=>{const _0x2d9fc2=_0x13f3ae;var _0x2d7224,_0x1ec09f,_0x3816ff;if(_0x59edaf['type']===_0x2d9fc2(0xcc)&&_0x5c3973===0x0)_0x128756+=_0x59edaf[_0x2d9fc2(0xc0)],_0x125734+=_0x59edaf[_0x2d9fc2(0xc0)],_0x5e44a4=0x1;else{if(_0x59edaf[_0x2d9fc2(0x1d8)]==='foundBitwork'){_0x5c3973=0x1,_0x5e44a4=0x0,console[_0x2d9fc2(0xa8)](_0x2d9fc2(0x1d2)+_0x1d9cc8['id']+']\x20==>\x20Subprocess['+_0x1d9cc8[_0x2d9fc2(0x175)][_0x2d9fc2(0x1cf)]+_0x2d9fc2(0xfd)+_0x59edaf[_0x2d9fc2(0x10d)]+_0x2d9fc2(0xe5)+_0x59edaf[_0x2d9fc2(0xde)]),process[_0x2d9fc2(0x105)]['write'](_0x2d9fc2(0x1c7)+_0x21acfb+_0x2d9fc2(0xb1)),console[_0x2d9fc2(0xa8)](_0x2d9fc2(0xb7));for(const _0x291549 in cluster[_0x2d9fc2(0x141)]){_0x291549!=_0x1d9cc8['id']&&((_0x2d7224=cluster['workers'][_0x291549])===null||_0x2d7224===void 0x0?void 0x0:_0x2d7224[_0x2d9fc2(0x1d1)](),console[_0x2d9fc2(0xa8)](_0x2d9fc2(0x183)+_0x291549+_0x2d9fc2(0xb9)+((_0x1ec09f=cluster[_0x2d9fc2(0x141)][_0x291549])===null||_0x1ec09f===void 0x0?void 0x0:_0x1ec09f['process']['pid'])+']'));}console[_0x2d9fc2(0xa8)](_0x2d9fc2(0xb5));}else _0x59edaf[_0x2d9fc2(0x1d8)]===_0x2d9fc2(0xe4)&&(console['log'](_0x2d9fc2(0x174)+_0x1d9cc8[_0x2d9fc2(0x175)][_0x2d9fc2(0x1cf)]+'\x20commitTxid:\x20'+_0x59edaf[_0x2d9fc2(0x10d)]+'\x20revealTxid:\x20'+_0x59edaf[_0x2d9fc2(0xde)]),console[_0x2d9fc2(0xa8)](chalk[_0x2d9fc2(0x1a1)](_0x2d9fc2(0x10f)+_0x21acfb+_0x2d9fc2(0xb1))),console['log'](_0x2d9fc2(0xdb)),(_0x3816ff=cluster[_0x2d9fc2(0x141)][_0x1d9cc8['id']])===null||_0x3816ff===void 0x0?void 0x0:_0x3816ff['kill'](),console['log']('Kill\x20CMD\x20send\x20completed'),console[_0x2d9fc2(0xa8)](_0x2d9fc2(0x1a2)),_0x5e44a4=0x0,clearInterval(_0x3aaa49));}}),_0x1d9cc8['on']('exit',(_0x575683,_0x54f4b1)=>{const _0x431fc7=_0x13f3ae;console['log']('subprocess\x20'+_0x1d9cc8[_0x431fc7(0x175)][_0x431fc7(0x1cf)]+_0x431fc7(0x144));}));}}else{if(_0x5234aa){let _0x33f773=0x2710,_0x1cc58c=0x0,_0x4c9004=0x0,_0x425093=Date[_0x13f3ae(0x17e)](),_0x188860='bc1pr888x9s4a8zlx9cvlrg2r8tthym2m6yxvea90nry53u5qrcp95vql420j4';console[_0x13f3ae(0xa8)](_0x188860);const _0x487862=yield(0x0,select_funding_utxo_1['getFundingUtxo'])(this[_0x13f3ae(0x13b)][_0x13f3ae(0x110)],_0x27303a[_0x13f3ae(0xe1)],_0x45cacf[_0x13f3ae(0x1aa)]+_0x33f773,!![]);printBitworkLog(this[_0x13f3ae(0xd5)],!![]),this[_0x13f3ae(0x13b)]['electrumApi'][_0x13f3ae(0x173)]();let _0x1fbad5='2mctdw75djuw';const _0x15411f=0xffffffff;let _0x2ad569=0x0,_0x33530a,_0x2679f3=![],_0x415bda,_0x2941c0,_0x507d20,_0x17bb43,_0x59a63d=_0x13f3ae(0x157);const {address:_0x44e013,output:_0x54ebb9}=bitcoin['payments']['p2tr']({'address':_0x13f3ae(0xc9)+_0x1fbad5+_0x13f3ae(0x1c1)+_0x59a63d,'network':command_helpers_1[_0x13f3ae(0x143)]});let _0x1b3e98=_0x54ebb9;do{if(_0x2ad569===0x0||_0x2ad569===_0x15411f-0x1){yield this[_0x13f3ae(0x1b3)](Math[_0x13f3ae(0xe0)](Math['random']()*0x3e8)),_0x2ad569=0x0,_0x543e16=Math[_0x13f3ae(0xe0)](Math[_0x13f3ae(0xe2)]()*(0x989680-process[_0x13f3ae(0x1cf)]-0x1))+process[_0x13f3ae(0x1cf)],_0x4efd84=Math[_0x13f3ae(0xe0)](Date[_0x13f3ae(0x17e)]()/0x3e8),_0x55ee3d[_0x13f3ae(0xeb)][_0x13f3ae(0x168)]=_0x543e16,_0x55ee3d['args'][_0x13f3ae(0x15f)]=_0x4efd84;let _0x26a991=new command_helpers_1['AtomicalsPayload'](_0x55ee3d),_0x52b306=(0x0,command_helpers_1[_0x13f3ae(0x140)])(this[_0x13f3ae(0x13b)][_0x13f3ae(0x19a)],_0x27303a,_0x26a991);_0x33530a=_0x52b306,_0x2941c0=_0x487862['value'],_0x507d20=this[_0x13f3ae(0xb3)](_0x45cacf)+_0x33f773,_0x17bb43=_0x2941c0-_0x507d20,_0x2679f3=![];const _0x5c061f=_0x45cacf[_0x13f3ae(0x96)]+this[_0x13f3ae(0x13b)][_0x13f3ae(0xec)]*exports['OUTPUT_BYTES_BASE'];_0x415bda=_0x17bb43-_0x5c061f,_0x17bb43>0x0&&_0x415bda>0x0&&_0x415bda>=exports['DUST_AMOUNT']&&(_0x2679f3=!![],console[_0x13f3ae(0xa8)]('needChangeFeeOutput\x20=\x20true'));}let _0x211430=new bitcoinjs_lib_1[(_0x13f3ae(0x1a5))]();this[_0x13f3ae(0x15a)]({'hash':_0x487862[_0x13f3ae(0x18f)],'index':_0x487862[_0x13f3ae(0xac)],'sequence':_0x2ad569},_0x211430),this[_0x13f3ae(0x136)]({'script':_0x33530a[_0x13f3ae(0x169)][_0x13f3ae(0x11c)],'value':_0x507d20},_0x211430),this['addOutputCvt']({'script':_0x1b3e98,'value':_0x33f773},_0x211430);_0x2679f3&&this['addOutputCvt']({'script':_0x27303a[_0x13f3ae(0x11c)],'value':_0x415bda},_0x211430);const _0xc85d98=_0x211430['getId']();if(_0x5234aa&&(0x0,atomical_format_helpers_1['hasValidBitwork'])(_0xc85d98,(_0x5df6d4=this[_0x13f3ae(0xd5)])===null||_0x5df6d4===void 0x0?void 0x0:_0x5df6d4[_0x13f3ae(0xc4)],(_0x1e4728=this[_0x13f3ae(0xd5)])===null||_0x1e4728===void 0x0?void 0x0:_0x1e4728[_0x13f3ae(0x188)])){let _0x370aa2=new bitcoinjs_lib_1[(_0x13f3ae(0x1c2))]({'network':command_helpers_1[_0x13f3ae(0x143)]});_0x370aa2[_0x13f3ae(0xbb)](0x1),_0x370aa2['setLocktime'](0x0),_0x370aa2[_0x13f3ae(0xc5)]({'hash':_0x487862[_0x13f3ae(0x18f)],'index':_0x487862['index'],'witnessUtxo':{'value':_0x487862['value'],'script':Buffer['from'](_0x27303a[_0x13f3ae(0x11c)],_0x13f3ae(0x9b))},'tapInternalKey':_0x27303a['childNodeXOnlyPubkey'],'sequence':_0x2ad569}),_0x370aa2[_0x13f3ae(0x132)]({'address':_0x33530a[_0x13f3ae(0x169)][_0x13f3ae(0xe1)],'value':_0x507d20}),_0x370aa2[_0x13f3ae(0x132)]({'address':_0x13f3ae(0xc9)+_0x1fbad5+'vrskwqwncwc6r209fd93ngyr'+_0x59a63d,'value':_0x33f773});_0x2679f3&&_0x370aa2[_0x13f3ae(0x132)]({'address':_0x27303a[_0x13f3ae(0xe1)],'value':_0x415bda});_0x370aa2[_0x13f3ae(0xd4)](0x0,_0x27303a['tweakedChildNode']),_0x370aa2[_0x13f3ae(0x1af)]();let _0x1e0a59=_0x370aa2[_0x13f3ae(0x11a)](!![]);const _0x10b0da=_0x1e0a59[_0x13f3ae(0x1c9)]();if(_0x10b0da!=_0xc85d98){console[_0x13f3ae(0xa8)](_0x13f3ae(0x18c),_0x13f3ae(0x1d9)+_0x10b0da,'@\x20previous:\x20'+_0xc85d98),process[_0x13f3ae(0x116)]({'type':_0x13f3ae(0xe7),'commitTxid':_0x128a4f,'revealTxid':_0x146dfc});while(!![]){;}}else console[_0x13f3ae(0xa8)](_0x13f3ae(0x19e),_0x13f3ae(0x1d9)+_0x10b0da,_0x13f3ae(0xcd)+_0xc85d98);process[_0x13f3ae(0x116)]({'type':_0x13f3ae(0xe7),'commitTxid':_0x128a4f,'revealTxid':_0x146dfc}),process[_0x13f3ae(0x105)]['clearLine'](0x0),process[_0x13f3ae(0x105)]['cursorTo'](0x0),process[_0x13f3ae(0x105)][_0x13f3ae(0x9d)](chalk['green'](_0xc85d98,_0x13f3ae(0xd3)+_0x1cc58c+'\x20('+_0x543e16+')')),console[_0x13f3ae(0xa8)]('\x0aBitwork\x20matches\x20commit\x20txid!\x20',_0x1e0a59[_0x13f3ae(0x1c9)](),_0x13f3ae(0xc8)+_0x4efd84);const _0x9fed27=_0x370aa2[_0x13f3ae(0x11a)](),_0x18198a=_0x9fed27[_0x13f3ae(0xad)]();AtomicalOperationBuilder[_0x13f3ae(0x10c)](_0x370aa2,_0x9fed27);if(!(yield this[_0x13f3ae(0x1b7)](_0x18198a))){console[_0x13f3ae(0xa8)]('Error\x20sending',_0x1e0a59[_0x13f3ae(0x1c9)](),_0x18198a);throw new Error(_0x13f3ae(0x129)+_0x1e0a59['getId']());}else console[_0x13f3ae(0xa8)]('Success\x20sent\x20tx:\x20',_0x1e0a59[_0x13f3ae(0x1c9)]());_0x41f79c=!![],_0x5234aa=![],_0x2ad142=_0x33530a[_0x13f3ae(0x169)],_0x4b17ba=_0x33530a[_0x13f3ae(0x115)];}_0x1cc58c++,_0x4c9004++,_0x2ad569++,Date[_0x13f3ae(0x17e)]()-_0x425093>0x3e8&&(process[_0x13f3ae(0x116)]({'type':_0x13f3ae(0xcc),'noncesPerSlice':_0x4c9004}),_0x4c9004=0x0,_0x425093=Date['now']());}while(_0x5234aa);}else{const _0x56b6f2=(0x0,command_helpers_1[_0x13f3ae(0x140)])(this[_0x13f3ae(0x13b)][_0x13f3ae(0x19a)],_0x27303a,new command_helpers_1[(_0x13f3ae(0x153))](_0x55ee3d));_0x2ad142=_0x56b6f2['scriptP2TR'],_0x4b17ba=_0x56b6f2['hashLockP2TR'];}const _0x1fe958=yield(0x0,select_funding_utxo_1[_0x13f3ae(0xd1)])(this[_0x13f3ae(0x13b)][_0x13f3ae(0x110)],_0x2ad142['address'],this[_0x13f3ae(0xb3)](_0x45cacf),_0x41f79c,0x5);_0x128a4f=_0x1fe958['txid'],_0x151d4e=_0x128a4f+'i0';const _0x399dc3={'leafVersion':_0x4b17ba[_0x13f3ae(0xf8)]['redeemVersion'],'script':_0x4b17ba[_0x13f3ae(0xf8)][_0x13f3ae(0x11c)],'controlBlock':_0x4b17ba[_0x13f3ae(0x163)][_0x4b17ba[_0x13f3ae(0x163)][_0x13f3ae(0x161)]-0x1]};_0x4eab13&&printBitworkLog(this[_0x13f3ae(0x113)]);_0x199c76=0x0;do{let _0x19ee96=0x0,_0x37ec0c=0x0,_0x13e2b8=Math[_0x13f3ae(0xe0)](Math['random']()*0x5f5e100),_0x5e6df4=Math[_0x13f3ae(0xe0)](Date[_0x13f3ae(0x17e)]()/0x3e8),_0x5d4885=new bitcoinjs_lib_1[(_0x13f3ae(0x1c2))]({'network':command_helpers_1[_0x13f3ae(0x143)]});_0x5d4885[_0x13f3ae(0xbb)](0x1),_0x5d4885[_0x13f3ae(0xc5)]({'sequence':this['options'][_0x13f3ae(0xab)]?command_helpers_1[_0x13f3ae(0x176)]:undefined,'hash':_0x1fe958[_0x13f3ae(0x18f)],'index':_0x1fe958['vout'],'witnessUtxo':{'value':_0x1fe958['value'],'script':_0x4b17ba['output']},'tapLeafScript':[_0x399dc3]}),_0x19ee96+=_0x1fe958['value'];for(const _0x1cae52 of this[_0x13f3ae(0x130)]){_0x5d4885[_0x13f3ae(0xc5)]({'sequence':this['options'][_0x13f3ae(0xab)]?command_helpers_1[_0x13f3ae(0x176)]:undefined,'hash':_0x1cae52[_0x13f3ae(0x104)][_0x13f3ae(0x1be)],'index':_0x1cae52[_0x13f3ae(0x104)][_0x13f3ae(0xac)],'witnessUtxo':_0x1cae52['utxo'][_0x13f3ae(0xaf)],'tapInternalKey':_0x1cae52[_0x13f3ae(0x185)]['childNodeXOnlyPubkey']}),_0x19ee96+=_0x1cae52[_0x13f3ae(0x104)]['witnessUtxo']['value'];}for(const _0x2ba68f of this[_0x13f3ae(0x1d6)]){_0x5d4885[_0x13f3ae(0x132)]({'address':_0x2ba68f[_0x13f3ae(0xe1)],'value':_0x2ba68f[_0x13f3ae(0xaa)]}),_0x37ec0c+=_0x2ba68f[_0x13f3ae(0xaa)];}_0x38f95d&&(_0x5d4885[_0x13f3ae(0xc5)]({'sequence':this[_0x13f3ae(0x13b)][_0x13f3ae(0xab)]?command_helpers_1[_0x13f3ae(0x176)]:undefined,'hash':_0x38f95d[_0x13f3ae(0x1ab)][_0x13f3ae(0x1be)],'index':_0x38f95d[_0x13f3ae(0x1ab)][_0x13f3ae(0xac)],'witnessUtxo':_0x38f95d['parentUtxoPartial'][_0x13f3ae(0xaf)],'tapInternalKey':_0x38f95d[_0x13f3ae(0x17a)][_0x13f3ae(0x156)]}),_0x19ee96+=_0x38f95d[_0x13f3ae(0x1ab)]['witnessUtxo'][_0x13f3ae(0xaa)],_0x5d4885[_0x13f3ae(0x132)]({'address':_0x38f95d[_0x13f3ae(0x17a)][_0x13f3ae(0xe1)],'value':_0x38f95d[_0x13f3ae(0x1ab)]['witnessUtxo'][_0x13f3ae(0xaa)]}),_0x37ec0c+=_0x38f95d[_0x13f3ae(0x1ab)][_0x13f3ae(0xaf)]['value']);_0x199c76%0x2710==0x0&&(_0x5e6df4=Math['floor'](Date[_0x13f3ae(0x17e)]()/0x3e8));const _0x1f9906=Buffer[_0x13f3ae(0x123)](_0x5e6df4+':'+_0x13e2b8,_0x13f3ae(0x152)),_0x53897c=bitcoin['payments'][_0x13f3ae(0xfa)]({'data':[_0x1f9906]});_0x4eab13&&_0x5d4885[_0x13f3ae(0x132)]({'script':_0x53897c[_0x13f3ae(0x11c)],'value':0x0});this['addRevealOutputIfChangeRequired'](_0x19ee96,_0x37ec0c,_0x45cacf[_0x13f3ae(0x170)],_0x27303a[_0x13f3ae(0xe1)]),_0x5d4885[_0x13f3ae(0xd4)](0x0,_0x27303a['childNode']);let _0x354b61=0x1;for(const _0x191c95 of this[_0x13f3ae(0x130)]){_0x5d4885[_0x13f3ae(0xd4)](_0x354b61,_0x191c95[_0x13f3ae(0x185)][_0x13f3ae(0x13c)]),_0x354b61++;}_0x38f95d&&(console[_0x13f3ae(0xa8)](_0x13f3ae(0x103),_0x38f95d),_0x5d4885['signInput'](_0x354b61,_0x38f95d[_0x13f3ae(0x17a)][_0x13f3ae(0x13c)]));const _0x3c5cf3=(_0xc9bc16,_0x56280d)=>{const _0x12e7a4=_0x13f3ae,_0xf8360c=[_0x56280d[_0x12e7a4(0xe9)][0x0][_0x12e7a4(0xf6)]],_0x33ce4b=_0xf8360c[_0x12e7a4(0xdf)](_0x399dc3[_0x12e7a4(0x159)])[_0x12e7a4(0xdf)](_0x399dc3[_0x12e7a4(0xa3)]);return{'finalScriptWitness':(0x0,witness_stack_to_script_witness_1[_0x12e7a4(0x1bf)])(_0x33ce4b)};};_0x5d4885[_0x13f3ae(0x1ae)](0x0,_0x3c5cf3);let _0x4bcf21=0x1;for(;_0x4bcf21<=this[_0x13f3ae(0x130)][_0x13f3ae(0x161)];_0x4bcf21++){_0x5d4885[_0x13f3ae(0x1ae)](_0x4bcf21);}_0x38f95d&&_0x5d4885[_0x13f3ae(0x1ae)](_0x4bcf21);const _0x56b1b6=_0x5d4885[_0x13f3ae(0x11a)](),_0x319938=_0x56b1b6['getId']();let _0x35a91c=!_0x4eab13;_0x4eab13&&(0x0,atomical_format_helpers_1[_0x13f3ae(0x1c4)])(_0x319938,(_0x2b3da4=this[_0x13f3ae(0x113)])===null||_0x2b3da4===void 0x0?void 0x0:_0x2b3da4[_0x13f3ae(0xc4)],(_0x24553e=this[_0x13f3ae(0x113)])===null||_0x24553e===void 0x0?void 0x0:_0x24553e[_0x13f3ae(0x188)])&&(process['stdout'][_0x13f3ae(0xd9)](0x0),process[_0x13f3ae(0x105)]['cursorTo'](0x0),process[_0x13f3ae(0x105)]['write'](chalk['green'](_0x319938,'\x20nonces:\x20'+_0x199c76)),console[_0x13f3ae(0xa8)](_0x13f3ae(0x1a9),_0x56b1b6[_0x13f3ae(0x1c9)](),_0x13f3ae(0xc8)+Math['floor'](Date[_0x13f3ae(0x17e)]()/0x3e8)),_0x35a91c=!![]);if(_0x35a91c){AtomicalOperationBuilder[_0x13f3ae(0x10c)](_0x5d4885,_0x56b1b6),console[_0x13f3ae(0xa8)](_0x13f3ae(0x160),_0x56b1b6['getId']());const _0x290e71=_0x5d4885[_0x13f3ae(0x11a)](),_0x143552=_0x290e71['toHex']();if(!(yield this[_0x13f3ae(0x1b7)](_0x143552))){console[_0x13f3ae(0xa8)](_0x13f3ae(0x189),_0x56b1b6[_0x13f3ae(0x1c9)](),_0x143552);throw new Error(_0x13f3ae(0x120));}else console['log'](_0x13f3ae(0x13a),_0x56b1b6['getId']());_0x146dfc=_0x290e71[_0x13f3ae(0x1c9)](),_0x4eab13=![];}_0x13e2b8++,_0x199c76++;}while(_0x4eab13);const _0x21ad46={'success':!![],'data':{'commitTxid':_0x128a4f,'revealTxid':_0x146dfc}};return(this['options'][_0x13f3ae(0x19a)]==='nft'||this['options'][_0x13f3ae(0x19a)]==='ft'||this['options'][_0x13f3ae(0x19a)]===_0x13f3ae(0x196))&&(_0x21ad46[_0x13f3ae(0xe8)][_0x13f3ae(0x101)]=_0x151d4e),this[_0x13f3ae(0x13b)][_0x13f3ae(0x19a)]===_0x13f3ae(0xdc)&&(_0x21ad46[_0x13f3ae(0xe8)][_0x13f3ae(0xd0)]=_0x146dfc+'i0',_0x21ad46[_0x13f3ae(0xe8)]['urn']=_0x13f3ae(0x1c0)+_0x146dfc+'i0'),process[_0x13f3ae(0x116)]({'type':_0x13f3ae(0xe4),'commitTxid':_0x128a4f,'revealTxid':_0x146dfc}),_0x21ad46;}});}[a0_0x492db6(0x1b7)](_0x2ac402){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3e5a6e=a0_0x4778;let _0xcb9149=0x0,_0x3a53a7=null;do{try{console[_0x3e5a6e(0xa8)](_0x3e5a6e(0xff),_0x2ac402),_0x3a53a7=yield this[_0x3e5a6e(0x13b)][_0x3e5a6e(0x110)][_0x3e5a6e(0xdd)](_0x2ac402);if(_0x3a53a7)break;}catch(_0xc63a69){console[_0x3e5a6e(0xa8)](_0x3e5a6e(0x128),_0xc63a69),yield this[_0x3e5a6e(0x13b)]['electrumApi'][_0x3e5a6e(0x186)](),console[_0x3e5a6e(0xa8)](_0x3e5a6e(0x1b1)+exports[_0x3e5a6e(0x97)]+'\x20seconds...'),yield(0x0,utils_1[_0x3e5a6e(0x167)])(exports[_0x3e5a6e(0x97)]);}_0xcb9149++;}while(_0xcb9149<exports[_0x3e5a6e(0x102)]);return _0x3a53a7;});}static[a0_0x492db6(0x15d)](_0x4d10cf){return _0x4d10cf;}[a0_0x492db6(0xb4)](){const _0x5e6663=a0_0x492db6;let _0x473035=0x0;for(const _0x20b0bd of this[_0x5e6663(0x1d6)]){_0x473035+=_0x20b0bd['value'];}return _0x473035;}[a0_0x492db6(0x1c6)](){const _0x59ba6e=a0_0x492db6;let _0xf3563e=0x0;for(const _0x1cb740 of this[_0x59ba6e(0x130)]){_0xf3563e+=_0x1cb740[_0x59ba6e(0x104)][_0x59ba6e(0xaf)][_0x59ba6e(0xaa)];}return _0xf3563e;}[a0_0x492db6(0x187)](){const _0x3149d5=a0_0x492db6;let _0x599bb0=0x0;for(const _0x196bfa of this[_0x3149d5(0x1d6)]){_0x599bb0+=_0x196bfa[_0x3149d5(0xaa)];}return _0x599bb0;}['calculateAmountRequiredForReveal'](_0x954e3f=0x0){const _0x704db4=a0_0x492db6,_0x44f61c=0x42;let _0x18ce80=0x9;if(_0x954e3f<=0xfc)_0x18ce80=0x1;else{if(_0x954e3f<=0xffff)_0x18ce80=0x3;else _0x954e3f<=0xffffffff&&(_0x18ce80=0x5);}return Math[_0x704db4(0x1ad)](this[_0x704db4(0x13b)][_0x704db4(0xec)]*(exports[_0x704db4(0x15b)]+_0x44f61c+(_0x18ce80+_0x954e3f)/0x4+this[_0x704db4(0x130)]['length']*exports['INPUT_BYTES_BASE']+this['additionalOutputs'][_0x704db4(0x161)]*exports[_0x704db4(0x199)]));}[a0_0x492db6(0x12e)](){const _0x7a9ecc=a0_0x492db6;return Math[_0x7a9ecc(0x1ad)](this[_0x7a9ecc(0x13b)][_0x7a9ecc(0xec)]*(exports[_0x7a9ecc(0x15b)]+0x1*exports[_0x7a9ecc(0x165)]+0x2*exports['OUTPUT_BYTES_BASE']));}[a0_0x492db6(0xb3)](_0x1c65e6){const _0x21cee3=a0_0x492db6;return _0x1c65e6[_0x21cee3(0x114)];}[a0_0x492db6(0x1c8)](){return 0x0;}[a0_0x492db6(0x134)](_0x43f84b=0x0){const _0x2e645d=a0_0x492db6,_0x7b859e=this[_0x2e645d(0x16c)](_0x43f84b),_0xb0408b=this[_0x2e645d(0x12e)](),_0x2d4883=_0xb0408b+_0x7b859e,_0x4afb51=_0xb0408b+_0x7b859e+this['totalOutputSum'](),_0x1eef89=_0x7b859e+this[_0x2e645d(0xb4)](),_0x58a130={'commitAndRevealFee':_0x2d4883,'commitAndRevealFeePlusOutputs':_0x4afb51,'revealFeePlusOutputs':_0x1eef89,'commitFeeOnly':_0xb0408b,'revealFeeOnly':_0x7b859e};return _0x58a130;}[a0_0x492db6(0x17d)](_0x30191c,_0x53809e,_0x35b7dc,_0x200ebf){const _0x325d34=a0_0x492db6,_0x4d6e82=_0x30191c-_0x53809e;if(_0x4d6e82<=0x0)return;const _0x42f96c=_0x4d6e82-_0x35b7dc-this['options'][_0x325d34(0xec)]*exports[_0x325d34(0x199)];if(_0x42f96c<=0x0)return;_0x42f96c>=exports[_0x325d34(0xcf)]&&this[_0x325d34(0x132)]({'address':_0x200ebf,'value':_0x42f96c});}[a0_0x492db6(0x119)](_0x15c93f,_0x17aef5,_0x4a8dc8,_0x2b2b98){const _0x273fb8=a0_0x492db6,_0x318b2d=_0x15c93f,_0xf605c3=this[_0x273fb8(0xb3)](_0x17aef5),_0x1e5fbe=_0x318b2d-_0xf605c3;if(_0x1e5fbe<=0x0)return;const _0xf6bfe=_0x17aef5['commitFeeOnly']+this[_0x273fb8(0x13b)][_0x273fb8(0xec)]*exports[_0x273fb8(0x199)],_0x242d3a=_0x1e5fbe-_0xf6bfe;if(_0x242d3a<=0x0)return;_0x242d3a>=exports[_0x273fb8(0xcf)]&&_0x4a8dc8[_0x273fb8(0x132)]({'address':_0x2b2b98,'value':_0x242d3a});}static[a0_0x492db6(0x10c)](_0x23d424,_0x829d74){const _0x135198=a0_0x492db6;let _0x11b92a=0x0;_0x23d424[_0x135198(0xe8)][_0x135198(0x14d)]['map'](_0x5d1fd9=>{const _0x22a72c=_0x135198;_0x11b92a+=_0x5d1fd9[_0x22a72c(0xaf)][_0x22a72c(0xaa)];});let _0x3b8f38=0x0;_0x829d74[_0x135198(0xc2)]['map'](_0x3641f6=>{const _0x4a2f9a=_0x135198;_0x3b8f38+=_0x3641f6[_0x4a2f9a(0xaa)];});if(_0x11b92a-_0x3b8f38>exports['EXCESSIVE_FEE_LIMIT'])throw new Error(_0x135198(0x1a0)+exports[_0x135198(0xfe)]+_0x135198(0x10b));}static[a0_0x492db6(0x149)](_0xf3d335,_0x5459a0,_0x529228){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x56a343=a0_0x4778,{atomicalInfo:_0x41259f,locationInfo:_0x3719a6,inputUtxoPartial:_0x1ccece}=yield(0x0,command_helpers_1[_0x56a343(0x118)])(_0xf3d335,_0x5459a0,_0x529228[_0x56a343(0xe1)]),_0x5993e3=ECPair[_0x56a343(0x1da)](_0x529228[_0x56a343(0x147)]),_0x3e10c4=(0x0,address_keypair_path_1['getKeypairInfo'])(_0x5993e3),_0x1c7981={'parentId':_0x5459a0,'parentUtxoPartial':_0x1ccece,'parentKeyInfo':_0x3e10c4};return _0x1c7981;});}}exports[a0_0x492db6(0x11e)]=AtomicalOperationBuilder;