const a0_0x1f2745=a0_0x3ef7;(function(_0x658401,_0x50c20b){const _0x249bde=a0_0x3ef7,_0x3e8962=_0x658401();while(!![]){try{const _0x69f703=-parseInt(_0x249bde(0x170))/0x1*(-parseInt(_0x249bde(0x168))/0x2)+parseInt(_0x249bde(0x25d))/0x3*(-parseInt(_0x249bde(0x1ea))/0x4)+parseInt(_0x249bde(0x171))/0x5+-parseInt(_0x249bde(0x17a))/0x6+parseInt(_0x249bde(0x1f9))/0x7+-parseInt(_0x249bde(0x1be))/0x8*(parseInt(_0x249bde(0x1f5))/0x9)+parseInt(_0x249bde(0x15b))/0xa;if(_0x69f703===_0x50c20b)break;else _0x3e8962['push'](_0x3e8962['shift']());}catch(_0x99a8ea){_0x3e8962['push'](_0x3e8962['shift']());}}}(a0_0x31b5,0x80757));const a0_0x59cf06=(function(){let _0x30029f=!![];return function(_0x285c03,_0xd1aee4){const _0x4eaed2=_0x30029f?function(){const _0x573388=a0_0x3ef7;if(_0xd1aee4){const _0x6197ea=_0xd1aee4[_0x573388(0x143)](_0x285c03,arguments);return _0xd1aee4=null,_0x6197ea;}}:function(){};return _0x30029f=![],_0x4eaed2;};}()),a0_0x567e20=a0_0x59cf06(this,function(){const _0x1f8f8c=a0_0x3ef7;return a0_0x567e20[_0x1f8f8c(0x1bb)]()[_0x1f8f8c(0x132)]('(((.+)+)+)+$')[_0x1f8f8c(0x1bb)]()[_0x1f8f8c(0x255)](a0_0x567e20)[_0x1f8f8c(0x132)](_0x1f8f8c(0x23f));});a0_0x567e20();'use strict';var __awaiter=this&&this[a0_0x1f2745(0x1d1)]||function(_0x268519,_0x131a4f,_0x4530cf,_0x121976){function _0x2bca11(_0x86f608){return _0x86f608 instanceof _0x4530cf?_0x86f608:new _0x4530cf(function(_0x5cd01c){_0x5cd01c(_0x86f608);});}return new(_0x4530cf||(_0x4530cf=Promise))(function(_0x30a99a,_0x393298){const _0xb321fe=a0_0x3ef7;function _0x16a24d(_0x12a452){try{_0x4c5660(_0x121976['next'](_0x12a452));}catch(_0x149229){_0x393298(_0x149229);}}function _0x34e57d(_0x381770){try{_0x4c5660(_0x121976['throw'](_0x381770));}catch(_0x382f01){_0x393298(_0x382f01);}}function _0x4c5660(_0xdaeb9d){const _0x4a6cc9=a0_0x3ef7;_0xdaeb9d[_0x4a6cc9(0x17f)]?_0x30a99a(_0xdaeb9d[_0x4a6cc9(0x226)]):_0x2bca11(_0xdaeb9d[_0x4a6cc9(0x226)])[_0x4a6cc9(0x174)](_0x16a24d,_0x34e57d);}_0x4c5660((_0x121976=_0x121976[_0xb321fe(0x143)](_0x268519,_0x131a4f||[]))[_0xb321fe(0x24b)]());});};function a0_0x31b5(){const _0x70d7f8=['Program\x20Exit...','parentAtomicalInfo','rule','Cannot\x20request\x20subrealm\x20for\x20a\x20top\x20level\x20realm','\x20subprocess.','revealFeePlusOutputs','setVersion','Options\x20required','toHex','NONE','next','broadcastWithRetries','RealmClaimType\x20must\x20be\x20DIRECT\x20or\x20RULE','DEFAULT_SATS_ATOMICAL_UTXO','keys','./address-keypair-path','updateNonceCount','totalOutputSum','job\x20start\x20time\x20','MAX_SEQUENCE','constructor','now','Error\x20sending','dmt','bitworkInfoReveal','../commands/witness_stack_to_script_witness','workers','Success\x20sent\x20tx:\x20','350331KSnEfb','bitworkc\x20(input):\x20','\x20|\x20All\x20[','-\x20prefix\x20length\x205:\x20several\x20minutes.\x20~1,048,576\x20hashes\x20on\x20average.','Data\x20must\x20be\x20an\x20object','Invalid\x20parent\x20atomical\x20id:\x20','getInit','commitFeeOnly','chalk',',\x20time:\x20','nft','setRequestItem\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','txid','resetConnection','ticker','bitworkr','SUBREALM','Invalid\x20parent\x20container\x20atomical\x20id\x20for\x20item','process','search','2mctdw75djuw','fork','log','request_realm','satsbyte','keypairInfo','Now\x20kill\x20this\x20worker\x20processes...','getFundingUtxo',',\x20will\x20create\x20','getKeypairInfo','extractTransaction','NETWORK','\x20revealTxid:\x20','commitAndRevealFeePlusOutputs','getId','\x20this.requestParentId;','apply','host\x20CPU\x20number\x20is:\x20','redeem','setMeta','write','dataId','witness','nonce','bc1p','index','Data\x20cannot\x20have\x20field\x20named\x20\x27ctx\x27\x20set\x20manually.\x20Use\x20options\x20config.','cbor','split','prepareFilesDataAsObject','Empty\x20container\x20name','script','isValidRealmName','toFixed','setRequestRealm','SEND_RETRY_SLEEP_SECONDS','finalSafetyCheckForExcessiveFee','Now\x20kill\x20other\x20worker\x20processes...','parentInputAtomical','cursorTo','14269250BFXjmH','inputUtxos','p2tr','nftOptions','INPUT_BYTES_BASE','\x20running...','getTotalAdditionalInputValues','getMeta','setData','parentUtxoPartial','red','Kill\x20CMD\x20send\x20completed','random','6mBHBfN','setRequestTicker\x20can\x20only\x20be\x20set\x20for\x20dft\x20or\x20ft\x20types','getAdditionalFundingRequiredForReveal','Unable\x20to\x20broadcast\x20commit\x20transaction\x20after\x20attempts:\x20','reverseBuffer','AtomicalsPayload','Generated\x20nonces:\x20','electrumApi','36502ATPTcS','37410swdldO','requestNameType','getTotalAdditionalOutputValues','then','dat','setRequestSubrealm\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','addOutput','\x0aAvailable\x20Bitwork\x20found\x20via\x20Worker[','\x0aDOUBLE\x20CHECK:\x20MATCH!!!','4841802PKzgml','hasValidBitwork','DUST_AMOUNT','s\x20|\x20Total\x20calculation:\x20','calculateFeesRequiredForCommit','done','request_subrealm','mint_ticker','indexOf','bitworkc','\x0aStarting\x20mining\x20now...\x0a','-\x20prefix\x20length\x20>=\x207:\x20a\x20few\x20hours\x20or\x20much\x20longer.\x20>268,435,456\x20hashes\x20on\x20average.','broadcast','\x0aAtomicals\x20Bitwork\x20Mining\x20-\x20Requested\x20bitwork\x20proof-of-work\x20mining\x20for\x20the\x20','setRBF','revealFeeOnly','redeemVersion','concat','-\x20prefix\x20length\x20<=\x204:\x20about\x20a\x20minute\x20or\x20two.\x20~65,536\x20hashes\x20on\x20average.','CONTAINER','setRequestContainer\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','witnessUtxo','calculateAmountRequiredForReveal','nfjaatnqzq775f2sysuvj5','getDataObjectFromStringTypeHints','electrumApi\x20required','SEND_RETRY_ATTEMPTS','userDefinedData','addInputCvt','direct','isValidTickerName','args','hex_bitwork','\x20seconds...','Network\x20error\x20broadcasting\x20(Trying\x20again\x20soon...)','hex','atomicalId','getCtx','Total\x20Spent\x20Time:\x20','setInputParent','\x20nonces:\x20','hash','addCommitChangeOutputIfRequired','address','\x0aBitwork\x20matches\x20reveal\x20txid!\x20','setLocktime','dft','prepareCommitRevealConfig','bitworkInfoCommit','Data\x20cannot\x20have\x20field\x20named\x20\x27meta\x27\x20set\x20manually.\x20Use\x20options\x20config.','Data\x20cannot\x20have\x20field\x20named\x20\x27init\x27\x20set\x20manually.\x20Use\x20options\x20config.','\x0aBroadcasting\x20tx...','Spent\x20Time:\x20','copiedData','REALM','revealTxid','REALM_CLAIM_TYPE','isEmpty','ceil','toXOnly','setContainerMembership','main\x20process\x20','AtomicalOperationBuilder','vrskwqwncwc6r209fd93ngyr','requestName','toString','setRequestContainer','assign','16PXXUIH','message','setRequestSubrealm','RBF_INPUT_SEQUENCE','signature','Invalid\x20parent\x20realm\x20atomical\x20id\x20for\x20subrealm','isPrimary','fromWIF','isAtomicalId','addRevealOutputIfChangeRequired','meta','OUTPUT_BYTES_BASE','bitworkr\x20(decoded):\x20','options','./select-funding-utxo','inputs','requestParentId','Elapse:\x20','\x20satoshis.\x20Aborting\x20due\x20to\x20protect\x20funds.\x20Contact\x20developer','__awaiter','cpus','childNodeXOnlyPubkey','node:process','signInput','request_ticker','\x20K/s','setArgs','Time\x20to\x20mine\x20estimates:\x20','bitworkr\x20(input):\x20','green','sequence','needChangeFeeOutput\x20=\x20true','setRequestItem','DEFAULT_SATS_BYTE','setCtx','foundBitwork','exit','./utils','type','parent_realm','object','noncesPerSlice','Excessive\x20fee\x20detected.\x20Hardcoded\x20to\x20','time','20VMZjkD','ctx','input_bitwork','stdout','WIF','../../node_modules/bitcoinjs-lib/src/bufferutils','map','from','scriptP2TR','utxo','length','1515438FAFixb','addInput','opType','RULE','4969090eXJobL','Psbt','ecpair','DIRECT','clearLine','\x20commitTxid:\x20','setBitworkCommit',']\x20==>\x20Subprocess[','getInputParent','commitTxid','Will\x20retry\x20to\x20broadcast\x20transaction\x20again\x20in\x20','data','substring','cluster','request_container','ITEM','\x0aDOUBLE\x20CHECK:\x20ERROR:\x20This\x20txid\x20can\x20Not\x20match\x20previous!!!,please\x20exit\x20by\x20self!!','parentId','\x20transaction.','request_dmitem','REQUEST_NAME_TYPE','pid','getOutputValueForCommit','__esModule','addOutputCvt','hashLockP2TR','setRequestRealm\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','calculateFeesRequiredForAccumulatedCommitAndReveal','output','Payload\x20CBOR\x20Size\x20(bytes):\x20',']\x20cores\x20speed:\x20','\x0aBitwork\x20matches\x20commit\x20txid!\x20','EXCESSIVE_FEE_LIMIT','Payload\x20Encoded:\x20','@\x20time:\x20','floor','kill','push','rawtx','init','initEccLib','witnessStackToScriptWitness','\x20exit','additionalOutputs','tiny-secp256k1','value','parents','BASE_BYTES','finalizeInput','setInit','\x20s.','rbf','resolveInputParent','TICKER','addInputUtxo',']\x20commitTxid:\x20','tweakedChildNode','nftOptions\x20required\x20for\x20nft\x20type','parentKeyInfo','payments','prefix','startsWith','commit','ext','send','./atomical-format-helpers','getArgs','containerMembership','reveal','[\x22#','(((.+)+)+)+$','parent_container'];a0_0x31b5=function(){return _0x70d7f8;};return a0_0x31b5();}Object['defineProperty'](exports,a0_0x1f2745(0x210),{'value':!![]}),exports['AtomicalOperationBuilder']=exports[a0_0x1f2745(0x20d)]=exports[a0_0x1f2745(0x1b2)]=exports[a0_0x1f2745(0x219)]=exports[a0_0x1f2745(0x254)]=exports[a0_0x1f2745(0x1c9)]=exports[a0_0x1f2745(0x15f)]=exports[a0_0x1f2745(0x228)]=exports[a0_0x1f2745(0x17c)]=exports[a0_0x1f2745(0x194)]=exports[a0_0x1f2745(0x156)]=exports[a0_0x1f2745(0x24e)]=exports[a0_0x1f2745(0x1df)]=void 0x0;const address_keypair_path_1=require(a0_0x1f2745(0x250)),atomical_format_helpers_1=require(a0_0x1f2745(0x23a)),ecc=require(a0_0x1f2745(0x225)),ecpair_1=require(a0_0x1f2745(0x1fb)),tinysecp=require('tiny-secp256k1'),bitcoin=require('bitcoinjs-lib'),process=require(a0_0x1f2745(0x1d4)),chalk=require(a0_0x1f2745(0x265)),bufferutils_1=require(a0_0x1f2745(0x1ef));bitcoin[a0_0x1f2745(0x221)](ecc);function a0_0x3ef7(_0x9153eb,_0x86db18){const _0x2f9777=a0_0x31b5();return a0_0x3ef7=function(_0x567e20,_0x59cf06){_0x567e20=_0x567e20-0x130;let _0x31b510=_0x2f9777[_0x567e20];return _0x31b510;},a0_0x3ef7(_0x9153eb,_0x86db18);}const bitcoinjs_lib_1=require('bitcoinjs-lib');(0x0,bitcoinjs_lib_1['initEccLib'])(tinysecp);const command_helpers_1=require('../commands/command-helpers'),select_funding_utxo_1=require(a0_0x1f2745(0x1cc)),utils_1=require(a0_0x1f2745(0x1e3)),witness_stack_to_script_witness_1=require(a0_0x1f2745(0x25a)),ECPair=(0x0,ecpair_1['ECPairFactory'])(tinysecp);exports['DEFAULT_SATS_BYTE']=0xa,exports[a0_0x1f2745(0x24e)]=0x3e8,exports[a0_0x1f2745(0x156)]=0xf,exports[a0_0x1f2745(0x194)]=0x14,exports['DUST_AMOUNT']=0x222,exports['BASE_BYTES']=10.5,exports[a0_0x1f2745(0x15f)]=57.5,exports['OUTPUT_BYTES_BASE']=0x2b,exports[a0_0x1f2745(0x254)]=0xffffffff,exports[a0_0x1f2745(0x219)]=0x7a120;const os=require('os'),cluster=require(a0_0x1f2745(0x206));var REALM_CLAIM_TYPE;(function(_0x48f4e5){const _0x53cf58=a0_0x1f2745;_0x48f4e5[_0x53cf58(0x1fc)]=_0x53cf58(0x197),_0x48f4e5[_0x53cf58(0x1f8)]=_0x53cf58(0x243);}(REALM_CLAIM_TYPE=exports['REALM_CLAIM_TYPE']||(exports['REALM_CLAIM_TYPE']={})));function logMiningProgressToConsole(_0x597060,_0x94c039,_0x8f0cfc,_0x765c81){const _0x356d19=a0_0x1f2745;if(!_0x597060)return;if(_0x94c039){_0x765c81%0x2710===0x0&&console[_0x356d19(0x135)](_0x356d19(0x16e),_0x765c81,_0x356d19(0x266),Math['floor'](Date[_0x356d19(0x256)]()/0x3e8));return;}process['stdout']['clearLine'](0x0),process['stdout'][_0x356d19(0x15a)](0x0),process[_0x356d19(0x1ed)][_0x356d19(0x147)](chalk[_0x356d19(0x165)](_0x8f0cfc,_0x356d19(0x1a2),_0x765c81));}function printBitworkLog(_0x3b5e5a,_0x1f672e){const _0x993ea7=a0_0x1f2745;if(!_0x3b5e5a)return;console['log'](_0x993ea7(0x187)+(_0x1f672e?_0x993ea7(0x237):_0x993ea7(0x23d))+_0x993ea7(0x20b)),_0x1f672e?(console['log'](_0x993ea7(0x25e)+_0x3b5e5a['input_bitwork']),console[_0x993ea7(0x135)]('bitworkc\x20(decoded):\x20'+_0x3b5e5a[_0x993ea7(0x19a)])):(console[_0x993ea7(0x135)](_0x993ea7(0x1da)+_0x3b5e5a[_0x993ea7(0x1ec)]),console[_0x993ea7(0x135)](_0x993ea7(0x1ca)+_0x3b5e5a['hex_bitwork'])),console[_0x993ea7(0x135)]('---------\x0aWARNING:\x20This\x20might\x20take\x20a\x20very\x20long\x20time\x20depending\x20on\x20the\x20speed\x20of\x20the\x20CPU.'),console[_0x993ea7(0x135)](_0x993ea7(0x1d9)),console[_0x993ea7(0x135)](_0x993ea7(0x18c)),console[_0x993ea7(0x135)](_0x993ea7(0x260)),console[_0x993ea7(0x135)]('-\x20prefix\x20length\x206:\x20up\x20to\x20an\x20hour\x20or\x20more.\x20~16,777,216\x20hashes\x20on\x20average.'),console[_0x993ea7(0x135)](_0x993ea7(0x185)),console[_0x993ea7(0x135)](_0x993ea7(0x184));}var REQUEST_NAME_TYPE;(function(_0x552598){const _0x2976dd=a0_0x1f2745;_0x552598[_0x2976dd(0x24a)]=_0x2976dd(0x24a),_0x552598['CONTAINER']='CONTAINER',_0x552598['TICKER']=_0x2976dd(0x22e),_0x552598[_0x2976dd(0x1b0)]=_0x2976dd(0x1b0),_0x552598['SUBREALM']=_0x2976dd(0x26d),_0x552598[_0x2976dd(0x208)]='ITEM';}(REQUEST_NAME_TYPE=exports[a0_0x1f2745(0x20d)]||(exports[a0_0x1f2745(0x20d)]={})));class AtomicalOperationBuilder{constructor(_0x1334fa){const _0xe27802=a0_0x1f2745;this['options']=_0x1334fa,this['userDefinedData']=null,this['containerMembership']=null,this['bitworkInfoCommit']=null,this[_0xe27802(0x259)]=null,this['requestName']=null,this[_0xe27802(0x1ce)]=null,this[_0xe27802(0x172)]=REQUEST_NAME_TYPE[_0xe27802(0x24a)],this[_0xe27802(0x1c8)]={},this['args']={},this[_0xe27802(0x220)]={},this[_0xe27802(0x1eb)]={},this[_0xe27802(0x159)]=null,this[_0xe27802(0x15c)]=[],this[_0xe27802(0x224)]=[],this[_0xe27802(0x1b5)]=_0x22b392=>{return _0x22b392['slice'](0x1,0x21);};if(!this[_0xe27802(0x1cb)])throw new Error(_0xe27802(0x248));if(!this[_0xe27802(0x1cb)][_0xe27802(0x16f)])throw new Error(_0xe27802(0x193));!this[_0xe27802(0x1cb)][_0xe27802(0x137)]&&(this[_0xe27802(0x1cb)][_0xe27802(0x137)]=exports[_0xe27802(0x1df)]);if(this['options']['opType']===_0xe27802(0x267)){if(!this[_0xe27802(0x1cb)][_0xe27802(0x15e)])throw new Error(_0xe27802(0x232));}if(this['options']['opType']==='ft'){if(!this[_0xe27802(0x1cb)]['ftOptions'])throw new Error('ftOptions\x20required\x20for\x20ft\x20type');}if(this[_0xe27802(0x1cb)][_0xe27802(0x1f7)]===_0xe27802(0x1a8)){if(!this[_0xe27802(0x1cb)]['dftOptions'])throw new Error('dftOptions\x20required\x20for\x20dft\x20type');}if(this['options'][_0xe27802(0x1f7)]===_0xe27802(0x258)){if(!this[_0xe27802(0x1cb)]['dmtOptions'])throw new Error('dmtOptions\x20required\x20for\x20dmt\x20type');}}[a0_0x1f2745(0x188)](_0xfd5547){const _0x4c4550=a0_0x1f2745;this[_0x4c4550(0x1cb)][_0x4c4550(0x22c)]=_0xfd5547;}[a0_0x1f2745(0x1bc)](_0x175ddb){const _0xa1f1e3=a0_0x1f2745;if(this[_0xa1f1e3(0x1cb)][_0xa1f1e3(0x1f7)]!==_0xa1f1e3(0x267))throw new Error(_0xa1f1e3(0x18e));const _0x45edd7=_0x175ddb[_0xa1f1e3(0x236)]('#')?_0x175ddb[_0xa1f1e3(0x205)](0x1):_0x175ddb;(0x0,atomical_format_helpers_1['isValidContainerName'])(_0x175ddb),this[_0xa1f1e3(0x1ba)]=_0x45edd7,this['requestNameType']=REQUEST_NAME_TYPE[_0xa1f1e3(0x18d)],this[_0xa1f1e3(0x1ce)]=null;}[a0_0x1f2745(0x155)](_0x238ce7){const _0x350e97=a0_0x1f2745;if(this[_0x350e97(0x1cb)][_0x350e97(0x1f7)]!==_0x350e97(0x267))throw new Error(_0x350e97(0x213));const _0x21c5bc=_0x238ce7[_0x350e97(0x236)]('+')?_0x238ce7[_0x350e97(0x205)](0x1):_0x238ce7;(0x0,atomical_format_helpers_1[_0x350e97(0x153)])(_0x238ce7),this['requestName']=_0x21c5bc,this[_0x350e97(0x172)]=REQUEST_NAME_TYPE[_0x350e97(0x1b0)],this[_0x350e97(0x1ce)]=null;}[a0_0x1f2745(0x1c0)](_0x76d94e,_0x293b11,_0x41c76b){const _0x1d9bb4=a0_0x1f2745;if(this[_0x1d9bb4(0x1cb)][_0x1d9bb4(0x1f7)]!==_0x1d9bb4(0x267))throw new Error(_0x1d9bb4(0x176));if(!(0x0,atomical_format_helpers_1[_0x1d9bb4(0x1c6)])(_0x293b11))throw new Error(_0x1d9bb4(0x1c3));if(_0x76d94e[_0x1d9bb4(0x182)]('.')===-0x1)throw new Error(_0x1d9bb4(0x244));const _0x5b5f67=_0x76d94e[_0x1d9bb4(0x236)]('+')?_0x76d94e[_0x1d9bb4(0x205)](0x1):_0x76d94e,_0x12be69=_0x5b5f67[_0x1d9bb4(0x14f)]('.'),_0x241cf3=_0x12be69[_0x12be69[_0x1d9bb4(0x1f4)]-0x1];(0x0,atomical_format_helpers_1['isValidSubRealmName'])(_0x241cf3),this['requestName']=_0x241cf3,this[_0x1d9bb4(0x1ce)]=_0x293b11,this[_0x1d9bb4(0x172)]=REQUEST_NAME_TYPE[_0x1d9bb4(0x26d)];if(_0x41c76b===REALM_CLAIM_TYPE[_0x1d9bb4(0x1fc)])this[_0x1d9bb4(0x1d8)]({'claim_type':'direct'});else{if(_0x41c76b===REALM_CLAIM_TYPE['RULE'])this[_0x1d9bb4(0x1d8)]({'claim_type':_0x1d9bb4(0x243)});else throw new Error(_0x1d9bb4(0x24d));}}[a0_0x1f2745(0x1de)](_0x51d1cf,_0x50e428){const _0x455ec5=a0_0x1f2745;if(this[_0x455ec5(0x1cb)]['opType']!==_0x455ec5(0x267))throw new Error(_0x455ec5(0x268));if(!(0x0,atomical_format_helpers_1[_0x455ec5(0x1c6)])(_0x50e428))throw new Error(_0x455ec5(0x130));this[_0x455ec5(0x1ba)]=_0x51d1cf,this[_0x455ec5(0x1ce)]=_0x50e428,this[_0x455ec5(0x172)]=REQUEST_NAME_TYPE[_0x455ec5(0x208)];}['setRequestTicker'](_0x2e8450){const _0x27962a=a0_0x1f2745;if(this[_0x27962a(0x1cb)]['opType']!=='dft'&&this[_0x27962a(0x1cb)][_0x27962a(0x1f7)]!=='ft')throw new Error(_0x27962a(0x169));const _0x436e5e=_0x2e8450['startsWith']('$')?_0x2e8450['substring'](0x1):_0x2e8450;(0x0,atomical_format_helpers_1[_0x27962a(0x198)])(_0x436e5e),this[_0x27962a(0x1ba)]=_0x436e5e,this[_0x27962a(0x172)]=REQUEST_NAME_TYPE[_0x27962a(0x22e)],this[_0x27962a(0x1ce)]=null;}static[a0_0x1f2745(0x192)](_0x6ca8b7){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3c93f6=a0_0x3ef7;return(0x0,command_helpers_1[_0x3c93f6(0x150)])(_0x6ca8b7);});}[a0_0x1f2745(0x163)](_0x48c1af,_0x1ddf3b=![]){const _0x49bb8e=a0_0x1f2745;if(!_0x48c1af)return;if(typeof _0x48c1af!==_0x49bb8e(0x1e6))throw new Error(_0x49bb8e(0x261));if(_0x48c1af[_0x49bb8e(0x1c8)])throw new Error(_0x49bb8e(0x1ab));if(_0x48c1af['ctx'])throw new Error(_0x49bb8e(0x14d));if(_0x48c1af['init'])throw new Error(_0x49bb8e(0x1ac));this['userDefinedData']=_0x48c1af,_0x1ddf3b&&console[_0x49bb8e(0x135)]('setData',this[_0x49bb8e(0x195)]);}['getData'](){const _0x3b7779=a0_0x1f2745;return this[_0x3b7779(0x195)];}[a0_0x1f2745(0x1d8)](_0xd90d76){const _0x18195e=a0_0x1f2745;this[_0x18195e(0x199)]=_0xd90d76;}[a0_0x1f2745(0x23b)](){const _0x4bd433=a0_0x1f2745;return this[_0x4bd433(0x199)];}[a0_0x1f2745(0x22a)](_0x5f19ba){const _0x55183b=a0_0x1f2745;this[_0x55183b(0x220)]=_0x5f19ba;}[a0_0x1f2745(0x263)](){const _0x154f28=a0_0x1f2745;return this[_0x154f28(0x220)];}[a0_0x1f2745(0x146)](_0x4ebd9d){const _0x9a1148=a0_0x1f2745;this[_0x9a1148(0x1c8)]=_0x4ebd9d;}[a0_0x1f2745(0x162)](){const _0x4d6997=a0_0x1f2745;return this[_0x4d6997(0x1c8)];}[a0_0x1f2745(0x1e0)](_0x108668){const _0x190c6d=a0_0x1f2745;this[_0x190c6d(0x1eb)]=_0x108668;}[a0_0x1f2745(0x19f)](){const _0xd8bb75=a0_0x1f2745;return this[_0xd8bb75(0x1eb)];}[a0_0x1f2745(0x1b6)](_0x4d61b5){const _0x21ded7=a0_0x1f2745;if(!_0x4d61b5)throw new Error(_0x21ded7(0x151));const _0x5488b7=_0x4d61b5['startsWith']('#')?_0x4d61b5[_0x21ded7(0x205)](0x1):_0x4d61b5;if(!(0x0,atomical_format_helpers_1['isValidContainerName'])(_0x5488b7))return;this[_0x21ded7(0x23c)]=_0x5488b7;}[a0_0x1f2745(0x1ff)](_0x3a79d3){if(!_0x3a79d3)return;this['bitworkInfoCommit']=(0x0,atomical_format_helpers_1['isValidBitworkString'])(_0x3a79d3);}['setBitworkReveal'](_0x3e0e01){const _0x1c2c1f=a0_0x1f2745;if(!_0x3e0e01)return;this[_0x1c2c1f(0x259)]=(0x0,atomical_format_helpers_1['isValidBitworkString'])(_0x3e0e01);}[a0_0x1f2745(0x22f)](_0x2c6f4d,_0x500308){const _0x3259d8=a0_0x1f2745,_0x468839=ECPair[_0x3259d8(0x1c5)](_0x500308),_0x417d38=(0x0,address_keypair_path_1['getKeypairInfo'])(_0x468839);this['inputUtxos'][_0x3259d8(0x21e)]({'utxo':_0x2c6f4d,'keypairInfo':_0x417d38});}[a0_0x1f2745(0x1a1)](_0x325287){const _0xb8cf5f=a0_0x1f2745;if(!(0x0,atomical_format_helpers_1[_0xb8cf5f(0x1c6)])(_0x325287[_0xb8cf5f(0x20a)]))throw new Error(_0xb8cf5f(0x262)+_0x325287[_0xb8cf5f(0x20a)]);this['parentInputAtomical']=_0x325287;}['getInputParent'](){const _0x142f32=a0_0x1f2745;if(!this[_0x142f32(0x159)])return null;return this[_0x142f32(0x159)];}[a0_0x1f2745(0x177)](_0x4d5097){const _0x352176=a0_0x1f2745;this[_0x352176(0x224)]['push'](_0x4d5097);}['isEmpty'](_0x1a76b5){const _0x4cd8a2=a0_0x1f2745;return Object[_0x4cd8a2(0x24f)](_0x1a76b5)[_0x4cd8a2(0x1f4)]===0x0;}['sleep'](_0x1302c9){return new Promise(_0xf11410=>setTimeout(_0xf11410,_0x1302c9));}[a0_0x1f2745(0x196)](_0x138dff,_0x4ebd9c){const _0xaa20e6=a0_0x1f2745,_0x35f2e8=typeof _0x138dff['hash']==='string'?bufferutils_1[_0xaa20e6(0x16c)](Buffer[_0xaa20e6(0x1f1)](_0x138dff[_0xaa20e6(0x1a3)],_0xaa20e6(0x19d))):_0x138dff['hash'];_0x4ebd9c[_0xaa20e6(0x1f6)](_0x35f2e8,_0x138dff[_0xaa20e6(0x14c)],_0x138dff[_0xaa20e6(0x1dc)]);}[a0_0x1f2745(0x211)](_0x5c897a,_0x50db18){const _0x379821=a0_0x1f2745;_0x50db18['addOutput'](_0x5c897a['script'],_0x5c897a[_0x379821(0x226)]);}['start'](_0x30bc2c){var _0x2ccd9a,_0x12a021,_0x521b39,_0x29971e,_0x2c3ed6,_0x3451c1,_0x367963;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x42a1ee=a0_0x3ef7,_0x4b3b61=ECPair[_0x42a1ee(0x1c5)](_0x30bc2c),_0xffe958=(0x0,address_keypair_path_1[_0x42a1ee(0x13c)])(_0x4b3b61);let _0xe66123=!!this[_0x42a1ee(0x259)],_0x136513=!!this[_0x42a1ee(0x1aa)],_0xa7cf94=null,_0x528577=null;this[_0x42a1ee(0x1cb)]['meta']&&this[_0x42a1ee(0x146)](yield AtomicalOperationBuilder[_0x42a1ee(0x192)](this[_0x42a1ee(0x1cb)]['meta']));this[_0x42a1ee(0x1cb)]['init']&&this[_0x42a1ee(0x22a)](yield AtomicalOperationBuilder[_0x42a1ee(0x192)](this[_0x42a1ee(0x1cb)]['init']));this[_0x42a1ee(0x1cb)][_0x42a1ee(0x1eb)]&&this['setCtx'](yield AtomicalOperationBuilder['getDataObjectFromStringTypeHints'](this[_0x42a1ee(0x1cb)][_0x42a1ee(0x1eb)]));let _0x233a9d=Object[_0x42a1ee(0x1bd)]({},this[_0x42a1ee(0x195)]);!this[_0x42a1ee(0x1b3)](this[_0x42a1ee(0x23b)]())&&(_0x233a9d[_0x42a1ee(0x199)]=this[_0x42a1ee(0x23b)]());!this[_0x42a1ee(0x1b3)](this[_0x42a1ee(0x19f)]())&&(_0x233a9d['ctx']=this[_0x42a1ee(0x19f)]());!this[_0x42a1ee(0x1b3)](this[_0x42a1ee(0x162)]())&&(_0x233a9d['meta']=this[_0x42a1ee(0x162)]());!this['isEmpty'](this[_0x42a1ee(0x263)]())&&(_0x233a9d[_0x42a1ee(0x220)]=this[_0x42a1ee(0x263)]());this['containerMembership']&&(_0x233a9d['in']=_0x42a1ee(0x23e)+this[_0x42a1ee(0x23c)]+'\x22]');switch(this['requestNameType']){case REQUEST_NAME_TYPE[_0x42a1ee(0x22e)]:_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d['args']||{},_0x233a9d['args'][_0x42a1ee(0x1d6)]=this[_0x42a1ee(0x1ba)];break;case REQUEST_NAME_TYPE['REALM']:_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d['args']||{},_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x136)]=this['requestName'];break;case REQUEST_NAME_TYPE[_0x42a1ee(0x26d)]:_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d['args']||{},_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x180)]=this[_0x42a1ee(0x1ba)],_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x1e5)]=this[_0x42a1ee(0x1ce)];break;case REQUEST_NAME_TYPE['CONTAINER']:_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d[_0x42a1ee(0x199)]||{},_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x207)]=this[_0x42a1ee(0x1ba)];break;case REQUEST_NAME_TYPE[_0x42a1ee(0x208)]:_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d[_0x42a1ee(0x199)]||{},_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x20c)]=this['requestName'],_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x240)]=this[_0x42a1ee(0x1ce)],console[_0x42a1ee(0x135)](_0x233a9d),console[_0x42a1ee(0x135)](_0x42a1ee(0x142),this[_0x42a1ee(0x1ce)]);default:break;}_0x136513&&(_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d[_0x42a1ee(0x199)]||{},_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x183)]=(_0x2ccd9a=this[_0x42a1ee(0x1aa)])===null||_0x2ccd9a===void 0x0?void 0x0:_0x2ccd9a['hex_bitwork']);_0xe66123&&(_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d[_0x42a1ee(0x199)]||{},_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x26c)]=(_0x12a021=this[_0x42a1ee(0x259)])===null||_0x12a021===void 0x0?void 0x0:_0x12a021['hex_bitwork']);this['options']['opType']==='dmt'&&(_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d[_0x42a1ee(0x199)]||{},_0x233a9d['args'][_0x42a1ee(0x181)]=(_0x521b39=this['options']['dmtOptions'])===null||_0x521b39===void 0x0?void 0x0:_0x521b39[_0x42a1ee(0x26b)]);let _0x12584a=this[_0x42a1ee(0x201)]();_0x12584a&&(_0x233a9d[_0x42a1ee(0x199)]=_0x233a9d[_0x42a1ee(0x199)]||{},_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x227)]={[_0x12584a[_0x42a1ee(0x20a)]]:0x0});let _0x3c4992=Math[_0x42a1ee(0x21c)](Date['now']()/0x3e8),_0x4927e0=Math[_0x42a1ee(0x21c)](Math[_0x42a1ee(0x167)]()*0x989680),_0x3c8554=0x0,_0x4f1842=null,_0x16df93=null,_0x255a89=null,_0x18e98e=![];_0x136513&&(_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x14a)]=0x98967f,_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x1e9)]=_0x3c4992);console[_0x42a1ee(0x135)]('copiedData',_0x233a9d);const _0x95b3ed=new command_helpers_1[(_0x42a1ee(0x16d))](_0x233a9d);this[_0x42a1ee(0x1cb)]['verbose']&&console[_0x42a1ee(0x135)](_0x42a1ee(0x1af),_0x233a9d);const _0x17f848=_0x95b3ed[_0x42a1ee(0x14e)]()[_0x42a1ee(0x1f4)];console[_0x42a1ee(0x135)](_0x42a1ee(0x216),_0x17f848);_0x17f848<=0x3e8&&console['log'](_0x42a1ee(0x21a),_0x233a9d);const _0x2286cd=(0x0,command_helpers_1[_0x42a1ee(0x1a9)])(this[_0x42a1ee(0x1cb)][_0x42a1ee(0x1f7)],_0xffe958,_0x95b3ed),_0x15e09f=this[_0x42a1ee(0x214)](_0x2286cd[_0x42a1ee(0x212)][_0x42a1ee(0x145)]['output'][_0x42a1ee(0x1f4)]);if(cluster[_0x42a1ee(0x1c4)]){let _0x3f5f29=0x0,_0xd4fbdc=0x0,_0x45ac84={},_0x1149a2=0x0,_0x428022=0x0;const _0x4fc9b9=0x3e8,_0x42ee72=Date[_0x42a1ee(0x256)]();let _0x237926=0x0;console[_0x42a1ee(0x135)](_0x42a1ee(0x253)+_0x42ee72),console['log'](_0x42a1ee(0x1b7)+process[_0x42a1ee(0x20e)]+_0x42a1ee(0x160)),yield(0x0,select_funding_utxo_1['getFundingUtxo'])(this['options']['electrumApi'],_0xffe958[_0x42a1ee(0x1a5)],_0x15e09f[_0x42a1ee(0x140)]);let _0x344b89=setInterval(()=>{const _0x310180=_0x42a1ee;_0x237926+=_0x4fc9b9/0x3e8,_0x1149a2&&_0x428022===0x0&&(process[_0x310180(0x1ed)][_0x310180(0x1fd)](0x0),process[_0x310180(0x1ed)][_0x310180(0x15a)](0x0),process[_0x310180(0x1ed)][_0x310180(0x147)](chalk[_0x310180(0x165)](_0x310180(0x1cf)+_0x237926+_0x310180(0x17d)+_0x3f5f29+_0x310180(0x25f)+_0x5234b9+_0x310180(0x217)+(_0xd4fbdc/_0x4fc9b9)[_0x310180(0x154)](0x2)+_0x310180(0x1d7))),_0xd4fbdc=0x0);},_0x4fc9b9);const _0x1698d5=os[_0x42a1ee(0x1d2)]()['length'],_0x5234b9=0x4;console[_0x42a1ee(0x135)](_0x42a1ee(0x144)+_0x1698d5+_0x42a1ee(0x13b)+_0x5234b9+_0x42a1ee(0x245));for(let _0x4e6099=0x0;_0x4e6099<_0x5234b9;_0x4e6099++){const _0x38f481=cluster[_0x42a1ee(0x134)]();_0x38f481&&(_0x45ac84[_0x38f481['id']]={'startTime':Date['now']()},console[_0x42a1ee(0x135)]('Worker\x20process[ID:'+_0x38f481['id']+']\x20is\x20spawned...'),_0x38f481['on'](_0x42a1ee(0x1bf),_0x5770b9=>{const _0x10b305=_0x42a1ee;var _0x56553a,_0x89cc55,_0x357352;if(_0x5770b9[_0x10b305(0x1e4)]===_0x10b305(0x251)&&_0x428022===0x0)_0xd4fbdc+=_0x5770b9['noncesPerSlice'],_0x3f5f29+=_0x5770b9[_0x10b305(0x1e7)],_0x1149a2=0x1;else{if(_0x5770b9[_0x10b305(0x1e4)]===_0x10b305(0x1e1)){_0x428022=0x1,_0x1149a2=0x0,console[_0x10b305(0x135)](_0x10b305(0x178)+_0x38f481['id']+_0x10b305(0x200)+_0x38f481[_0x10b305(0x131)][_0x10b305(0x20e)]+_0x10b305(0x230)+_0x5770b9['commitTxid']+_0x10b305(0x13f)+_0x5770b9[_0x10b305(0x1b1)]),process[_0x10b305(0x1ed)][_0x10b305(0x147)](_0x10b305(0x1ae)+_0x237926+_0x10b305(0x22b)),console['log'](_0x10b305(0x158));for(const _0x59bdad in cluster['workers']){_0x59bdad!=_0x38f481['id']&&((_0x56553a=cluster[_0x10b305(0x25b)][_0x59bdad])===null||_0x56553a===void 0x0?void 0x0:_0x56553a['kill'](),console[_0x10b305(0x135)]('Kill\x20worker['+_0x59bdad+']\x20PID['+((_0x89cc55=cluster[_0x10b305(0x25b)][_0x59bdad])===null||_0x89cc55===void 0x0?void 0x0:_0x89cc55['process']['pid'])+']'));}console['log'](_0x10b305(0x166));}else _0x5770b9[_0x10b305(0x1e4)]==='endMine'&&(console[_0x10b305(0x135)]('End\x20mine\x20via\x20Subprocess:\x20'+_0x38f481[_0x10b305(0x131)][_0x10b305(0x20e)]+_0x10b305(0x1fe)+_0x5770b9[_0x10b305(0x202)]+_0x10b305(0x13f)+_0x5770b9[_0x10b305(0x1b1)]),console[_0x10b305(0x135)](chalk[_0x10b305(0x165)](_0x10b305(0x1a0)+_0x237926+'\x20s.')),console[_0x10b305(0x135)](_0x10b305(0x139)),(_0x357352=cluster[_0x10b305(0x25b)][_0x38f481['id']])===null||_0x357352===void 0x0?void 0x0:_0x357352[_0x10b305(0x21d)](),console[_0x10b305(0x135)](_0x10b305(0x166)),console[_0x10b305(0x135)](_0x10b305(0x241)),_0x1149a2=0x0,clearInterval(_0x344b89));}}),_0x38f481['on'](_0x42a1ee(0x1e2),(_0x309100,_0x13a66c)=>{const _0x43a5dd=_0x42a1ee;console[_0x43a5dd(0x135)]('subprocess\x20'+_0x38f481['process'][_0x43a5dd(0x20e)]+_0x43a5dd(0x223));}));}}else{if(_0x136513){let _0x5d7320=0x2710,_0x4131c5=0x0,_0x34865d=0x0,_0x16b833=Date[_0x42a1ee(0x256)](),_0x53ce48='bc1pr888x9s4a8zlx9cvlrg2r8tthym2m6yxvea90nry53u5qrcp95vql420j4';console[_0x42a1ee(0x135)](_0x53ce48);const _0x1d87ac=yield(0x0,select_funding_utxo_1[_0x42a1ee(0x13a)])(this['options'][_0x42a1ee(0x16f)],_0xffe958[_0x42a1ee(0x1a5)],_0x15e09f['commitAndRevealFeePlusOutputs']+_0x5d7320,!![]);printBitworkLog(this[_0x42a1ee(0x1aa)],!![]),this[_0x42a1ee(0x1cb)]['electrumApi']['close']();let _0x435855=_0x42a1ee(0x133);const _0x5953cd=0xffffffff;let _0x31e292=0x0,_0x2f744c,_0x53181c=![],_0x2f92d5,_0x5a4125,_0x82b48b,_0x45a959,_0xcb91a3=_0x42a1ee(0x191);const {address:_0x51584f,output:_0x2d51f6}=bitcoin[_0x42a1ee(0x234)][_0x42a1ee(0x15d)]({'address':_0x42a1ee(0x14b)+_0x435855+_0x42a1ee(0x1b9)+_0xcb91a3,'network':command_helpers_1[_0x42a1ee(0x13e)]});let _0x26001b=_0x2d51f6;do{if(_0x31e292===0x0||_0x31e292===_0x5953cd-0x1){yield this['sleep'](Math[_0x42a1ee(0x21c)](Math[_0x42a1ee(0x167)]()*0x3e8)),_0x31e292=0x0,_0x4927e0=Math[_0x42a1ee(0x21c)](Math['random']()*(0x989680-process['pid']-0x1))+process[_0x42a1ee(0x20e)],_0x3c4992=Math['floor'](Date[_0x42a1ee(0x256)]()/0x3e8),_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x14a)]=_0x4927e0,_0x233a9d[_0x42a1ee(0x199)][_0x42a1ee(0x1e9)]=_0x3c4992;let _0x3a850d=new command_helpers_1[(_0x42a1ee(0x16d))](_0x233a9d),_0x4c8a6a=(0x0,command_helpers_1[_0x42a1ee(0x1a9)])(this[_0x42a1ee(0x1cb)]['opType'],_0xffe958,_0x3a850d);_0x2f744c=_0x4c8a6a,_0x5a4125=_0x1d87ac['value'],_0x82b48b=this['getOutputValueForCommit'](_0x15e09f)+_0x5d7320,_0x45a959=_0x5a4125-_0x82b48b,_0x53181c=![];const _0x4bf261=_0x15e09f['commitFeeOnly']+this['options'][_0x42a1ee(0x137)]*exports[_0x42a1ee(0x1c9)];_0x2f92d5=_0x45a959-_0x4bf261,_0x45a959>0x0&&_0x2f92d5>0x0&&_0x2f92d5>=exports[_0x42a1ee(0x17c)]&&(_0x53181c=!![],console[_0x42a1ee(0x135)](_0x42a1ee(0x1dd)));}let _0x24662=new bitcoinjs_lib_1['Transaction']();this[_0x42a1ee(0x196)]({'hash':_0x1d87ac[_0x42a1ee(0x269)],'index':_0x1d87ac[_0x42a1ee(0x14c)],'sequence':_0x31e292},_0x24662),this[_0x42a1ee(0x211)]({'script':_0x2f744c['scriptP2TR'][_0x42a1ee(0x215)],'value':_0x82b48b},_0x24662),this[_0x42a1ee(0x211)]({'script':_0x26001b,'value':_0x5d7320},_0x24662);_0x53181c&&this[_0x42a1ee(0x211)]({'script':_0xffe958['output'],'value':_0x2f92d5},_0x24662);const _0x2591d0=_0x24662[_0x42a1ee(0x141)]();if(_0x136513&&(0x0,atomical_format_helpers_1[_0x42a1ee(0x17b)])(_0x2591d0,(_0x29971e=this['bitworkInfoCommit'])===null||_0x29971e===void 0x0?void 0x0:_0x29971e[_0x42a1ee(0x235)],(_0x2c3ed6=this[_0x42a1ee(0x1aa)])===null||_0x2c3ed6===void 0x0?void 0x0:_0x2c3ed6[_0x42a1ee(0x238)])){let _0xdba223=new bitcoinjs_lib_1[(_0x42a1ee(0x1fa))]({'network':command_helpers_1['NETWORK']});_0xdba223[_0x42a1ee(0x247)](0x1),_0xdba223[_0x42a1ee(0x1a7)](0x0),_0xdba223[_0x42a1ee(0x1f6)]({'hash':_0x1d87ac[_0x42a1ee(0x269)],'index':_0x1d87ac[_0x42a1ee(0x14c)],'witnessUtxo':{'value':_0x1d87ac[_0x42a1ee(0x226)],'script':Buffer[_0x42a1ee(0x1f1)](_0xffe958['output'],_0x42a1ee(0x19d))},'tapInternalKey':_0xffe958[_0x42a1ee(0x1d3)],'sequence':_0x31e292}),_0xdba223[_0x42a1ee(0x177)]({'address':_0x2f744c[_0x42a1ee(0x1f2)]['address'],'value':_0x82b48b}),_0xdba223[_0x42a1ee(0x177)]({'address':_0x42a1ee(0x14b)+_0x435855+_0x42a1ee(0x1b9)+_0xcb91a3,'value':_0x5d7320});_0x53181c&&_0xdba223[_0x42a1ee(0x177)]({'address':_0xffe958[_0x42a1ee(0x1a5)],'value':_0x2f92d5});_0xdba223['signInput'](0x0,_0xffe958[_0x42a1ee(0x231)]),_0xdba223['finalizeAllInputs']();let _0x22b78b=_0xdba223[_0x42a1ee(0x13d)](!![]);const _0x1b5e21=_0x22b78b['getId']();if(_0x1b5e21!=_0x2591d0){console[_0x42a1ee(0x135)](_0x42a1ee(0x209),'@\x20now:\x20'+_0x1b5e21,'@\x20previous:\x20'+_0x2591d0),process['send']({'type':'foundBitwork','commitTxid':_0x16df93,'revealTxid':_0x255a89});while(!![]){;}}else console[_0x42a1ee(0x135)](_0x42a1ee(0x179),'@\x20now:\x20'+_0x1b5e21,'@\x20previous:\x20'+_0x2591d0);process[_0x42a1ee(0x239)]({'type':_0x42a1ee(0x1e1),'commitTxid':_0x16df93,'revealTxid':_0x255a89}),process[_0x42a1ee(0x1ed)]['clearLine'](0x0),process[_0x42a1ee(0x1ed)][_0x42a1ee(0x15a)](0x0),process['stdout'][_0x42a1ee(0x147)](chalk[_0x42a1ee(0x1db)](_0x2591d0,_0x42a1ee(0x1a2)+_0x4131c5+'\x20('+_0x4927e0+')')),console[_0x42a1ee(0x135)](_0x42a1ee(0x218),_0x22b78b[_0x42a1ee(0x141)](),_0x42a1ee(0x21b)+_0x3c4992);const _0x8969a0=_0xdba223[_0x42a1ee(0x13d)](),_0x3f5386=_0x8969a0[_0x42a1ee(0x249)]();AtomicalOperationBuilder[_0x42a1ee(0x157)](_0xdba223,_0x8969a0);if(!(yield this['broadcastWithRetries'](_0x3f5386))){console[_0x42a1ee(0x135)]('Error\x20sending',_0x22b78b[_0x42a1ee(0x141)](),_0x3f5386);throw new Error(_0x42a1ee(0x16b)+_0x22b78b[_0x42a1ee(0x141)]());}else console['log'](_0x42a1ee(0x25c),_0x22b78b[_0x42a1ee(0x141)]());_0x18e98e=!![],_0x136513=![],_0xa7cf94=_0x2f744c['scriptP2TR'],_0x528577=_0x2f744c[_0x42a1ee(0x212)];}_0x4131c5++,_0x34865d++,_0x31e292++,Date[_0x42a1ee(0x256)]()-_0x16b833>0x3e8&&(process['send']({'type':'updateNonceCount','noncesPerSlice':_0x34865d}),_0x34865d=0x0,_0x16b833=Date[_0x42a1ee(0x256)]());}while(_0x136513);}else{const _0x5c08b0=(0x0,command_helpers_1[_0x42a1ee(0x1a9)])(this[_0x42a1ee(0x1cb)][_0x42a1ee(0x1f7)],_0xffe958,new command_helpers_1['AtomicalsPayload'](_0x233a9d));_0xa7cf94=_0x5c08b0[_0x42a1ee(0x1f2)],_0x528577=_0x5c08b0[_0x42a1ee(0x212)];}const _0x367890=yield(0x0,select_funding_utxo_1[_0x42a1ee(0x13a)])(this[_0x42a1ee(0x1cb)]['electrumApi'],_0xa7cf94[_0x42a1ee(0x1a5)],this['getOutputValueForCommit'](_0x15e09f),_0x18e98e,0x5);_0x16df93=_0x367890['txid'],_0x4f1842=_0x16df93+'i0';const _0x44cd36={'leafVersion':_0x528577[_0x42a1ee(0x145)][_0x42a1ee(0x18a)],'script':_0x528577[_0x42a1ee(0x145)][_0x42a1ee(0x215)],'controlBlock':_0x528577[_0x42a1ee(0x149)][_0x528577['witness'][_0x42a1ee(0x1f4)]-0x1]};_0xe66123&&printBitworkLog(this[_0x42a1ee(0x259)]);_0x3c8554=0x0;do{let _0x489d93=0x0,_0x18cf49=0x0,_0x4b9ed9=Math[_0x42a1ee(0x21c)](Math['random']()*0x5f5e100),_0x2915ed=Math[_0x42a1ee(0x21c)](Date[_0x42a1ee(0x256)]()/0x3e8),_0x103589=new bitcoinjs_lib_1[(_0x42a1ee(0x1fa))]({'network':command_helpers_1[_0x42a1ee(0x13e)]});_0x103589[_0x42a1ee(0x247)](0x1),_0x103589[_0x42a1ee(0x1f6)]({'sequence':this[_0x42a1ee(0x1cb)][_0x42a1ee(0x22c)]?command_helpers_1[_0x42a1ee(0x1c1)]:undefined,'hash':_0x367890[_0x42a1ee(0x269)],'index':_0x367890['vout'],'witnessUtxo':{'value':_0x367890[_0x42a1ee(0x226)],'script':_0x528577[_0x42a1ee(0x215)]},'tapLeafScript':[_0x44cd36]}),_0x489d93+=_0x367890[_0x42a1ee(0x226)];for(const _0x528189 of this['inputUtxos']){_0x103589[_0x42a1ee(0x1f6)]({'sequence':this['options']['rbf']?command_helpers_1['RBF_INPUT_SEQUENCE']:undefined,'hash':_0x528189[_0x42a1ee(0x1f3)][_0x42a1ee(0x1a3)],'index':_0x528189[_0x42a1ee(0x1f3)][_0x42a1ee(0x14c)],'witnessUtxo':_0x528189[_0x42a1ee(0x1f3)][_0x42a1ee(0x18f)],'tapInternalKey':_0x528189[_0x42a1ee(0x138)]['childNodeXOnlyPubkey']}),_0x489d93+=_0x528189['utxo']['witnessUtxo'][_0x42a1ee(0x226)];}for(const _0x596e85 of this['additionalOutputs']){_0x103589[_0x42a1ee(0x177)]({'address':_0x596e85['address'],'value':_0x596e85[_0x42a1ee(0x226)]}),_0x18cf49+=_0x596e85[_0x42a1ee(0x226)];}_0x12584a&&(_0x103589[_0x42a1ee(0x1f6)]({'sequence':this[_0x42a1ee(0x1cb)][_0x42a1ee(0x22c)]?command_helpers_1[_0x42a1ee(0x1c1)]:undefined,'hash':_0x12584a[_0x42a1ee(0x164)][_0x42a1ee(0x1a3)],'index':_0x12584a[_0x42a1ee(0x164)]['index'],'witnessUtxo':_0x12584a['parentUtxoPartial'][_0x42a1ee(0x18f)],'tapInternalKey':_0x12584a[_0x42a1ee(0x233)][_0x42a1ee(0x1d3)]}),_0x489d93+=_0x12584a[_0x42a1ee(0x164)][_0x42a1ee(0x18f)][_0x42a1ee(0x226)],_0x103589['addOutput']({'address':_0x12584a[_0x42a1ee(0x233)][_0x42a1ee(0x1a5)],'value':_0x12584a[_0x42a1ee(0x164)][_0x42a1ee(0x18f)]['value']}),_0x18cf49+=_0x12584a[_0x42a1ee(0x164)]['witnessUtxo'][_0x42a1ee(0x226)]);_0x3c8554%0x2710==0x0&&(_0x2915ed=Math[_0x42a1ee(0x21c)](Date[_0x42a1ee(0x256)]()/0x3e8));const _0x524f3c=Buffer[_0x42a1ee(0x1f1)](_0x2915ed+':'+_0x4b9ed9,'utf8'),_0x4520aa=bitcoin[_0x42a1ee(0x234)]['embed']({'data':[_0x524f3c]});_0xe66123&&_0x103589[_0x42a1ee(0x177)]({'script':_0x4520aa[_0x42a1ee(0x215)],'value':0x0});this[_0x42a1ee(0x1c7)](_0x489d93,_0x18cf49,_0x15e09f[_0x42a1ee(0x189)],_0xffe958[_0x42a1ee(0x1a5)]),_0x103589[_0x42a1ee(0x1d5)](0x0,_0xffe958['childNode']);let _0x339c3c=0x1;for(const _0x5745fb of this['inputUtxos']){_0x103589[_0x42a1ee(0x1d5)](_0x339c3c,_0x5745fb[_0x42a1ee(0x138)]['tweakedChildNode']),_0x339c3c++;}_0x12584a&&(console[_0x42a1ee(0x135)](_0x42a1ee(0x242),_0x12584a),_0x103589[_0x42a1ee(0x1d5)](_0x339c3c,_0x12584a[_0x42a1ee(0x233)][_0x42a1ee(0x231)]));const _0x46a0ba=(_0x4d216f,_0x3e0a3c)=>{const _0x485abb=_0x42a1ee,_0x82724e=[_0x3e0a3c['tapScriptSig'][0x0][_0x485abb(0x1c2)]],_0x6ba9d0=_0x82724e[_0x485abb(0x18b)](_0x44cd36[_0x485abb(0x152)])['concat'](_0x44cd36['controlBlock']);return{'finalScriptWitness':(0x0,witness_stack_to_script_witness_1[_0x485abb(0x222)])(_0x6ba9d0)};};_0x103589[_0x42a1ee(0x229)](0x0,_0x46a0ba);let _0x15bdc0=0x1;for(;_0x15bdc0<=this['inputUtxos'][_0x42a1ee(0x1f4)];_0x15bdc0++){_0x103589[_0x42a1ee(0x229)](_0x15bdc0);}_0x12584a&&_0x103589[_0x42a1ee(0x229)](_0x15bdc0);const _0x41d04c=_0x103589[_0x42a1ee(0x13d)](),_0x454859=_0x41d04c[_0x42a1ee(0x141)]();let _0x40d1e9=!_0xe66123;_0xe66123&&(0x0,atomical_format_helpers_1[_0x42a1ee(0x17b)])(_0x454859,(_0x3451c1=this[_0x42a1ee(0x259)])===null||_0x3451c1===void 0x0?void 0x0:_0x3451c1[_0x42a1ee(0x235)],(_0x367963=this[_0x42a1ee(0x259)])===null||_0x367963===void 0x0?void 0x0:_0x367963['ext'])&&(process[_0x42a1ee(0x1ed)][_0x42a1ee(0x1fd)](0x0),process[_0x42a1ee(0x1ed)][_0x42a1ee(0x15a)](0x0),process['stdout'][_0x42a1ee(0x147)](chalk[_0x42a1ee(0x1db)](_0x454859,'\x20nonces:\x20'+_0x3c8554)),console[_0x42a1ee(0x135)](_0x42a1ee(0x1a6),_0x41d04c['getId'](),'@\x20time:\x20'+Math[_0x42a1ee(0x21c)](Date['now']()/0x3e8)),_0x40d1e9=!![]);if(_0x40d1e9){AtomicalOperationBuilder[_0x42a1ee(0x157)](_0x103589,_0x41d04c),console[_0x42a1ee(0x135)](_0x42a1ee(0x1ad),_0x41d04c[_0x42a1ee(0x141)]());const _0x24af24=_0x103589[_0x42a1ee(0x13d)](),_0x3b98d6=_0x24af24[_0x42a1ee(0x249)]();if(!(yield this[_0x42a1ee(0x24c)](_0x3b98d6))){console[_0x42a1ee(0x135)](_0x42a1ee(0x257),_0x41d04c[_0x42a1ee(0x141)](),_0x3b98d6);throw new Error('Unable\x20to\x20broadcast\x20reveal\x20transaction\x20after\x20attempts');}else console[_0x42a1ee(0x135)](_0x42a1ee(0x25c),_0x41d04c[_0x42a1ee(0x141)]());_0x255a89=_0x24af24[_0x42a1ee(0x141)](),_0xe66123=![];}_0x4b9ed9++,_0x3c8554++;}while(_0xe66123);const _0x3d0db8={'success':!![],'data':{'commitTxid':_0x16df93,'revealTxid':_0x255a89}};return(this[_0x42a1ee(0x1cb)][_0x42a1ee(0x1f7)]===_0x42a1ee(0x267)||this[_0x42a1ee(0x1cb)][_0x42a1ee(0x1f7)]==='ft'||this['options']['opType']===_0x42a1ee(0x1a8))&&(_0x3d0db8[_0x42a1ee(0x204)][_0x42a1ee(0x19e)]=_0x4f1842),this[_0x42a1ee(0x1cb)][_0x42a1ee(0x1f7)]===_0x42a1ee(0x175)&&(_0x3d0db8[_0x42a1ee(0x204)][_0x42a1ee(0x148)]=_0x255a89+'i0',_0x3d0db8[_0x42a1ee(0x204)]['urn']='atom:btc:dat:'+_0x255a89+'i0'),process[_0x42a1ee(0x239)]({'type':'endMine','commitTxid':_0x16df93,'revealTxid':_0x255a89}),_0x3d0db8;}});}[a0_0x1f2745(0x24c)](_0x588c8e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1fee7f=a0_0x3ef7;let _0x2baaa9=0x0,_0x433d93=null;do{try{console['log'](_0x1fee7f(0x21f),_0x588c8e),_0x433d93=yield this[_0x1fee7f(0x1cb)][_0x1fee7f(0x16f)][_0x1fee7f(0x186)](_0x588c8e);if(_0x433d93)break;}catch(_0x33a623){console['log'](_0x1fee7f(0x19c),_0x33a623),yield this[_0x1fee7f(0x1cb)][_0x1fee7f(0x16f)][_0x1fee7f(0x26a)](),console[_0x1fee7f(0x135)](_0x1fee7f(0x203)+exports[_0x1fee7f(0x156)]+_0x1fee7f(0x19b)),yield(0x0,utils_1['sleeper'])(exports[_0x1fee7f(0x156)]);}_0x2baaa9++;}while(_0x2baaa9<exports['SEND_RETRY_ATTEMPTS']);return _0x433d93;});}static['translateFromBase32ToHex'](_0x5d77dd){return _0x5d77dd;}[a0_0x1f2745(0x252)](){const _0x556729=a0_0x1f2745;let _0x1ede94=0x0;for(const _0x329df6 of this[_0x556729(0x224)]){_0x1ede94+=_0x329df6[_0x556729(0x226)];}return _0x1ede94;}[a0_0x1f2745(0x161)](){const _0x452c81=a0_0x1f2745;let _0x20dab9=0x0;for(const _0x2ea9bc of this[_0x452c81(0x15c)]){_0x20dab9+=_0x2ea9bc[_0x452c81(0x1f3)]['witnessUtxo']['value'];}return _0x20dab9;}[a0_0x1f2745(0x173)](){const _0x2a007a=a0_0x1f2745;let _0x3a3919=0x0;for(const _0x38454c of this[_0x2a007a(0x224)]){_0x3a3919+=_0x38454c[_0x2a007a(0x226)];}return _0x3a3919;}[a0_0x1f2745(0x190)](_0xacab90=0x0){const _0x5a8a3d=a0_0x1f2745,_0x288748=0x42;let _0x358d27=0x9;if(_0xacab90<=0xfc)_0x358d27=0x1;else{if(_0xacab90<=0xffff)_0x358d27=0x3;else _0xacab90<=0xffffffff&&(_0x358d27=0x5);}return Math[_0x5a8a3d(0x1b4)](this['options'][_0x5a8a3d(0x137)]*(exports[_0x5a8a3d(0x228)]+_0x288748+(_0x358d27+_0xacab90)/0x4+this[_0x5a8a3d(0x15c)]['length']*exports[_0x5a8a3d(0x15f)]+this[_0x5a8a3d(0x224)][_0x5a8a3d(0x1f4)]*exports['OUTPUT_BYTES_BASE']));}[a0_0x1f2745(0x17e)](){const _0x2bc95e=a0_0x1f2745;return Math[_0x2bc95e(0x1b4)](this[_0x2bc95e(0x1cb)][_0x2bc95e(0x137)]*(exports['BASE_BYTES']+0x1*exports['INPUT_BYTES_BASE']+0x2*exports[_0x2bc95e(0x1c9)]));}[a0_0x1f2745(0x20f)](_0x34d5a5){const _0x381c9c=a0_0x1f2745;return _0x34d5a5[_0x381c9c(0x246)];}[a0_0x1f2745(0x16a)](){return 0x0;}['calculateFeesRequiredForAccumulatedCommitAndReveal'](_0x12e53c=0x0){const _0x4320d2=a0_0x1f2745,_0x4b0ce6=this[_0x4320d2(0x190)](_0x12e53c),_0x4d03f0=this['calculateFeesRequiredForCommit'](),_0x23cd2b=_0x4d03f0+_0x4b0ce6,_0x504fcb=_0x4d03f0+_0x4b0ce6+this['totalOutputSum'](),_0x445a52=_0x4b0ce6+this[_0x4320d2(0x252)](),_0x28b7cd={'commitAndRevealFee':_0x23cd2b,'commitAndRevealFeePlusOutputs':_0x504fcb,'revealFeePlusOutputs':_0x445a52,'commitFeeOnly':_0x4d03f0,'revealFeeOnly':_0x4b0ce6};return _0x28b7cd;}['addRevealOutputIfChangeRequired'](_0x42899a,_0x1cf05d,_0x26c923,_0x4c995c){const _0x49878f=a0_0x1f2745,_0x5e744f=_0x42899a-_0x1cf05d;if(_0x5e744f<=0x0)return;const _0x270664=_0x5e744f-_0x26c923-this['options'][_0x49878f(0x137)]*exports[_0x49878f(0x1c9)];if(_0x270664<=0x0)return;_0x270664>=exports['DUST_AMOUNT']&&this[_0x49878f(0x177)]({'address':_0x4c995c,'value':_0x270664});}[a0_0x1f2745(0x1a4)](_0x39f747,_0x162b4c,_0x3d0014,_0x26f9be){const _0xdf5e4c=a0_0x1f2745,_0x4bf7c1=_0x39f747,_0xf00c22=this[_0xdf5e4c(0x20f)](_0x162b4c),_0x293513=_0x4bf7c1-_0xf00c22;if(_0x293513<=0x0)return;const _0x1fcb71=_0x162b4c[_0xdf5e4c(0x264)]+this[_0xdf5e4c(0x1cb)]['satsbyte']*exports['OUTPUT_BYTES_BASE'],_0xfaa2e3=_0x293513-_0x1fcb71;if(_0xfaa2e3<=0x0)return;_0xfaa2e3>=exports[_0xdf5e4c(0x17c)]&&_0x3d0014[_0xdf5e4c(0x177)]({'address':_0x26f9be,'value':_0xfaa2e3});}static[a0_0x1f2745(0x157)](_0x22107f,_0x4e2886){const _0x387200=a0_0x1f2745;let _0x52a983=0x0;_0x22107f[_0x387200(0x204)][_0x387200(0x1cd)][_0x387200(0x1f0)](_0x46ece2=>{const _0x7601b3=_0x387200;_0x52a983+=_0x46ece2[_0x7601b3(0x18f)][_0x7601b3(0x226)];});let _0x4a88cb=0x0;_0x4e2886['outs'][_0x387200(0x1f0)](_0x1b2cb3=>{const _0x1b736e=_0x387200;_0x4a88cb+=_0x1b2cb3[_0x1b736e(0x226)];});if(_0x52a983-_0x4a88cb>exports[_0x387200(0x219)])throw new Error(_0x387200(0x1e8)+exports[_0x387200(0x219)]+_0x387200(0x1d0));}static[a0_0x1f2745(0x22d)](_0x3c7a53,_0x30158d,_0x2cf8ca){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x40d3d0=a0_0x3ef7,{atomicalInfo:_0x4cc143,locationInfo:_0x3f1429,inputUtxoPartial:_0x3d29db}=yield(0x0,command_helpers_1['getAndCheckAtomicalInfo'])(_0x3c7a53,_0x30158d,_0x2cf8ca[_0x40d3d0(0x1a5)]),_0x51776c=ECPair['fromWIF'](_0x2cf8ca[_0x40d3d0(0x1ee)]),_0x4ee38e=(0x0,address_keypair_path_1['getKeypairInfo'])(_0x51776c),_0x13fda0={'parentId':_0x30158d,'parentUtxoPartial':_0x3d29db,'parentKeyInfo':_0x4ee38e};return _0x13fda0;});}}exports[a0_0x1f2745(0x1b8)]=AtomicalOperationBuilder;