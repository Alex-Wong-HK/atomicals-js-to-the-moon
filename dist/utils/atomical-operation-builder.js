const a0_0x155be1=a0_0x504a;(function(_0x2cd9ab,_0x11974f){const _0x2ebff4=a0_0x504a,_0x509096=_0x2cd9ab();while(!![]){try{const _0x2097ff=parseInt(_0x2ebff4(0x1ef))/0x1*(-parseInt(_0x2ebff4(0x241))/0x2)+parseInt(_0x2ebff4(0x169))/0x3*(parseInt(_0x2ebff4(0x17d))/0x4)+parseInt(_0x2ebff4(0x1e9))/0x5+parseInt(_0x2ebff4(0x1cb))/0x6*(parseInt(_0x2ebff4(0x1e2))/0x7)+-parseInt(_0x2ebff4(0x161))/0x8+-parseInt(_0x2ebff4(0x184))/0x9*(parseInt(_0x2ebff4(0x172))/0xa)+parseInt(_0x2ebff4(0x264))/0xb;if(_0x2097ff===_0x11974f)break;else _0x509096['push'](_0x509096['shift']());}catch(_0x2ee22a){_0x509096['push'](_0x509096['shift']());}}}(a0_0xafed,0xc101e));function a0_0xafed(){const _0x3eaabe=['bc1pr888x9s4a8zlx9cvlrg2r8tthym2m6yxvea90nry53u5qrcp95vql420j4','150882aKoVqW','(((.+)+)+)+$','init','setBitworkCommit','Transaction','totalOutputSum','Psbt','Now\x20kill\x20this\x20worker\x20processes...','Payload\x20Encoded:\x20','containerMembership','initEccLib','\x20revealTxid:\x20','ftOptions','\x20this.requestParentId;','sleep','getCtx','toHex','inputs','stdout','broadcast','Success\x20sent\x20tx:\x20','../commands/witness_stack_to_script_witness',',\x20will\x20create\x20','203YdIHyg','green','Empty\x20container\x20name','bitworkr','throw','requestNameType','setCtx','3605410APaNTY','setRBF','witnessStackToScriptWitness','Data\x20must\x20be\x20an\x20object','meta','addRevealOutputIfChangeRequired','9076QltWvr','address','request_realm','\x0aDOUBLE\x20CHECK:\x20ERROR:\x20This\x20txid\x20can\x20Not\x20match\x20previous!!!,please\x20exit\x20by\x20self!!','BASE_BYTES','isValidContainerName','DEFAULT_SATS_BYTE','\x20|\x20All\x20[','updateNonceCount','reveal','type','__esModule','scriptP2TR','ecpair','\x20seconds...','time','defineProperty','calculateFeesRequiredForCommit','rbf','isValidSubRealmName','SEND_RETRY_ATTEMPTS','hasValidBitwork',']\x20commitTxid:\x20','input_bitwork','setRequestTicker\x20can\x20only\x20be\x20set\x20for\x20dft\x20or\x20ft\x20types','Invalid\x20parent\x20container\x20atomical\x20id\x20for\x20item','close','txid','job\x20start\x20time\x20','hashLockP2TR','---------\x0aWARNING:\x20This\x20might\x20take\x20a\x20very\x20long\x20time\x20depending\x20on\x20the\x20speed\x20of\x20the\x20CPU.','REALM','dftOptions\x20required\x20for\x20dft\x20type','addInputUtxo','dmtOptions\x20required\x20for\x20dmt\x20type','childNodeXOnlyPubkey','parents','value','keys','parentKeyInfo','getFundingUtxo','commit','\x20K/s','parentUtxoPartial','DIRECT','addOutput','signInput','copiedData','addOutputCvt','Error\x20sending','setVersion','SEND_RETRY_SLEEP_SECONDS','outs','prepareCommitRevealConfig','script','getData','INPUT_BYTES_BASE','Elapse:\x20','parent_realm','revealFeePlusOutputs','payments','NETWORK','fork','translateFromBase32ToHex','ext','foundBitwork','Kill\x20worker[','needChangeFeeOutput\x20=\x20true','data','Payload\x20CBOR\x20Size\x20(bytes):\x20','exit','finalizeInput','additionalOutputs','utxo','subprocess\x20','push','-\x20prefix\x20length\x20<=\x204:\x20about\x20a\x20minute\x20or\x20two.\x20~65,536\x20hashes\x20on\x20average.','ceil','args','toFixed','embed','constructor','260aNkvKo','parentAtomicalInfo','\x0aAvailable\x20Bitwork\x20found\x20via\x20Worker[','p2tr','revealTxid','bitworkInfoReveal','getId','\x20running...','search','setBitworkReveal','setRequestContainer','addInput','getDataObjectFromStringTypeHints',']\x20PID[','getOutputValueForCommit','AtomicalOperationBuilder','Data\x20cannot\x20have\x20field\x20named\x20\x27init\x27\x20set\x20manually.\x20Use\x20options\x20config.','childNode','setRequestSubrealm\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','bitworkr\x20(decoded):\x20','commitTxid','\x0aBitwork\x20matches\x20commit\x20txid!\x20','bitcoinjs-lib','setLocktime','redeem','kill','__awaiter','setRequestItem\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','message',']\x20cores\x20speed:\x20','commitFeeOnly','substring','finalSafetyCheckForExcessiveFee','getInit','\x20transaction.','13519968JMLfLv','-\x20prefix\x20length\x20>=\x207:\x20a\x20few\x20hours\x20or\x20much\x20longer.\x20>268,435,456\x20hashes\x20on\x20average.','opType','Data\x20cannot\x20have\x20field\x20named\x20\x27meta\x27\x20set\x20manually.\x20Use\x20options\x20config.','requestParentId','TICKER','rule','broadcastWithRetries','startsWith','Now\x20kill\x20other\x20worker\x20processes...','reverseBuffer','Program\x20Exit...','isValidRealmName','CONTAINER','RULE','resetConnection','cursorTo','Data\x20cannot\x20have\x20field\x20named\x20\x27ctx\x27\x20set\x20manually.\x20Use\x20options\x20config.','[\x22#','dataId','output','getTotalAdditionalInputValues','direct','setRequestRealm','setInputParent','pid','isAtomicalId','ftOptions\x20required\x20for\x20ft\x20type','options','node:process','verbose','Network\x20error\x20broadcasting\x20(Trying\x20again\x20soon...)','./select-funding-utxo','setData','requestName','parent_container','isEmpty','setRequestSubrealm','parentId','toXOnly','keypairInfo','\x0aBitwork\x20matches\x20reveal\x20txid!\x20','index','controlBlock','parentInputAtomical','Cannot\x20request\x20subrealm\x20for\x20a\x20top\x20level\x20realm','log','endMine','isValidBitworkString','from','calculateAmountRequiredForReveal','bc1p','chalk','calculateFeesRequiredForAccumulatedCommitAndReveal','string','\x0aDOUBLE\x20CHECK:\x20MATCH!!!','sleeper','Time\x20to\x20mine\x20estimates:\x20','\x20subprocess.','bitworkc\x20(decoded):\x20','@\x20previous:\x20','done','getAndCheckAtomicalInfo','Unable\x20to\x20broadcast\x20commit\x20transaction\x20after\x20attempts:\x20','2342064vqRJrg','getAdditionalFundingRequiredForReveal','send','RBF_INPUT_SEQUENCE','bitworkInfoCommit','hash','cpus','@\x20now:\x20','93531KpEQDE','setContainerMembership','electrumApi','workers','nonce','now','floor','nftOptions','signature','3795920nCJqFc','dft','nfjaatnqzq775f2sysuvj5','vrskwqwncwc6r209fd93ngyr','tiny-secp256k1','\x0aBroadcasting\x20tx...','setRequestTicker','RealmClaimType\x20must\x20be\x20DIRECT\x20or\x20RULE','hex_bitwork','Invalid\x20parent\x20atomical\x20id:\x20','\x20commitTxid:\x20','44pLheaj','bitworkr\x20(input):\x20','concat','inputUtxos','DUST_AMOUNT','redeemVersion','start','18wYryPg','AtomicalsPayload','tweakedChildNode','Total\x20Spent\x20Time:\x20','vout','2mctdw75djuw','setMeta','SUBREALM','random','Options\x20required','host\x20CPU\x20number\x20is:\x20','getMeta','dmtOptions','length','satsbyte','s\x20|\x20Total\x20calculation:\x20','clearLine','witness','dat','commitAndRevealFeePlusOutputs','nft','process','getArgs','dftOptions','EXCESSIVE_FEE_LIMIT','extractTransaction',']\x20is\x20spawned...','\x20exit','setRequestContainer\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types','-\x20prefix\x20length\x206:\x20up\x20to\x20an\x20hour\x20or\x20more.\x20~16,777,216\x20hashes\x20on\x20average.','request_ticker','DEFAULT_SATS_ATOMICAL_UTXO','urn','REQUEST_NAME_TYPE','noncesPerSlice','setArgs','Will\x20retry\x20to\x20broadcast\x20transaction\x20again\x20in\x20','Excessive\x20fee\x20detected.\x20Hardcoded\x20to\x20','write','toString','getKeypairInfo','map','ITEM','./address-keypair-path','NONE','bitworkc','sequence','ticker','ctx','assign','prepareFilesDataAsObject','\x20s.','\x20nonces:\x20','Worker\x20process[ID:','electrumApi\x20required','cbor','getInputParent','REALM_CLAIM_TYPE','request_subrealm','userDefinedData','OUTPUT_BYTES_BASE','red','\x0aAtomicals\x20Bitwork\x20Mining\x20-\x20Requested\x20bitwork\x20proof-of-work\x20mining\x20for\x20the\x20','ECPairFactory','addInputCvt','prefix','then','nftOptions\x20required\x20for\x20nft\x20type','dmt','witnessUtxo'];a0_0xafed=function(){return _0x3eaabe;};return a0_0xafed();}const a0_0x1991f4=(function(){let _0x52d51d=!![];return function(_0x49b7ae,_0x5c0b0a){const _0x213b39=_0x52d51d?function(){if(_0x5c0b0a){const _0xd9bd5f=_0x5c0b0a['apply'](_0x49b7ae,arguments);return _0x5c0b0a=null,_0xd9bd5f;}}:function(){};return _0x52d51d=![],_0x213b39;};}()),a0_0x14bd50=a0_0x1991f4(this,function(){const _0x3f96cf=a0_0x504a;return a0_0x14bd50[_0x3f96cf(0x1ab)]()[_0x3f96cf(0x249)](_0x3f96cf(0x1cc))[_0x3f96cf(0x1ab)]()[_0x3f96cf(0x240)](a0_0x14bd50)[_0x3f96cf(0x249)](_0x3f96cf(0x1cc));});a0_0x14bd50();'use strict';var __awaiter=this&&this[a0_0x155be1(0x25b)]||function(_0x906558,_0x6ea5cc,_0x30107b,_0x202520){function _0x16d5fc(_0x19e28a){return _0x19e28a instanceof _0x30107b?_0x19e28a:new _0x30107b(function(_0x1aab31){_0x1aab31(_0x19e28a);});}return new(_0x30107b||(_0x30107b=Promise))(function(_0x580e6d,_0x200332){function _0x59b485(_0x29571f){try{_0x49bea8(_0x202520['next'](_0x29571f));}catch(_0x34b7ba){_0x200332(_0x34b7ba);}}function _0x50b373(_0x35c1a3){const _0x3c74f0=a0_0x504a;try{_0x49bea8(_0x202520[_0x3c74f0(0x1e6)](_0x35c1a3));}catch(_0x2e63d3){_0x200332(_0x2e63d3);}}function _0x49bea8(_0x4408a5){const _0x1ca14b=a0_0x504a;_0x4408a5[_0x1ca14b(0x15e)]?_0x580e6d(_0x4408a5[_0x1ca14b(0x214)]):_0x16d5fc(_0x4408a5[_0x1ca14b(0x214)])[_0x1ca14b(0x1c6)](_0x59b485,_0x50b373);}_0x49bea8((_0x202520=_0x202520['apply'](_0x906558,_0x6ea5cc||[]))['next']());});};Object[a0_0x155be1(0x1ff)](exports,a0_0x155be1(0x1fa),{'value':!![]}),exports[a0_0x155be1(0x250)]=exports[a0_0x155be1(0x1a5)]=exports[a0_0x155be1(0x1bd)]=exports[a0_0x155be1(0x19c)]=exports['MAX_SEQUENCE']=exports['OUTPUT_BYTES_BASE']=exports[a0_0x155be1(0x227)]=exports[a0_0x155be1(0x1f3)]=exports['DUST_AMOUNT']=exports[a0_0x155be1(0x203)]=exports[a0_0x155be1(0x222)]=exports[a0_0x155be1(0x1a3)]=exports[a0_0x155be1(0x1f5)]=void 0x0;const address_keypair_path_1=require(a0_0x155be1(0x1af)),atomical_format_helpers_1=require('./atomical-format-helpers'),ecc=require(a0_0x155be1(0x176)),ecpair_1=require(a0_0x155be1(0x1fc)),tinysecp=require(a0_0x155be1(0x176)),bitcoin=require(a0_0x155be1(0x257)),process=require(a0_0x155be1(0x281)),chalk=require(a0_0x155be1(0x155)),bufferutils_1=require('../../node_modules/bitcoinjs-lib/src/bufferutils');bitcoin['initEccLib'](ecc);const bitcoinjs_lib_1=require(a0_0x155be1(0x257));(0x0,bitcoinjs_lib_1[a0_0x155be1(0x1d5)])(tinysecp);const command_helpers_1=require('../commands/command-helpers'),select_funding_utxo_1=require(a0_0x155be1(0x284)),utils_1=require('./utils'),witness_stack_to_script_witness_1=require(a0_0x155be1(0x1e0)),ECPair=(0x0,ecpair_1[a0_0x155be1(0x1c3)])(tinysecp);exports['DEFAULT_SATS_BYTE']=0xa,exports[a0_0x155be1(0x1a3)]=0x3e8,exports[a0_0x155be1(0x222)]=0xf,exports[a0_0x155be1(0x203)]=0x14,exports[a0_0x155be1(0x181)]=0x222,exports[a0_0x155be1(0x1f3)]=10.5,exports['INPUT_BYTES_BASE']=57.5,exports[a0_0x155be1(0x1c0)]=0x2b,exports['MAX_SEQUENCE']=0xffffffff,exports[a0_0x155be1(0x19c)]=0x7a120;const os=require('os'),cluster=require('cluster');var REALM_CLAIM_TYPE;function a0_0x504a(_0x24cafd,_0x27b7d3){const _0x30ec2d=a0_0xafed();return a0_0x504a=function(_0x14bd50,_0x1991f4){_0x14bd50=_0x14bd50-0x151;let _0xafed70=_0x30ec2d[_0x14bd50];return _0xafed70;},a0_0x504a(_0x24cafd,_0x27b7d3);}(function(_0x4bec90){const _0x537284=a0_0x155be1;_0x4bec90['DIRECT']=_0x537284(0x27a),_0x4bec90['RULE']=_0x537284(0x26a);}(REALM_CLAIM_TYPE=exports[a0_0x155be1(0x1bd)]||(exports['REALM_CLAIM_TYPE']={})));function logMiningProgressToConsole(_0x2df8bd,_0x47d14a,_0x46f353,_0x319d40){const _0x1c0d85=a0_0x155be1;if(!_0x2df8bd)return;if(_0x47d14a){_0x319d40%0x2710===0x0&&console[_0x1c0d85(0x292)]('Generated\x20nonces:\x20',_0x319d40,',\x20time:\x20',Math[_0x1c0d85(0x16f)](Date[_0x1c0d85(0x16e)]()/0x3e8));return;}process[_0x1c0d85(0x1dd)]['clearLine'](0x0),process['stdout'][_0x1c0d85(0x274)](0x0),process['stdout'][_0x1c0d85(0x1aa)](chalk['red'](_0x46f353,_0x1c0d85(0x1b8),_0x319d40));}function printBitworkLog(_0xdbee1e,_0x333d87){const _0x3cdfdf=a0_0x155be1;if(!_0xdbee1e)return;console[_0x3cdfdf(0x292)](_0x3cdfdf(0x1c2)+(_0x333d87?_0x3cdfdf(0x218):_0x3cdfdf(0x1f8))+_0x3cdfdf(0x263)),_0x333d87?(console[_0x3cdfdf(0x292)]('bitworkc\x20(input):\x20'+_0xdbee1e[_0x3cdfdf(0x206)]),console[_0x3cdfdf(0x292)](_0x3cdfdf(0x15c)+_0xdbee1e[_0x3cdfdf(0x17a)])):(console[_0x3cdfdf(0x292)](_0x3cdfdf(0x17e)+_0xdbee1e[_0x3cdfdf(0x206)]),console['log'](_0x3cdfdf(0x254)+_0xdbee1e[_0x3cdfdf(0x17a)])),console[_0x3cdfdf(0x292)](_0x3cdfdf(0x20d)),console['log'](_0x3cdfdf(0x15a)),console[_0x3cdfdf(0x292)](_0x3cdfdf(0x23b)),console[_0x3cdfdf(0x292)]('-\x20prefix\x20length\x205:\x20several\x20minutes.\x20~1,048,576\x20hashes\x20on\x20average.'),console[_0x3cdfdf(0x292)](_0x3cdfdf(0x1a1)),console[_0x3cdfdf(0x292)](_0x3cdfdf(0x265)),console[_0x3cdfdf(0x292)]('\x0aStarting\x20mining\x20now...\x0a');}var REQUEST_NAME_TYPE;(function(_0x53c2e6){const _0x2628bc=a0_0x155be1;_0x53c2e6[_0x2628bc(0x1b0)]=_0x2628bc(0x1b0),_0x53c2e6[_0x2628bc(0x271)]='CONTAINER',_0x53c2e6[_0x2628bc(0x269)]='TICKER',_0x53c2e6['REALM']=_0x2628bc(0x20e),_0x53c2e6['SUBREALM']='SUBREALM',_0x53c2e6[_0x2628bc(0x1ae)]=_0x2628bc(0x1ae);}(REQUEST_NAME_TYPE=exports[a0_0x155be1(0x1a5)]||(exports[a0_0x155be1(0x1a5)]={})));class AtomicalOperationBuilder{constructor(_0xd46e1f){const _0x166882=a0_0x155be1;this[_0x166882(0x280)]=_0xd46e1f,this[_0x166882(0x1bf)]=null,this[_0x166882(0x1d4)]=null,this[_0x166882(0x165)]=null,this[_0x166882(0x246)]=null,this[_0x166882(0x286)]=null,this[_0x166882(0x268)]=null,this['requestNameType']=REQUEST_NAME_TYPE[_0x166882(0x1b0)],this[_0x166882(0x1ed)]={},this[_0x166882(0x23d)]={},this[_0x166882(0x1cd)]={},this[_0x166882(0x1b4)]={},this[_0x166882(0x290)]=null,this[_0x166882(0x180)]=[],this[_0x166882(0x237)]=[],this[_0x166882(0x28b)]=_0x174347=>{return _0x174347['slice'](0x1,0x21);};if(!this['options'])throw new Error(_0x166882(0x18d));if(!this[_0x166882(0x280)][_0x166882(0x16b)])throw new Error(_0x166882(0x1ba));!this['options']['satsbyte']&&(this['options'][_0x166882(0x192)]=exports['DEFAULT_SATS_BYTE']);if(this[_0x166882(0x280)][_0x166882(0x266)]===_0x166882(0x198)){if(!this[_0x166882(0x280)][_0x166882(0x170)])throw new Error(_0x166882(0x1c7));}if(this[_0x166882(0x280)][_0x166882(0x266)]==='ft'){if(!this[_0x166882(0x280)][_0x166882(0x1d7)])throw new Error(_0x166882(0x27f));}if(this['options'][_0x166882(0x266)]===_0x166882(0x173)){if(!this[_0x166882(0x280)][_0x166882(0x19b)])throw new Error(_0x166882(0x20f));}if(this[_0x166882(0x280)][_0x166882(0x266)]===_0x166882(0x1c8)){if(!this[_0x166882(0x280)][_0x166882(0x190)])throw new Error(_0x166882(0x211));}}[a0_0x155be1(0x1ea)](_0x32d575){const _0x18464e=a0_0x155be1;this['options'][_0x18464e(0x201)]=_0x32d575;}[a0_0x155be1(0x24b)](_0x11a710){const _0x54b403=a0_0x155be1;if(this['options'][_0x54b403(0x266)]!=='nft')throw new Error(_0x54b403(0x1a0));const _0x44564c=_0x11a710[_0x54b403(0x26c)]('#')?_0x11a710['substring'](0x1):_0x11a710;(0x0,atomical_format_helpers_1[_0x54b403(0x1f4)])(_0x11a710),this['requestName']=_0x44564c,this[_0x54b403(0x1e7)]=REQUEST_NAME_TYPE[_0x54b403(0x271)],this[_0x54b403(0x268)]=null;}[a0_0x155be1(0x27b)](_0x3ff43d){const _0xb14df5=a0_0x155be1;if(this[_0xb14df5(0x280)][_0xb14df5(0x266)]!=='nft')throw new Error('setRequestRealm\x20can\x20only\x20be\x20set\x20for\x20NFT\x20types');const _0xb336c1=_0x3ff43d[_0xb14df5(0x26c)]('+')?_0x3ff43d[_0xb14df5(0x260)](0x1):_0x3ff43d;(0x0,atomical_format_helpers_1[_0xb14df5(0x270)])(_0x3ff43d),this[_0xb14df5(0x286)]=_0xb336c1,this[_0xb14df5(0x1e7)]=REQUEST_NAME_TYPE[_0xb14df5(0x20e)],this[_0xb14df5(0x268)]=null;}[a0_0x155be1(0x289)](_0x5499a1,_0x1e2bf3,_0x3af0cb){const _0x32c526=a0_0x155be1;if(this[_0x32c526(0x280)][_0x32c526(0x266)]!==_0x32c526(0x198))throw new Error(_0x32c526(0x253));if(!(0x0,atomical_format_helpers_1[_0x32c526(0x27e)])(_0x1e2bf3))throw new Error('Invalid\x20parent\x20realm\x20atomical\x20id\x20for\x20subrealm');if(_0x5499a1['indexOf']('.')===-0x1)throw new Error(_0x32c526(0x291));const _0x435c78=_0x5499a1[_0x32c526(0x26c)]('+')?_0x5499a1[_0x32c526(0x260)](0x1):_0x5499a1,_0x3b2c33=_0x435c78['split']('.'),_0x40e892=_0x3b2c33[_0x3b2c33[_0x32c526(0x191)]-0x1];(0x0,atomical_format_helpers_1[_0x32c526(0x202)])(_0x40e892),this[_0x32c526(0x286)]=_0x40e892,this[_0x32c526(0x268)]=_0x1e2bf3,this[_0x32c526(0x1e7)]=REQUEST_NAME_TYPE['SUBREALM'];if(_0x3af0cb===REALM_CLAIM_TYPE[_0x32c526(0x21b)])this[_0x32c526(0x1a7)]({'claim_type':_0x32c526(0x27a)});else{if(_0x3af0cb===REALM_CLAIM_TYPE[_0x32c526(0x272)])this[_0x32c526(0x1a7)]({'claim_type':'rule'});else throw new Error(_0x32c526(0x179));}}['setRequestItem'](_0x555df5,_0x1e9703){const _0x20b770=a0_0x155be1;if(this[_0x20b770(0x280)][_0x20b770(0x266)]!==_0x20b770(0x198))throw new Error(_0x20b770(0x25c));if(!(0x0,atomical_format_helpers_1[_0x20b770(0x27e)])(_0x1e9703))throw new Error(_0x20b770(0x208));this[_0x20b770(0x286)]=_0x555df5,this[_0x20b770(0x268)]=_0x1e9703,this[_0x20b770(0x1e7)]=REQUEST_NAME_TYPE[_0x20b770(0x1ae)];}[a0_0x155be1(0x178)](_0x5dce38){const _0x129a0b=a0_0x155be1;if(this['options'][_0x129a0b(0x266)]!==_0x129a0b(0x173)&&this[_0x129a0b(0x280)][_0x129a0b(0x266)]!=='ft')throw new Error(_0x129a0b(0x207));const _0xeaebe1=_0x5dce38[_0x129a0b(0x26c)]('$')?_0x5dce38[_0x129a0b(0x260)](0x1):_0x5dce38;(0x0,atomical_format_helpers_1['isValidTickerName'])(_0xeaebe1),this[_0x129a0b(0x286)]=_0xeaebe1,this[_0x129a0b(0x1e7)]=REQUEST_NAME_TYPE[_0x129a0b(0x269)],this[_0x129a0b(0x268)]=null;}static[a0_0x155be1(0x24d)](_0x344511){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x358c39=a0_0x504a;return(0x0,command_helpers_1[_0x358c39(0x1b6)])(_0x344511);});}[a0_0x155be1(0x285)](_0x4b1098,_0x2b218b=![]){const _0x1716e7=a0_0x155be1;if(!_0x4b1098)return;if(typeof _0x4b1098!=='object')throw new Error(_0x1716e7(0x1ec));if(_0x4b1098[_0x1716e7(0x1ed)])throw new Error(_0x1716e7(0x267));if(_0x4b1098[_0x1716e7(0x1b4)])throw new Error(_0x1716e7(0x275));if(_0x4b1098[_0x1716e7(0x1cd)])throw new Error(_0x1716e7(0x251));this[_0x1716e7(0x1bf)]=_0x4b1098,_0x2b218b&&console[_0x1716e7(0x292)]('setData',this['userDefinedData']);}[a0_0x155be1(0x226)](){const _0x4dfeb4=a0_0x155be1;return this[_0x4dfeb4(0x1bf)];}[a0_0x155be1(0x1a7)](_0x4147d9){const _0x3cefec=a0_0x155be1;this[_0x3cefec(0x23d)]=_0x4147d9;}[a0_0x155be1(0x19a)](){const _0x381344=a0_0x155be1;return this[_0x381344(0x23d)];}['setInit'](_0x778492){const _0x4c0349=a0_0x155be1;this[_0x4c0349(0x1cd)]=_0x778492;}[a0_0x155be1(0x262)](){const _0x250343=a0_0x155be1;return this[_0x250343(0x1cd)];}['setMeta'](_0x205027){this['meta']=_0x205027;}[a0_0x155be1(0x18f)](){const _0x13e266=a0_0x155be1;return this[_0x13e266(0x1ed)];}[a0_0x155be1(0x1e8)](_0x5cec25){this['ctx']=_0x5cec25;}['getCtx'](){return this['ctx'];}[a0_0x155be1(0x16a)](_0x5458c5){const _0x2e5011=a0_0x155be1;if(!_0x5458c5)throw new Error(_0x2e5011(0x1e4));const _0x230ba1=_0x5458c5[_0x2e5011(0x26c)]('#')?_0x5458c5[_0x2e5011(0x260)](0x1):_0x5458c5;if(!(0x0,atomical_format_helpers_1[_0x2e5011(0x1f4)])(_0x230ba1))return;this[_0x2e5011(0x1d4)]=_0x230ba1;}[a0_0x155be1(0x1ce)](_0x45a1de){const _0x22d665=a0_0x155be1;if(!_0x45a1de)return;this[_0x22d665(0x165)]=(0x0,atomical_format_helpers_1[_0x22d665(0x151)])(_0x45a1de);}[a0_0x155be1(0x24a)](_0x26db04){const _0x25409f=a0_0x155be1;if(!_0x26db04)return;this[_0x25409f(0x246)]=(0x0,atomical_format_helpers_1['isValidBitworkString'])(_0x26db04);}[a0_0x155be1(0x210)](_0x4e08f6,_0x5782da){const _0x32165a=a0_0x155be1,_0x3f2e6c=ECPair['fromWIF'](_0x5782da),_0x17d007=(0x0,address_keypair_path_1[_0x32165a(0x1ac)])(_0x3f2e6c);this[_0x32165a(0x180)][_0x32165a(0x23a)]({'utxo':_0x4e08f6,'keypairInfo':_0x17d007});}[a0_0x155be1(0x27c)](_0x26e347){const _0x48e318=a0_0x155be1;if(!(0x0,atomical_format_helpers_1[_0x48e318(0x27e)])(_0x26e347[_0x48e318(0x28a)]))throw new Error(_0x48e318(0x17b)+_0x26e347[_0x48e318(0x28a)]);this[_0x48e318(0x290)]=_0x26e347;}[a0_0x155be1(0x1bc)](){const _0xc85e52=a0_0x155be1;if(!this[_0xc85e52(0x290)])return null;return this[_0xc85e52(0x290)];}[a0_0x155be1(0x21c)](_0x5cc692){const _0x336f64=a0_0x155be1;this[_0x336f64(0x237)][_0x336f64(0x23a)](_0x5cc692);}['isEmpty'](_0xe4b8b){const _0x101b4e=a0_0x155be1;return Object[_0x101b4e(0x215)](_0xe4b8b)[_0x101b4e(0x191)]===0x0;}[a0_0x155be1(0x1d9)](_0x129651){return new Promise(_0x1f425d=>setTimeout(_0x1f425d,_0x129651));}[a0_0x155be1(0x1c4)](_0x2b8630,_0x4445b3){const _0xc306e1=a0_0x155be1,_0x33fb0b=typeof _0x2b8630[_0xc306e1(0x166)]===_0xc306e1(0x157)?bufferutils_1[_0xc306e1(0x26e)](Buffer[_0xc306e1(0x152)](_0x2b8630[_0xc306e1(0x166)],'hex')):_0x2b8630[_0xc306e1(0x166)];_0x4445b3[_0xc306e1(0x24c)](_0x33fb0b,_0x2b8630[_0xc306e1(0x28e)],_0x2b8630[_0xc306e1(0x1b2)]);}[a0_0x155be1(0x21f)](_0x267ca9,_0x3ffb71){const _0x61b799=a0_0x155be1;_0x3ffb71[_0x61b799(0x21c)](_0x267ca9[_0x61b799(0x225)],_0x267ca9[_0x61b799(0x214)]);}[a0_0x155be1(0x183)](_0x543eb4){var _0x3e2d76,_0x41a349,_0x7a4538,_0x3bb229,_0x4b3340,_0x3abfdf,_0x36832a;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4d28dd=a0_0x504a,_0x17c5d0=ECPair['fromWIF'](_0x543eb4),_0x24ce2b=(0x0,address_keypair_path_1['getKeypairInfo'])(_0x17c5d0);let _0x2971f0=!!this[_0x4d28dd(0x246)],_0x1da288=!!this[_0x4d28dd(0x165)],_0x31d4f3=null,_0x480c0f=null;this[_0x4d28dd(0x280)][_0x4d28dd(0x1ed)]&&this[_0x4d28dd(0x18a)](yield AtomicalOperationBuilder[_0x4d28dd(0x24d)](this[_0x4d28dd(0x280)]['meta']));this[_0x4d28dd(0x280)][_0x4d28dd(0x1cd)]&&this['setInit'](yield AtomicalOperationBuilder[_0x4d28dd(0x24d)](this[_0x4d28dd(0x280)][_0x4d28dd(0x1cd)]));this['options'][_0x4d28dd(0x1b4)]&&this[_0x4d28dd(0x1e8)](yield AtomicalOperationBuilder[_0x4d28dd(0x24d)](this['options'][_0x4d28dd(0x1b4)]));let _0x49a3ea=Object[_0x4d28dd(0x1b5)]({},this['userDefinedData']);!this['isEmpty'](this[_0x4d28dd(0x19a)]())&&(_0x49a3ea[_0x4d28dd(0x23d)]=this[_0x4d28dd(0x19a)]());!this[_0x4d28dd(0x288)](this['getCtx']())&&(_0x49a3ea[_0x4d28dd(0x1b4)]=this[_0x4d28dd(0x1da)]());!this[_0x4d28dd(0x288)](this[_0x4d28dd(0x18f)]())&&(_0x49a3ea['meta']=this['getMeta']());!this['isEmpty'](this[_0x4d28dd(0x262)]())&&(_0x49a3ea[_0x4d28dd(0x1cd)]=this[_0x4d28dd(0x262)]());this[_0x4d28dd(0x1d4)]&&(_0x49a3ea['in']=_0x4d28dd(0x276)+this['containerMembership']+'\x22]');switch(this[_0x4d28dd(0x1e7)]){case REQUEST_NAME_TYPE[_0x4d28dd(0x269)]:_0x49a3ea['args']=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea[_0x4d28dd(0x23d)][_0x4d28dd(0x1a2)]=this[_0x4d28dd(0x286)];break;case REQUEST_NAME_TYPE['REALM']:_0x49a3ea[_0x4d28dd(0x23d)]=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea['args'][_0x4d28dd(0x1f1)]=this[_0x4d28dd(0x286)];break;case REQUEST_NAME_TYPE[_0x4d28dd(0x18b)]:_0x49a3ea[_0x4d28dd(0x23d)]=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea[_0x4d28dd(0x23d)][_0x4d28dd(0x1be)]=this[_0x4d28dd(0x286)],_0x49a3ea[_0x4d28dd(0x23d)][_0x4d28dd(0x229)]=this[_0x4d28dd(0x268)];break;case REQUEST_NAME_TYPE[_0x4d28dd(0x271)]:_0x49a3ea['args']=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea[_0x4d28dd(0x23d)]['request_container']=this['requestName'];break;case REQUEST_NAME_TYPE[_0x4d28dd(0x1ae)]:_0x49a3ea[_0x4d28dd(0x23d)]=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea[_0x4d28dd(0x23d)]['request_dmitem']=this[_0x4d28dd(0x286)],_0x49a3ea['args'][_0x4d28dd(0x287)]=this[_0x4d28dd(0x268)],console[_0x4d28dd(0x292)](_0x49a3ea),console[_0x4d28dd(0x292)](_0x4d28dd(0x1d8),this[_0x4d28dd(0x268)]);default:break;}_0x1da288&&(_0x49a3ea[_0x4d28dd(0x23d)]=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea[_0x4d28dd(0x23d)][_0x4d28dd(0x1b1)]=(_0x3e2d76=this[_0x4d28dd(0x165)])===null||_0x3e2d76===void 0x0?void 0x0:_0x3e2d76[_0x4d28dd(0x17a)]);_0x2971f0&&(_0x49a3ea['args']=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea['args'][_0x4d28dd(0x1e5)]=(_0x41a349=this[_0x4d28dd(0x246)])===null||_0x41a349===void 0x0?void 0x0:_0x41a349[_0x4d28dd(0x17a)]);this['options'][_0x4d28dd(0x266)]===_0x4d28dd(0x1c8)&&(_0x49a3ea[_0x4d28dd(0x23d)]=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea[_0x4d28dd(0x23d)]['mint_ticker']=(_0x7a4538=this['options']['dmtOptions'])===null||_0x7a4538===void 0x0?void 0x0:_0x7a4538[_0x4d28dd(0x1b3)]);let _0x2609b0=this[_0x4d28dd(0x1bc)]();_0x2609b0&&(_0x49a3ea['args']=_0x49a3ea[_0x4d28dd(0x23d)]||{},_0x49a3ea[_0x4d28dd(0x23d)][_0x4d28dd(0x213)]={[_0x2609b0['parentId']]:0x0});let _0x43b82a=Math['floor'](Date[_0x4d28dd(0x16e)]()/0x3e8),_0x4435c2=Math[_0x4d28dd(0x16f)](Math['random']()*0x989680),_0x5679e6=0x0,_0x4483cb=null,_0x1d0472=null,_0x186b2e=null,_0x999311=![];_0x1da288&&(_0x49a3ea[_0x4d28dd(0x23d)]['nonce']=0x98967f,_0x49a3ea['args'][_0x4d28dd(0x1fe)]=_0x43b82a);console[_0x4d28dd(0x292)]('copiedData',_0x49a3ea);const _0x1d0838=new command_helpers_1[(_0x4d28dd(0x185))](_0x49a3ea);this[_0x4d28dd(0x280)][_0x4d28dd(0x282)]&&console['log'](_0x4d28dd(0x21e),_0x49a3ea);const _0x2312c3=_0x1d0838[_0x4d28dd(0x1bb)]()[_0x4d28dd(0x191)];console[_0x4d28dd(0x292)](_0x4d28dd(0x234),_0x2312c3);_0x2312c3<=0x3e8&&console[_0x4d28dd(0x292)](_0x4d28dd(0x1d3),_0x49a3ea);const _0x3083ff=(0x0,command_helpers_1[_0x4d28dd(0x224)])(this['options'][_0x4d28dd(0x266)],_0x24ce2b,_0x1d0838),_0x46ff7c=this['calculateFeesRequiredForAccumulatedCommitAndReveal'](_0x3083ff[_0x4d28dd(0x20c)]['redeem'][_0x4d28dd(0x278)][_0x4d28dd(0x191)]);if(cluster['isPrimary']){let _0x5aa8a1=0x0,_0x54cca2=0x0,_0x51f46b={},_0x5897bc=0x0,_0x31b4fd=0x0;const _0x2cb50b=0x3e8,_0x4ba552=Date[_0x4d28dd(0x16e)]();let _0x23d6d0=0x0;console[_0x4d28dd(0x292)](_0x4d28dd(0x20b)+_0x4ba552),console[_0x4d28dd(0x292)]('main\x20process\x20'+process[_0x4d28dd(0x27d)]+_0x4d28dd(0x248)),yield(0x0,select_funding_utxo_1['getFundingUtxo'])(this[_0x4d28dd(0x280)][_0x4d28dd(0x16b)],_0x24ce2b[_0x4d28dd(0x1f0)],_0x46ff7c[_0x4d28dd(0x197)]);let _0x549ff7=setInterval(()=>{const _0x10a9d5=_0x4d28dd;_0x23d6d0+=_0x2cb50b/0x3e8,_0x5897bc&&_0x31b4fd===0x0&&(process[_0x10a9d5(0x1dd)][_0x10a9d5(0x194)](0x0),process['stdout'][_0x10a9d5(0x274)](0x0),process[_0x10a9d5(0x1dd)][_0x10a9d5(0x1aa)](chalk['red'](_0x10a9d5(0x228)+_0x23d6d0+_0x10a9d5(0x193)+_0x5aa8a1+_0x10a9d5(0x1f6)+_0x45a28e+_0x10a9d5(0x25e)+(_0x54cca2/_0x2cb50b)[_0x10a9d5(0x23e)](0x2)+_0x10a9d5(0x219))),_0x54cca2=0x0);},_0x2cb50b);const _0x860b4=os[_0x4d28dd(0x167)]()['length'],_0x45a28e=_0x860b4;console[_0x4d28dd(0x292)](_0x4d28dd(0x18e)+_0x860b4+_0x4d28dd(0x1e1)+_0x45a28e+_0x4d28dd(0x15b));for(let _0x33e18a=0x0;_0x33e18a<0x1;_0x33e18a++){const _0x1a4eda=cluster[_0x4d28dd(0x22d)]();_0x1a4eda&&(_0x51f46b[_0x1a4eda['id']]={'startTime':Date[_0x4d28dd(0x16e)]()},console['log'](_0x4d28dd(0x1b9)+_0x1a4eda['id']+_0x4d28dd(0x19e)),_0x1a4eda['on'](_0x4d28dd(0x25d),_0x45d4c1=>{const _0x39f1c3=_0x4d28dd;var _0x1b5873,_0x403b9c,_0x36635f;if(_0x45d4c1[_0x39f1c3(0x1f9)]==='updateNonceCount'&&_0x31b4fd===0x0)_0x54cca2+=_0x45d4c1[_0x39f1c3(0x1a6)],_0x5aa8a1+=_0x45d4c1[_0x39f1c3(0x1a6)],_0x5897bc=0x1;else{if(_0x45d4c1[_0x39f1c3(0x1f9)]==='foundBitwork'){_0x31b4fd=0x1,_0x5897bc=0x0,console[_0x39f1c3(0x292)](_0x39f1c3(0x243)+_0x1a4eda['id']+']\x20==>\x20Subprocess['+_0x1a4eda[_0x39f1c3(0x199)]['pid']+_0x39f1c3(0x205)+_0x45d4c1[_0x39f1c3(0x255)]+_0x39f1c3(0x1d6)+_0x45d4c1[_0x39f1c3(0x245)]),process['stdout'][_0x39f1c3(0x1aa)]('Spent\x20Time:\x20'+_0x23d6d0+_0x39f1c3(0x1b7)),console[_0x39f1c3(0x292)](_0x39f1c3(0x26d));for(const _0x1daec6 in cluster[_0x39f1c3(0x16c)]){_0x1daec6!=_0x1a4eda['id']&&((_0x1b5873=cluster['workers'][_0x1daec6])===null||_0x1b5873===void 0x0?void 0x0:_0x1b5873[_0x39f1c3(0x25a)](),console[_0x39f1c3(0x292)](_0x39f1c3(0x231)+_0x1daec6+_0x39f1c3(0x24e)+((_0x403b9c=cluster[_0x39f1c3(0x16c)][_0x1daec6])===null||_0x403b9c===void 0x0?void 0x0:_0x403b9c[_0x39f1c3(0x199)][_0x39f1c3(0x27d)])+']'));}console[_0x39f1c3(0x292)]('Kill\x20CMD\x20send\x20completed');}else _0x45d4c1[_0x39f1c3(0x1f9)]===_0x39f1c3(0x293)&&(console[_0x39f1c3(0x292)]('End\x20mine\x20via\x20Subprocess:\x20'+_0x1a4eda[_0x39f1c3(0x199)][_0x39f1c3(0x27d)]+_0x39f1c3(0x17c)+_0x45d4c1[_0x39f1c3(0x255)]+'\x20revealTxid:\x20'+_0x45d4c1[_0x39f1c3(0x245)]),console[_0x39f1c3(0x292)](chalk[_0x39f1c3(0x1c1)](_0x39f1c3(0x187)+_0x23d6d0+_0x39f1c3(0x1b7))),console['log'](_0x39f1c3(0x1d2)),(_0x36635f=cluster[_0x39f1c3(0x16c)][_0x1a4eda['id']])===null||_0x36635f===void 0x0?void 0x0:_0x36635f[_0x39f1c3(0x25a)](),console[_0x39f1c3(0x292)]('Kill\x20CMD\x20send\x20completed'),console[_0x39f1c3(0x292)](_0x39f1c3(0x26f)),_0x5897bc=0x0,clearInterval(_0x549ff7));}}),_0x1a4eda['on'](_0x4d28dd(0x235),(_0x233923,_0x21f330)=>{const _0x338c43=_0x4d28dd;console[_0x338c43(0x292)](_0x338c43(0x239)+_0x1a4eda[_0x338c43(0x199)][_0x338c43(0x27d)]+_0x338c43(0x19f));}));}}else{if(_0x1da288){let _0x52c31c=0x2710,_0x1b245d=0x0,_0x5e27ed=0x0,_0x330e7d=Date[_0x4d28dd(0x16e)](),_0x336a74=_0x4d28dd(0x1ca);console[_0x4d28dd(0x292)](_0x336a74);const _0x95bffb=yield(0x0,select_funding_utxo_1[_0x4d28dd(0x217)])(this[_0x4d28dd(0x280)][_0x4d28dd(0x16b)],_0x24ce2b[_0x4d28dd(0x1f0)],_0x46ff7c[_0x4d28dd(0x197)]+_0x52c31c,!![]);printBitworkLog(this[_0x4d28dd(0x165)],!![]),this[_0x4d28dd(0x280)][_0x4d28dd(0x16b)][_0x4d28dd(0x209)]();let _0x10786d=_0x4d28dd(0x189);const _0x469c0a=0xffffffff;let _0x4c85c6=0x0,_0x2f837a,_0xb35a6b=![],_0x5eab78,_0x2403a1,_0x6d9750,_0x53d878,_0x2f906a=_0x4d28dd(0x174);const {address:_0x51dc23,output:_0x5a8fb9}=bitcoin[_0x4d28dd(0x22b)][_0x4d28dd(0x244)]({'address':_0x4d28dd(0x154)+_0x10786d+_0x4d28dd(0x175)+_0x2f906a,'network':command_helpers_1['NETWORK']});let _0x54c3ae=_0x5a8fb9;do{if(_0x4c85c6===0x0||_0x4c85c6===_0x469c0a-0x1){yield this[_0x4d28dd(0x1d9)](Math[_0x4d28dd(0x16f)](Math[_0x4d28dd(0x18c)]()*0x3e8)),_0x4c85c6=0x0,_0x4435c2=Math[_0x4d28dd(0x16f)](Math[_0x4d28dd(0x18c)]()*(0x989680-process[_0x4d28dd(0x27d)]-0x1))+process[_0x4d28dd(0x27d)],_0x43b82a=Math[_0x4d28dd(0x16f)](Date[_0x4d28dd(0x16e)]()/0x3e8),_0x49a3ea[_0x4d28dd(0x23d)][_0x4d28dd(0x16d)]=_0x4435c2,_0x49a3ea[_0x4d28dd(0x23d)]['time']=_0x43b82a;let _0x2412c3=new command_helpers_1[(_0x4d28dd(0x185))](_0x49a3ea),_0x45a6de=(0x0,command_helpers_1[_0x4d28dd(0x224)])(this[_0x4d28dd(0x280)][_0x4d28dd(0x266)],_0x24ce2b,_0x2412c3);_0x2f837a=_0x45a6de,_0x2403a1=_0x95bffb[_0x4d28dd(0x214)],_0x6d9750=this[_0x4d28dd(0x24f)](_0x46ff7c)+_0x52c31c,_0x53d878=_0x2403a1-_0x6d9750,_0xb35a6b=![];const _0x45ed9d=_0x46ff7c[_0x4d28dd(0x25f)]+this[_0x4d28dd(0x280)]['satsbyte']*exports['OUTPUT_BYTES_BASE'];_0x5eab78=_0x53d878-_0x45ed9d,_0x53d878>0x0&&_0x5eab78>0x0&&_0x5eab78>=exports[_0x4d28dd(0x181)]&&(_0xb35a6b=!![],console[_0x4d28dd(0x292)](_0x4d28dd(0x232)));}let _0x5d40d5=new bitcoinjs_lib_1[(_0x4d28dd(0x1cf))]();this[_0x4d28dd(0x1c4)]({'hash':_0x95bffb['txid'],'index':_0x95bffb[_0x4d28dd(0x28e)],'sequence':_0x4c85c6},_0x5d40d5),this[_0x4d28dd(0x21f)]({'script':_0x2f837a[_0x4d28dd(0x1fb)][_0x4d28dd(0x278)],'value':_0x6d9750},_0x5d40d5),this[_0x4d28dd(0x21f)]({'script':_0x54c3ae,'value':_0x52c31c},_0x5d40d5);_0xb35a6b&&this[_0x4d28dd(0x21f)]({'script':_0x24ce2b[_0x4d28dd(0x278)],'value':_0x5eab78},_0x5d40d5);const _0x41bd25=_0x5d40d5[_0x4d28dd(0x247)]();if(_0x1da288&&(0x0,atomical_format_helpers_1[_0x4d28dd(0x204)])(_0x41bd25,(_0x3bb229=this[_0x4d28dd(0x165)])===null||_0x3bb229===void 0x0?void 0x0:_0x3bb229[_0x4d28dd(0x1c5)],(_0x4b3340=this[_0x4d28dd(0x165)])===null||_0x4b3340===void 0x0?void 0x0:_0x4b3340[_0x4d28dd(0x22f)])){let _0x33b89c=new bitcoinjs_lib_1[(_0x4d28dd(0x1d1))]({'network':command_helpers_1[_0x4d28dd(0x22c)]});_0x33b89c[_0x4d28dd(0x221)](0x1),_0x33b89c[_0x4d28dd(0x258)](0x0),_0x33b89c[_0x4d28dd(0x24c)]({'hash':_0x95bffb[_0x4d28dd(0x20a)],'index':_0x95bffb[_0x4d28dd(0x28e)],'witnessUtxo':{'value':_0x95bffb['value'],'script':Buffer[_0x4d28dd(0x152)](_0x24ce2b[_0x4d28dd(0x278)],'hex')},'tapInternalKey':_0x24ce2b['childNodeXOnlyPubkey'],'sequence':_0x4c85c6}),_0x33b89c[_0x4d28dd(0x21c)]({'address':_0x2f837a[_0x4d28dd(0x1fb)][_0x4d28dd(0x1f0)],'value':_0x6d9750}),_0x33b89c[_0x4d28dd(0x21c)]({'address':_0x4d28dd(0x154)+_0x10786d+_0x4d28dd(0x175)+_0x2f906a,'value':_0x52c31c});_0xb35a6b&&_0x33b89c[_0x4d28dd(0x21c)]({'address':_0x24ce2b[_0x4d28dd(0x1f0)],'value':_0x5eab78});_0x33b89c[_0x4d28dd(0x21d)](0x0,_0x24ce2b[_0x4d28dd(0x186)]),_0x33b89c['finalizeAllInputs']();let _0x2541e9=_0x33b89c[_0x4d28dd(0x19d)](!![]);const _0x475ce3=_0x2541e9[_0x4d28dd(0x247)]();if(_0x475ce3!=_0x41bd25){console[_0x4d28dd(0x292)](_0x4d28dd(0x1f2),_0x4d28dd(0x168)+_0x475ce3,'@\x20previous:\x20'+_0x41bd25),process[_0x4d28dd(0x163)]({'type':_0x4d28dd(0x230),'commitTxid':_0x1d0472,'revealTxid':_0x186b2e});while(!![]){;}}else console['log'](_0x4d28dd(0x158),_0x4d28dd(0x168)+_0x475ce3,_0x4d28dd(0x15d)+_0x41bd25);process[_0x4d28dd(0x163)]({'type':_0x4d28dd(0x230),'commitTxid':_0x1d0472,'revealTxid':_0x186b2e}),process[_0x4d28dd(0x1dd)][_0x4d28dd(0x194)](0x0),process['stdout']['cursorTo'](0x0),process[_0x4d28dd(0x1dd)][_0x4d28dd(0x1aa)](chalk['green'](_0x41bd25,_0x4d28dd(0x1b8)+_0x1b245d+'\x20('+_0x4435c2+')')),console['log'](_0x4d28dd(0x256),_0x2541e9[_0x4d28dd(0x247)](),'@\x20time:\x20'+_0x43b82a);const _0xef67d4=_0x33b89c['extractTransaction'](),_0x44475b=_0xef67d4[_0x4d28dd(0x1db)]();AtomicalOperationBuilder[_0x4d28dd(0x261)](_0x33b89c,_0xef67d4);if(!(yield this[_0x4d28dd(0x26b)](_0x44475b))){console[_0x4d28dd(0x292)](_0x4d28dd(0x220),_0x2541e9[_0x4d28dd(0x247)](),_0x44475b);throw new Error(_0x4d28dd(0x160)+_0x2541e9[_0x4d28dd(0x247)]());}else console['log'](_0x4d28dd(0x1df),_0x2541e9['getId']());_0x999311=!![],_0x1da288=![],_0x31d4f3=_0x2f837a['scriptP2TR'],_0x480c0f=_0x2f837a[_0x4d28dd(0x20c)];}_0x1b245d++,_0x5e27ed++,_0x4c85c6++,Date['now']()-_0x330e7d>0x3e8&&(process[_0x4d28dd(0x163)]({'type':_0x4d28dd(0x1f7),'noncesPerSlice':_0x5e27ed}),_0x5e27ed=0x0,_0x330e7d=Date[_0x4d28dd(0x16e)]());}while(_0x1da288);}else{const _0x4f581f=(0x0,command_helpers_1[_0x4d28dd(0x224)])(this[_0x4d28dd(0x280)]['opType'],_0x24ce2b,new command_helpers_1['AtomicalsPayload'](_0x49a3ea));_0x31d4f3=_0x4f581f['scriptP2TR'],_0x480c0f=_0x4f581f['hashLockP2TR'];}const _0x2cd712=yield(0x0,select_funding_utxo_1[_0x4d28dd(0x217)])(this['options'][_0x4d28dd(0x16b)],_0x31d4f3[_0x4d28dd(0x1f0)],this['getOutputValueForCommit'](_0x46ff7c),_0x999311,0x5);_0x1d0472=_0x2cd712[_0x4d28dd(0x20a)],_0x4483cb=_0x1d0472+'i0';const _0x582515={'leafVersion':_0x480c0f[_0x4d28dd(0x259)][_0x4d28dd(0x182)],'script':_0x480c0f[_0x4d28dd(0x259)][_0x4d28dd(0x278)],'controlBlock':_0x480c0f['witness'][_0x480c0f[_0x4d28dd(0x195)][_0x4d28dd(0x191)]-0x1]};_0x2971f0&&printBitworkLog(this['bitworkInfoReveal']);_0x5679e6=0x0;do{let _0x5b587c=0x0,_0x43e603=0x0,_0x5641b2=Math[_0x4d28dd(0x16f)](Math[_0x4d28dd(0x18c)]()*0x5f5e100),_0x4eb50b=Math['floor'](Date[_0x4d28dd(0x16e)]()/0x3e8),_0x265948=new bitcoinjs_lib_1[(_0x4d28dd(0x1d1))]({'network':command_helpers_1[_0x4d28dd(0x22c)]});_0x265948[_0x4d28dd(0x221)](0x1),_0x265948[_0x4d28dd(0x24c)]({'sequence':this['options'][_0x4d28dd(0x201)]?command_helpers_1['RBF_INPUT_SEQUENCE']:undefined,'hash':_0x2cd712[_0x4d28dd(0x20a)],'index':_0x2cd712[_0x4d28dd(0x188)],'witnessUtxo':{'value':_0x2cd712[_0x4d28dd(0x214)],'script':_0x480c0f[_0x4d28dd(0x278)]},'tapLeafScript':[_0x582515]}),_0x5b587c+=_0x2cd712['value'];for(const _0x32c9f4 of this[_0x4d28dd(0x180)]){_0x265948[_0x4d28dd(0x24c)]({'sequence':this['options'][_0x4d28dd(0x201)]?command_helpers_1[_0x4d28dd(0x164)]:undefined,'hash':_0x32c9f4['utxo'][_0x4d28dd(0x166)],'index':_0x32c9f4[_0x4d28dd(0x238)][_0x4d28dd(0x28e)],'witnessUtxo':_0x32c9f4[_0x4d28dd(0x238)][_0x4d28dd(0x1c9)],'tapInternalKey':_0x32c9f4[_0x4d28dd(0x28c)]['childNodeXOnlyPubkey']}),_0x5b587c+=_0x32c9f4[_0x4d28dd(0x238)][_0x4d28dd(0x1c9)][_0x4d28dd(0x214)];}for(const _0x50906c of this[_0x4d28dd(0x237)]){_0x265948[_0x4d28dd(0x21c)]({'address':_0x50906c[_0x4d28dd(0x1f0)],'value':_0x50906c[_0x4d28dd(0x214)]}),_0x43e603+=_0x50906c[_0x4d28dd(0x214)];}_0x2609b0&&(_0x265948[_0x4d28dd(0x24c)]({'sequence':this[_0x4d28dd(0x280)][_0x4d28dd(0x201)]?command_helpers_1['RBF_INPUT_SEQUENCE']:undefined,'hash':_0x2609b0[_0x4d28dd(0x21a)]['hash'],'index':_0x2609b0[_0x4d28dd(0x21a)][_0x4d28dd(0x28e)],'witnessUtxo':_0x2609b0[_0x4d28dd(0x21a)]['witnessUtxo'],'tapInternalKey':_0x2609b0['parentKeyInfo'][_0x4d28dd(0x212)]}),_0x5b587c+=_0x2609b0[_0x4d28dd(0x21a)][_0x4d28dd(0x1c9)]['value'],_0x265948[_0x4d28dd(0x21c)]({'address':_0x2609b0[_0x4d28dd(0x216)][_0x4d28dd(0x1f0)],'value':_0x2609b0[_0x4d28dd(0x21a)][_0x4d28dd(0x1c9)][_0x4d28dd(0x214)]}),_0x43e603+=_0x2609b0[_0x4d28dd(0x21a)][_0x4d28dd(0x1c9)]['value']);_0x5679e6%0x2710==0x0&&(_0x4eb50b=Math['floor'](Date[_0x4d28dd(0x16e)]()/0x3e8));const _0x3a2049=Buffer[_0x4d28dd(0x152)](_0x4eb50b+':'+_0x5641b2,'utf8'),_0x4e6e50=bitcoin[_0x4d28dd(0x22b)][_0x4d28dd(0x23f)]({'data':[_0x3a2049]});_0x2971f0&&_0x265948[_0x4d28dd(0x21c)]({'script':_0x4e6e50[_0x4d28dd(0x278)],'value':0x0});this['addRevealOutputIfChangeRequired'](_0x5b587c,_0x43e603,_0x46ff7c['revealFeeOnly'],_0x24ce2b[_0x4d28dd(0x1f0)]),_0x265948[_0x4d28dd(0x21d)](0x0,_0x24ce2b[_0x4d28dd(0x252)]);let _0x1ba3db=0x1;for(const _0x2db211 of this['inputUtxos']){_0x265948[_0x4d28dd(0x21d)](_0x1ba3db,_0x2db211[_0x4d28dd(0x28c)][_0x4d28dd(0x186)]),_0x1ba3db++;}_0x2609b0&&(console['log'](_0x4d28dd(0x242),_0x2609b0),_0x265948[_0x4d28dd(0x21d)](_0x1ba3db,_0x2609b0[_0x4d28dd(0x216)][_0x4d28dd(0x186)]));const _0xfee16a=(_0x142c2f,_0x1379d3)=>{const _0x332592=_0x4d28dd,_0x1c7166=[_0x1379d3['tapScriptSig'][0x0][_0x332592(0x171)]],_0x30e55d=_0x1c7166[_0x332592(0x17f)](_0x582515['script'])[_0x332592(0x17f)](_0x582515[_0x332592(0x28f)]);return{'finalScriptWitness':(0x0,witness_stack_to_script_witness_1[_0x332592(0x1eb)])(_0x30e55d)};};_0x265948[_0x4d28dd(0x236)](0x0,_0xfee16a);let _0x4aef65=0x1;for(;_0x4aef65<=this[_0x4d28dd(0x180)][_0x4d28dd(0x191)];_0x4aef65++){_0x265948[_0x4d28dd(0x236)](_0x4aef65);}_0x2609b0&&_0x265948[_0x4d28dd(0x236)](_0x4aef65);const _0x4cb247=_0x265948[_0x4d28dd(0x19d)](),_0x1ab388=_0x4cb247[_0x4d28dd(0x247)]();let _0x3337f3=!_0x2971f0;_0x2971f0&&(0x0,atomical_format_helpers_1['hasValidBitwork'])(_0x1ab388,(_0x3abfdf=this[_0x4d28dd(0x246)])===null||_0x3abfdf===void 0x0?void 0x0:_0x3abfdf[_0x4d28dd(0x1c5)],(_0x36832a=this['bitworkInfoReveal'])===null||_0x36832a===void 0x0?void 0x0:_0x36832a[_0x4d28dd(0x22f)])&&(process[_0x4d28dd(0x1dd)][_0x4d28dd(0x194)](0x0),process[_0x4d28dd(0x1dd)][_0x4d28dd(0x274)](0x0),process[_0x4d28dd(0x1dd)][_0x4d28dd(0x1aa)](chalk[_0x4d28dd(0x1e3)](_0x1ab388,'\x20nonces:\x20'+_0x5679e6)),console[_0x4d28dd(0x292)](_0x4d28dd(0x28d),_0x4cb247[_0x4d28dd(0x247)](),'@\x20time:\x20'+Math[_0x4d28dd(0x16f)](Date['now']()/0x3e8)),_0x3337f3=!![]);if(_0x3337f3){AtomicalOperationBuilder[_0x4d28dd(0x261)](_0x265948,_0x4cb247),console['log'](_0x4d28dd(0x177),_0x4cb247[_0x4d28dd(0x247)]());const _0x4d69d6=_0x265948[_0x4d28dd(0x19d)](),_0x32b71f=_0x4d69d6[_0x4d28dd(0x1db)]();if(!(yield this[_0x4d28dd(0x26b)](_0x32b71f))){console[_0x4d28dd(0x292)](_0x4d28dd(0x220),_0x4cb247[_0x4d28dd(0x247)](),_0x32b71f);throw new Error('Unable\x20to\x20broadcast\x20reveal\x20transaction\x20after\x20attempts');}else console[_0x4d28dd(0x292)](_0x4d28dd(0x1df),_0x4cb247[_0x4d28dd(0x247)]());_0x186b2e=_0x4d69d6[_0x4d28dd(0x247)](),_0x2971f0=![];}_0x5641b2++,_0x5679e6++;}while(_0x2971f0);const _0x4e08a9={'success':!![],'data':{'commitTxid':_0x1d0472,'revealTxid':_0x186b2e}};return(this['options'][_0x4d28dd(0x266)]===_0x4d28dd(0x198)||this['options']['opType']==='ft'||this['options']['opType']===_0x4d28dd(0x173))&&(_0x4e08a9[_0x4d28dd(0x233)]['atomicalId']=_0x4483cb),this[_0x4d28dd(0x280)][_0x4d28dd(0x266)]===_0x4d28dd(0x196)&&(_0x4e08a9['data'][_0x4d28dd(0x277)]=_0x186b2e+'i0',_0x4e08a9['data'][_0x4d28dd(0x1a4)]='atom:btc:dat:'+_0x186b2e+'i0'),process[_0x4d28dd(0x163)]({'type':_0x4d28dd(0x293),'commitTxid':_0x1d0472,'revealTxid':_0x186b2e}),_0x4e08a9;}});}[a0_0x155be1(0x26b)](_0x1c6bc7){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x48e281=a0_0x504a;let _0x387c36=0x0,_0xc83c44=null;do{try{console[_0x48e281(0x292)]('rawtx',_0x1c6bc7),_0xc83c44=yield this[_0x48e281(0x280)][_0x48e281(0x16b)][_0x48e281(0x1de)](_0x1c6bc7);if(_0xc83c44)break;}catch(_0x5b5aa4){console[_0x48e281(0x292)](_0x48e281(0x283),_0x5b5aa4),yield this[_0x48e281(0x280)][_0x48e281(0x16b)][_0x48e281(0x273)](),console[_0x48e281(0x292)](_0x48e281(0x1a8)+exports['SEND_RETRY_SLEEP_SECONDS']+_0x48e281(0x1fd)),yield(0x0,utils_1[_0x48e281(0x159)])(exports['SEND_RETRY_SLEEP_SECONDS']);}_0x387c36++;}while(_0x387c36<exports[_0x48e281(0x203)]);return _0xc83c44;});}static[a0_0x155be1(0x22e)](_0xede7cd){return _0xede7cd;}[a0_0x155be1(0x1d0)](){const _0xed06e8=a0_0x155be1;let _0x5f3a90=0x0;for(const _0x95b16e of this[_0xed06e8(0x237)]){_0x5f3a90+=_0x95b16e[_0xed06e8(0x214)];}return _0x5f3a90;}[a0_0x155be1(0x279)](){const _0x2f8308=a0_0x155be1;let _0x917cee=0x0;for(const _0x53e39a of this[_0x2f8308(0x180)]){_0x917cee+=_0x53e39a['utxo'][_0x2f8308(0x1c9)][_0x2f8308(0x214)];}return _0x917cee;}['getTotalAdditionalOutputValues'](){const _0x49aba9=a0_0x155be1;let _0x3248dc=0x0;for(const _0x5d4955 of this['additionalOutputs']){_0x3248dc+=_0x5d4955[_0x49aba9(0x214)];}return _0x3248dc;}['calculateAmountRequiredForReveal'](_0x3e4673=0x0){const _0x513b5c=a0_0x155be1,_0x1a331a=0x42;let _0x2cd74f=0x9;if(_0x3e4673<=0xfc)_0x2cd74f=0x1;else{if(_0x3e4673<=0xffff)_0x2cd74f=0x3;else _0x3e4673<=0xffffffff&&(_0x2cd74f=0x5);}return Math[_0x513b5c(0x23c)](this['options'][_0x513b5c(0x192)]*(exports[_0x513b5c(0x1f3)]+_0x1a331a+(_0x2cd74f+_0x3e4673)/0x4+this[_0x513b5c(0x180)]['length']*exports[_0x513b5c(0x227)]+this['additionalOutputs'][_0x513b5c(0x191)]*exports[_0x513b5c(0x1c0)]));}[a0_0x155be1(0x200)](){const _0x21783a=a0_0x155be1;return Math[_0x21783a(0x23c)](this[_0x21783a(0x280)][_0x21783a(0x192)]*(exports['BASE_BYTES']+0x1*exports['INPUT_BYTES_BASE']+0x2*exports[_0x21783a(0x1c0)]));}[a0_0x155be1(0x24f)](_0x8be5d9){const _0x1d95cc=a0_0x155be1;return _0x8be5d9[_0x1d95cc(0x22a)];}[a0_0x155be1(0x162)](){return 0x0;}[a0_0x155be1(0x156)](_0x4d610d=0x0){const _0x3b9d6f=a0_0x155be1,_0x202fcd=this[_0x3b9d6f(0x153)](_0x4d610d),_0x14e2d9=this[_0x3b9d6f(0x200)](),_0x7670bb=_0x14e2d9+_0x202fcd,_0xf5f6a3=_0x14e2d9+_0x202fcd+this[_0x3b9d6f(0x1d0)](),_0x34d947=_0x202fcd+this[_0x3b9d6f(0x1d0)](),_0x851b7={'commitAndRevealFee':_0x7670bb,'commitAndRevealFeePlusOutputs':_0xf5f6a3,'revealFeePlusOutputs':_0x34d947,'commitFeeOnly':_0x14e2d9,'revealFeeOnly':_0x202fcd};return _0x851b7;}[a0_0x155be1(0x1ee)](_0x78d4aa,_0x8efcac,_0x3b7876,_0x189e14){const _0x41422a=a0_0x155be1,_0x320db4=_0x78d4aa-_0x8efcac;if(_0x320db4<=0x0)return;const _0xbb6edc=_0x320db4-_0x3b7876-this[_0x41422a(0x280)][_0x41422a(0x192)]*exports[_0x41422a(0x1c0)];if(_0xbb6edc<=0x0)return;_0xbb6edc>=exports['DUST_AMOUNT']&&this[_0x41422a(0x21c)]({'address':_0x189e14,'value':_0xbb6edc});}['addCommitChangeOutputIfRequired'](_0x39bf7a,_0x1e724f,_0x4384c8,_0x5dd705){const _0x90afdb=a0_0x155be1,_0x6c4630=_0x39bf7a,_0x514374=this[_0x90afdb(0x24f)](_0x1e724f),_0x5775a3=_0x6c4630-_0x514374;if(_0x5775a3<=0x0)return;const _0x19e7ee=_0x1e724f[_0x90afdb(0x25f)]+this[_0x90afdb(0x280)]['satsbyte']*exports['OUTPUT_BYTES_BASE'],_0x316b3e=_0x5775a3-_0x19e7ee;if(_0x316b3e<=0x0)return;_0x316b3e>=exports['DUST_AMOUNT']&&_0x4384c8['addOutput']({'address':_0x5dd705,'value':_0x316b3e});}static[a0_0x155be1(0x261)](_0x1ace51,_0x2007c6){const _0x2ffe87=a0_0x155be1;let _0x5dd86a=0x0;_0x1ace51['data'][_0x2ffe87(0x1dc)][_0x2ffe87(0x1ad)](_0x2cebd5=>{const _0x387bea=_0x2ffe87;_0x5dd86a+=_0x2cebd5[_0x387bea(0x1c9)][_0x387bea(0x214)];});let _0x2fca5b=0x0;_0x2007c6[_0x2ffe87(0x223)][_0x2ffe87(0x1ad)](_0xd23def=>{const _0x3687a5=_0x2ffe87;_0x2fca5b+=_0xd23def[_0x3687a5(0x214)];});if(_0x5dd86a-_0x2fca5b>exports[_0x2ffe87(0x19c)])throw new Error(_0x2ffe87(0x1a9)+exports[_0x2ffe87(0x19c)]+'\x20satoshis.\x20Aborting\x20due\x20to\x20protect\x20funds.\x20Contact\x20developer');}static['resolveInputParent'](_0x316305,_0x353559,_0x533a22){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1333d4=a0_0x504a,{atomicalInfo:_0x2dc5c2,locationInfo:_0x32fdae,inputUtxoPartial:_0x1e7cd7}=yield(0x0,command_helpers_1[_0x1333d4(0x15f)])(_0x316305,_0x353559,_0x533a22['address']),_0x3cef50=ECPair['fromWIF'](_0x533a22['WIF']),_0x4718ab=(0x0,address_keypair_path_1[_0x1333d4(0x1ac)])(_0x3cef50),_0x1099c0={'parentId':_0x353559,'parentUtxoPartial':_0x1e7cd7,'parentKeyInfo':_0x4718ab};return _0x1099c0;});}}exports[a0_0x155be1(0x250)]=AtomicalOperationBuilder;